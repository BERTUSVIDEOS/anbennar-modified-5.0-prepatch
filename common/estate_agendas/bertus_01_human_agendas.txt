
# Hire advisor
estate_human_hire_advisor = {
	can_select = {
		high_tolerance_human_race_trigger = no
		any_owned_province = {
			is_state_core = root
			has_human_majority_trigger = yes
			ROOT = {
				NOT = {employed_advisor = {category = DIP culture = PREV}}
			}
		}
	}
	pre_effect = {
		random_owned_province = {
			limit = {has_human_majority_trigger = yes }
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
		}
	}
	immediate_effect  = {
		define_advisor = {
			type = diplomat
			skill = 2
			culture = event_target:agenda_province
			religion = event_target:agenda_province
			location = event_target:agenda_province
		}
	}
	selection_weight = {
		factor = 10
	}
	task_requirements = {
		employed_advisor = {
			category = DIP
			culture = event_target:agenda_province
		}
	}
    task_completed_effect = {
		small_increase_of_human_tolerance_effect = yes
		add_estate_loyalty = {estate = estate_human loyalty = 10}		
		event_target:agenda_province = {
			add_scaled_local_dip_power = 3
		}			
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_HIRED_ADVISOR
			influence = 5
			duration = 7300
		}
		
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }		
    }
}
# Fire advisor
estate_human_fire_advisor = {
	can_select = {
		employed_advisor = {category = DIP}
		NOT = {
			employed_advisor = {
				category = DIP
				religion = ROOT
			}
		}
		any_owned_province = {
			is_state_core = root
			has_human_majority_trigger = yes
		}
	}
	selection_weight = {
		factor = 10
	}
	pre_effect = {
		random_owned_province = {
			limit = {has_human_majority_trigger = yes}
			save_event_target_as = province_event_target
		}
	}
	immediate_effect = {
		hidden_effect = {set_country_flag = need_to_fire_dip_advisor}
	}
	on_invalid = {
		clr_country_flag = need_to_fire_dip_advisor
	}
	task_requirements = {
		custom_trigger_tooltip = {
			tooltip = fire_dip_advisor_tooltip
			has_country_flag = just_fired_dip_advisor
		}
	}
    task_completed_effect = {
		event_target:province_event_target = {
			get_cost_dependant_racial_advisor = {class = dip random = yes}
		}
		clr_country_flag = just_fired_dip_advisor
		clr_country_flag = need_to_fire_dip_advisor
		
	}
	invalid_trigger = {
		NOT = { has_country_flag = just_fired_dip_advisor }
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
		clr_country_flag = need_to_fire_dip_advisor
		
    }
}

# Pay off loans
estate_human_pay_off_loans = {
	can_select = {
		high_tolerance_human_race_trigger = yes
		num_of_loans = 5
		is_bankrupt = no
	}
	selection_weight = {
		factor = 10
	}
	fail_if = {
		is_bankrupt = yes
	}
	task_requirements = {
		NOT = { num_of_loans = 1 }
		hidden_trigger = {is_bankrupt = no}
	}
    task_completed_effect = {
		add_inflation = -2
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

# Restore republican tradition
estate_human_restore_republican_tradition = {
	can_select = {
		high_tolerance_human_race_trigger = yes
		NOT = { republican_tradition = 65 }
		republican_tradition = 20
		OR = {
			government = republic
			government = dictatorship
		}
		NOT = { has_country_modifier = agenda_republicanism_restored }
	}
	selection_weight = {
		factor = 20
	}
	fail_if = {
		NOT = { government = republic }
		NOT = { government = dictatorship }
	}
	task_requirements = {
		republican_tradition = 80
	}
    task_completed_effect = {
		add_country_modifier = {name = agenda_republicanism_restored duration = 3650}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

# Reduce Inflation
estate_human_restore_currency = {
	can_select = {
		high_tolerance_human_race_trigger = yes
		inflation = 10
		NOT = {inflation = 30}
		NOT = { has_country_modifier = boom_economy }
	}
	selection_weight = {
		factor = 20
	}
	fail_if = {
		inflation = 35
	}
	task_requirements = {
		NOT = { inflation = 5 }
	}
    task_completed_effect = {
		add_inflation = -4
		add_country_modifier = {name = boom_economy duration = 5475}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
		
    }
}

# Recover Abysmal Inflation
estate_human_recovery_from_hyperinflation = {
	can_select = {
		high_tolerance_human_race_trigger = yes
		inflation = 30
	}
	selection_weight = {
		factor = 50
	}
	task_requirements = {
		NOT = { inflation = 15 }
	}
    task_completed_effect = {
		add_inflation = -10
		add_country_modifier = {name = boom_economy duration = 5475}		
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

# Get a treasury
estate_human_get_cash = {
	can_select = {
		high_tolerance_human_race_trigger = yes
		NOT = { years_of_income = 0.5 }
		NOT = { num_of_loans = 1 }
		is_at_war = no
	}
	selection_weight = {
		factor = 20
	}
	task_requirements = {
		years_of_income = 1.0
		NOT = { num_of_loans = 1 }
	}
	fail_if = {
		num_of_loans = 2
	}
	task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		if = {
			limit = {
				any_owned_province = {
					has_human_majority_trigger = yes
					is_state_core = root
				}
			}
			random_owned_province = {
				limit = {has_human_majority_trigger = yes}
				owner = {
					define_advisor = {
						type = master_of_mint
						skill = 2
						culture = PREV
						religion = PREV
						location = PREV
						cost_multiplier = 0.75
					}
				}
			}
		}
		else_if = {
			limit = {any_province = {has_discovered = ROOT has_human_majority_trigger = yes}}
			random_province = {
				limit = {has_discovered = ROOT has_human_majority_trigger = yes}
				owner = {
					define_advisor = {
						type = master_of_mint
						skill = 2
						culture = PREV
						religion = PREV
						location = PREV
						cost_multiplier = 0.75
					}
				}
			}
		}
		else = {
			random_province = {
				limit = {has_human_majority_trigger = yes}
				owner = {
					define_advisor = {
						type = master_of_mint
						skill = 2
						culture = PREV
						religion = PREV
						location = PREV
						cost_multiplier = 0.75
					}
				}
			}
		}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_GET_CASH
			influence = 5
			duration = 7300
		}		
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

# Reduce corruption
estate_human_reduce_corruption = {
	can_select = {
		high_tolerance_human_race_trigger = yes
		corruption = 5
		is_bankrupt = no
		NOT = { has_country_modifier = freedom_from_corruption }
	}
	selection_weight = {
		factor = 30
	}
	pre_effect = {
		set_variable = {which = estate_human_reduce_corruption_var value = 0}
		if = {
			limit = {NOT = {corruption = 10}}
			set_variable = {which = estate_human_reduce_corruption_var value = 1}
		}
		else_if = {
			limit = {NOT = {corruption = 15}}
			set_variable = {which = estate_human_reduce_corruption_var value = 2}
		}
		else = {
			set_variable = {which = estate_human_reduce_corruption_var value = 3}
		}
	}
	task_requirements = {
		if = {
			limit = {check_variable = {which = estate_human_reduce_corruption_var value = 3}}
			NOT = { corruption = 10 }
		}
		else_if = {
			limit = {check_variable = {which = estate_human_reduce_corruption_var value = 2}}
			NOT = { corruption = 5 }
		}
		else = {
			NOT = { corruption = 1 }
		}
	}
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_country_modifier = {name = freedom_from_corruption duration = 5475}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_REDUCE_CORRUPTION
			influence = 5
			duration = 7300
		}		
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }		
    }
}

# Give autonomy priv
estate_human_three_privileges = {
	can_select = {
		high_tolerance_human_race_trigger = no
		any_owned_province = {
			has_human_majority_trigger = yes
			is_state_core = root
		}
		NOT = {has_estate_privilege = estate_human_autonomy}
	}
	selection_weight = {
		factor = 10		
		modifier = {factor = 1.6 num_of_owned_provinces_with = {value = 5 has_human_majority_trigger = yes}}
		modifier = {factor = 1.4 num_of_owned_provinces_with = {value = 10 has_human_majority_trigger = yes}}
		modifier = {factor = 1.2 num_of_owned_provinces_with = {value = 20 has_human_majority_trigger = yes}}
	}
	pre_effect = {
		every_owned_province = {
			limit = {has_human_majority_trigger = yes owned_by = ROOT }
			save_event_target_as = agenda_province
		}
	}
	task_requirements = {
		has_estate_privilege = estate_human_autonomy
	}
	provinces_to_highlight = {
		has_human_majority_trigger = yes
	}
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 20}
		event_target:agenda_province = {
			add_unrest = -10
			add_scaled_local_adm_power = 1
			add_scaled_local_dip_power = 1
			add_scaled_local_mil_power = 1
			get_tolerance_from_provinces = {race = human}
		}
		hidden_effect = {
			every_owned_province = {
				limit = {has_human_majority_trigger = yes}
				hidden_effect = {add_unrest = -10}
				get_tolerance_from_provinces = {race = human}
				add_scaled_local_adm_power = 1
				add_scaled_local_dip_power = 1
				add_scaled_local_mil_power = 1
			}
		}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_AUTONOMY
			influence = 10
			duration = 7300
		}		
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }		
    }
}

#Improve trade power in node X
estate_human_increase_trade_power_in_x = {
	can_select = {
		NOT = {has_country_modifier = agenda_trade_power_dip_boost_modifier}
		high_tolerance_human_race_trigger = yes
		any_active_trade_node = {
			trade_share = {country = root share = 5}
			NOT = {trade_share = {country = root share = 50}}
			any_trade_node_member_province = {has_port = yes}
		}
	}
	selection_weight = {
		factor = 10
		modifier = {factor = 1.6 num_of_merchants = 4}
		modifier = {factor = 1.4 trade_income_percentage = 0.3}
		modifier = {factor = 1.2 trade_income_percentage = 0.4}
	}
	pre_effect = {
		set_variable = {which = estate_human_increase_trade_power_in_X_var value = 0}
		random_active_trade_node = {
			limit = {
				trade_share = {country = root share = 5}
				NOT = {trade_share = {country = root share = 50}}
				any_trade_node_member_province = {has_port = yes}
			}
			save_event_target_as = agenda_trade_node
			if = {
				limit = {trade_share = {country = root share = 40}}
				root = {set_variable = {which = estate_human_increase_trade_power_in_X_var value = 7}}
			}
			else_if = {
				limit = {trade_share = {country = root share = 30}}
				root = {set_variable = {which = estate_human_increase_trade_power_in_X_var value = 6}}
			}
			else_if = {
				limit = {trade_share = {country = root share = 23}}
				root = {set_variable = {which = estate_human_increase_trade_power_in_X_var value = 5}}
			}
			else_if = {
				limit = {trade_share = {country = root share = 15}}
				root = {set_variable = {which = estate_human_increase_trade_power_in_X_var value = 4}}
			}
			else_if = {
				limit = {trade_share = {country = root share = 10}}
				root = {set_variable = {which = estate_human_increase_trade_power_in_X_var value = 3}}
			}
			else_if = {
				limit = {trade_share = {country = root share = 7}}
				root = {set_variable = {which = estate_human_increase_trade_power_in_X_var value = 2}}
			}
			else = { #Requires 15
				root = {set_variable = {which = estate_human_increase_trade_power_in_X_var value = 1}}
			}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_trade_node
	}
	task_requirements = {
		event_target:agenda_trade_node = {
			if = {
				limit = {root = {check_variable = {which = estate_human_increase_trade_power_in_X_var value = 7}}}
				trade_share = {country = root share = 65}
			}
			else_if = {
				limit = {root = {check_variable = {which = estate_human_increase_trade_power_in_X_var value = 6}}}
				trade_share = {country = root share = 50}
			}
			else_if = {
				limit = {root = {check_variable = {which = estate_human_increase_trade_power_in_X_var value = 5}}}
				trade_share = {country = root share = 40}
			}
			else_if = {
				limit = {root = {check_variable = {which = estate_human_increase_trade_power_in_X_var value = 4}}}
				trade_share = {country = root share = 30}
			}
			else_if = {
				limit = {root = {check_variable = {which = estate_human_increase_trade_power_in_X_var value = 3}}}
				trade_share = {country = root share = 25}
			}
			else_if = {
				limit = {root = {check_variable = {which = estate_human_increase_trade_power_in_X_var value = 2}}}
				trade_share = {country = root share = 20}
			}
			else_if = {
				limit = {root = {check_variable = {which = estate_human_increase_trade_power_in_X_var value = 1}}}
				trade_share = {country = root share = 15}
			}
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_country_modifier = {name = agenda_trade_power_dip_boost_modifier duration = 1825}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

# Build university in 
estate_human_build_university_in_x = {
	can_select = {
		NOT = {num_of_loans = 5 }
		any_owned_province = {
			num_free_building_slots = 1
			has_human_majority_trigger = yes
			is_state_core = root
			OR = {
				development = 10
				is_capital = yes
			}
			has_university_building_trigger = no
			NOT = { has_terrain = gladeway }
			NOT = { has_terrain = great_walls }
			NOT = { has_province_flag = estate_human_build_university_in_flag }
		}
	}
	selection_weight = {
		factor = 10
		modifier = {factor = 1.5 years_of_income = 1.0}
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
				is_state_core = root
				has_university_building_trigger = no
				development = 10
				has_human_majority_trigger = yes 
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_university_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
				is_state_core = root
				has_university_building_trigger = no
				development = 15
				has_human_majority_trigger = yes 
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_university_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
				is_state_core = root
				has_university_building_trigger = no
				development = 20
				has_human_majority_trigger = yes 
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_university_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
				is_state_core = root
				has_university_building_trigger = no
				is_capital = yes
				has_human_majority_trigger = yes 
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_university_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_university_building_trigger = yes
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_UNIVERSITY
			influence = 5
			duration = 7300
		}
		event_target:agenda_province = {
			add_base_production = 1
			hidden_effect = {
				province_event = {id = bertus_pops.1040 }
				province_event = {id = bertus_pops.1042 }
				province_event = {id = bertus_pops.1049 }
				province_event = {id = bertus_pops.1050 }
			}
			add_scaled_local_adm_power = 5
			add_scaled_local_dip_power = 5
			add_scaled_local_mil_power = 5
			get_tolerance_from_provinces = {race = human}
			set_province_flag = estate_human_build_university_in_flag
		}
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {name = local_humans_displeased value = 5}
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

# Build manufactory building
estate_human_build_manufactory_in_x = {
	can_select = {
		NOT = {num_of_loans = 5 }
		any_owned_province = {
			num_free_building_slots = 1
			is_state_core = root
			has_human_majority_trigger = yes 
			root_can_build_manufactory_here_trigger = yes
			NOT = { has_terrain = gladeway }
			NOT = { has_terrain = great_walls }
			NOT = { has_province_flag = estate_human_build_manufactory_in_flag }
		}
	}
	selection_weight = {
		factor = 10
		modifier = {factor = 1.5 years_of_income = 1.0}
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
				is_state_core = root
				root_can_build_manufactory_here_trigger = yes
				has_human_majority_trigger = yes 
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_manufactory_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
				is_state_core = root
				base_production = 5
				root_can_build_manufactory_here_trigger = yes
				has_human_majority_trigger = yes 
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_manufactory_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
				is_state_core = root
				base_production = 10
				root_can_build_manufactory_here_trigger = yes
				has_human_majority_trigger = yes 
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_manufactory_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			NOT = { owned_by = root }
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_manufactory_trigger = yes
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_MANUFACTORY
			influence = 5
			duration = 7300
		}
		event_target:agenda_province = {
			if = {
				limit = {owner = {high_tolerance_human_race_trigger = yes}}	
				add_base_production = 1
				hidden_effect = {
					province_event = {id = bertus_pops.1040 }
					province_event = {id = bertus_pops.1042 }
					province_event = {id = bertus_pops.1049 }
					province_event = {id = bertus_pops.1050 }
				}
				add_province_modifier = {name = prospering_production duration = 5475}
			}
			else = {
				get_tolerance_from_provinces = {race = human}
			}
			set_province_flag = estate_human_build_manufactory_in_flag
		}
		
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {name = local_humans_displeased value = 5}
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
		
    }
}

# Build production building in 
estate_human_build_production_building_in_x = {
	can_select = {
		adm_tech = 6
		NOT = {num_of_loans = 5 }
		any_owned_province = {
			num_free_building_slots = 1
			has_human_majority_trigger = yes 
			is_state_core = root
			has_production_building_trigger = no
			NOT = { trade_goods = gold }
			NOT = { trade_goods = silver }
			NOT = { has_terrain = gladeway }
			NOT = { has_terrain = great_walls }
			NOT = { has_province_flag = estate_human_build_production_building_in_flag }
		}
	}
	selection_weight = {
		factor = 10
		modifier = {factor = 1.5 years_of_income = 1.0}
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
				has_human_majority_trigger = yes 
				is_state_core = root
				has_production_building_trigger = no
				NOT = { trade_goods = gold }
				NOT = { trade_goods = silver }
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_production_building_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
				has_human_majority_trigger = yes 
				is_state_core = root
				base_production = 4
				has_production_building_trigger = no
				NOT = { trade_goods = gold }
				NOT = { trade_goods = silver }
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_production_building_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
				has_human_majority_trigger = yes 
				is_state_core = root
				OR = {
					base_production = 7
					has_building = wharf
					has_building = weapons
					has_building = textile
					has_building = tradecompany
					has_building = farm_estate
					has_building = mills
					has_building = plantations
					has_building = furnace
				}
				has_production_building_trigger = no
				NOT = { trade_goods = gold }
				NOT = { trade_goods = silver }
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_production_building_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			OR = {
				NOT = { owned_by = root }
				NOT = { has_human_majority_trigger = yes}
			}
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_production_building_trigger = yes
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_PRODUCTION_BUILDING
			influence = 5
			duration = 7300
		}
		event_target:agenda_province = {
			if = {
				limit = {owner = {high_tolerance_human_race_trigger = yes}}	
				add_base_production = 1
				hidden_effect = {
					province_event = {id = bertus_pops.1040 }
					province_event = {id = bertus_pops.1042 }
					province_event = {id = bertus_pops.1049 }
					province_event = {id = bertus_pops.1050 }
				}
			}
			else = {
				get_tolerance_from_provinces = {race = human}
			}
			set_province_flag = estate_human_build_production_building_in_flag
		}	
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_humans_displeased
					value = 5
				}
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
		
    }
}

# Build trade building in 
estate_human_build_trade_building_in_x = {
	can_select = {
		dip_tech = 4
		NOT = {num_of_loans = 5 }
		any_owned_province = {
			num_free_building_slots = 1
			has_human_majority_trigger = yes 
			has_trade_building_trigger = no
			is_state_core = root
			allowed_to_build_trade_building = yes
			NOT = { has_terrain = gladeway }
			NOT = { has_terrain = great_walls }
			NOT = { has_province_flag = estate_human_build_trade_building_in_flag }
		}
	}
	selection_weight = {
		factor = 10
		modifier = {factor = 1.5 years_of_income = 1.0}
	}
	pre_effect = {
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
				has_human_majority_trigger = yes 
				has_trade_building_trigger = no
				is_state_core = root
				allowed_to_build_trade_building = yes
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_trade_building_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
				has_human_majority_trigger = yes 
				has_trade_building_trigger = no
				is_state_core = root
				allowed_to_build_trade_building = yes
				OR = {
					province_has_center_of_trade_of_level = 1
					province_trade_power = 10
				}
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_trade_building_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
		random_owned_province = {
			limit = {
				num_free_building_slots = 1
				has_human_majority_trigger = yes 
				has_trade_building_trigger = no
				is_state_core = root
				allowed_to_build_trade_building = yes
				OR = {
					province_has_center_of_trade_of_level = 2
					province_trade_power = 20
				}
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_trade_building_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			OR = {
				NOT = { owned_by = root }
				NOT = { has_human_majority_trigger = yes}
			}
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_trade_building_trigger = yes
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_TRADE_BUILDING
			influence = 5
			duration = 7300
		}
		event_target:agenda_province = {
			if = {
				limit = {owner = {high_tolerance_human_race_trigger = yes}}	
				add_base_production = 1
				hidden_effect = {
					province_event = {id = bertus_pops.1040 }
					province_event = {id = bertus_pops.1042 }
					province_event = {id = bertus_pops.1049 }
					province_event = {id = bertus_pops.1050 }
				}
			}
			else = {
				get_tolerance_from_provinces = {race = human}
			}
			set_province_flag = estate_human_build_trade_building_in_flag
		}
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {
					name = local_humans_displeased
					value = 5
				}
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}
# Increase autonomy in 
estate_human_increase_autonomy_in_x = {
	can_select = {
		high_tolerance_human_race_trigger = no
		any_owned_province = {
			has_human_majority_trigger = yes 
			is_state_core = root
			NOT = { local_autonomy = 75 }
			is_capital = no
			NOT = { has_province_modifier = autonomy_increased }
			NOT = { has_province_modifier = autonomy_decreased }
			NOT = { has_terrain = gladeway }
			NOT = { has_terrain = great_walls }
		}
	}
	selection_weight = {
		factor = 15
	}
	pre_effect = {
		set_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 0}
		random_owned_province = {
			limit = {
				NOT = { local_autonomy = 75 }
				has_human_majority_trigger = yes 
				is_state_core = root
				is_capital = no
				NOT = { has_province_modifier = autonomy_increased }
				NOT = { has_province_modifier = autonomy_decreased }
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}

			if = {
				limit = {local_autonomy = 60}
				root = {set_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 5}}
			}
			else_if = {
				limit = {local_autonomy = 45}
				root = {set_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 4}}
			}
			else_if = {
				limit = {local_autonomy = 30}
				root = {set_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 3}}
			}
			else_if = {
				limit = {local_autonomy = 15}
				root = {set_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 2}}
			}
			else = {
				root = {set_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 1}}
			}
			choose_random_development_bonus_effect = yes
		}
	}
	on_invalid = {
		event_target:agenda_province = {
			clear_random_development_bonus_flags_effect = yes
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		custom_trigger_tooltip = {
			tooltip = estate_human_increase_autonomy_in_castonath_fail_if_tt
			hidden_trigger = {
				if = {
					limit = {check_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 5}}
					event_target:agenda_province = {
						OR = {
							NOT = { has_human_majority_trigger = yes}
							NOT = { local_autonomy = 50 }
						}
					}
				}
				else_if = {
					limit = {check_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 4}}
					event_target:agenda_province = {
						OR = {
							NOT = { has_human_majority_trigger = yes}
							NOT = { local_autonomy = 35 }
						}
					}
				}
				else_if = {
					limit = {check_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 3}}
					event_target:agenda_province = {
						OR = {
							NOT = { has_human_majority_trigger = yes}
							NOT = { local_autonomy = 20 }
						}
					}
				}
				else_if = {
					limit = {check_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 2}}
					event_target:agenda_province = {
						OR = {
							NOT = { has_human_majority_trigger = yes}
							NOT = { local_autonomy = 5 }
						}
					}
				}
				else = {
					hidden_trigger = {always = no}
				}
			}
		}	
	}
	task_requirements = {
		if = {
			limit = {check_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 5}}
			event_target:agenda_province = {
				local_autonomy = 75
			}
		}
		else_if = {
			limit = {check_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 4}}
			event_target:agenda_province = {
				local_autonomy = 60
			}
		}
		else_if = {
			limit = {check_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 3}}
			event_target:agenda_province = {
				local_autonomy = 45
			}
		}
		else_if = {
			limit = {check_variable = {which = estate_human_increase_autonomy_in_province_x_var value = 2}}
			event_target:agenda_province = {
				local_autonomy = 30
			}
		}
		else = {
			event_target:agenda_province = {
				local_autonomy = 15
			}
		}
	}
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_INCREASE_AUTONOMY
			influence = 5
			duration = 7300
		}
		event_target:agenda_province = {
			if = {
				limit = {owner = {high_tolerance_human_race_trigger = yes}}	
				apply_random_development_bonus_bonus_effect = yes
			}
			else = {
				get_tolerance_from_provinces = {race = human}
			}
		}
    }
    failing_effect = {
		event_target:agenda_province = {
			clear_random_development_bonus_flags_effect = yes
		}
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

# Tax building in 
estate_human_build_temple_in_x = {
	can_select = {
		adm_tech = 5
		NOT = {num_of_loans = 5 }
		any_owned_province = {
			has_human_majority_trigger = yes
			has_tax_building_trigger = no
			is_state_core = root
			NOT = { has_terrain = gladeway }
			NOT = { has_terrain = great_walls }
			NOT = { has_province_flag = estate_human_build_temple_in_flag }
		}
	}
	selection_weight = {
		factor = 10
		modifier = {factor = 1.5 years_of_income = 1.0}
	}
	pre_effect = {
		set_variable = {which = estate_human_build_temple_in_x_var value = 0}
		random_owned_province = {
			limit = {
				has_human_majority_trigger = yes
				has_tax_building_trigger = no
				is_state_core = root
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_temple_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
		random_owned_province = {
			limit = {
				has_human_majority_trigger = yes
				has_tax_building_trigger = no
				is_state_core = root
				base_tax = 4
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_temple_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
		random_owned_province = {
			limit = {
				has_human_majority_trigger = yes
				has_tax_building_trigger = no
				is_state_core = root
				base_tax = 7
				NOT = { has_terrain = gladeway }
				NOT = { has_terrain = great_walls }
				NOT = { has_province_flag = estate_human_build_temple_in_flag }
			}
			save_event_target_as = agenda_province
			save_event_target_as = agenda_province_human
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			OR = {
				NOT = { owned_by = root }
				NOT = { has_human_majority_trigger = yes}
			}
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			has_tax_building_trigger = yes
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_TAX_BUILDING
			influence = 5
			duration = 7300
		}
		event_target:agenda_province = {
			if = {
				limit = {owner = {high_tolerance_human_race_trigger = yes}}	
				add_base_tax = 1
				hidden_effect = {
					province_event = {id = bertus_pops.1040 }
					province_event = {id = bertus_pops.1042 }
					province_event = {id = bertus_pops.1049 }
					province_event = {id = bertus_pops.1050 }
				}
			}
			else = {
				get_tolerance_from_provinces = {race = human}
			}
			set_province_flag = estate_human_build_temple_in_flag
		}
		
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {name = local_humans_displeased value = 5}
			}
		}
		add_estate_loyalty_modifier = {
			estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}
    }
}

# Patrician familial relations
estate_human_familial_connections = {
	can_select = {
		high_tolerance_human_race_trigger = no
		any_known_country = {
			is_subject = no
			has_human_majority_trigger = yes
			has_opinion	= { who = ROOT value = -50}
			NOT = { has_opinion = { who = ROOT value = 50 } }
		}
	}
	selection_weight = {
		factor = 15
	}
	pre_effect = {
		random_known_country = {
			limit = {
				has_human_majority_trigger = yes
				has_opinion	= { who = ROOT value = -50}
				NOT = { has_opinion = { who = ROOT value = 50 } }
			}
			save_event_target_as = patrician_familial_connection_country
			every_owned_province = {save_event_target_as = agenda_province_human}
		}
	}
	provinces_to_highlight = {
		owned_by = event_target:patrician_familial_connection_country
	}
	task_requirements = {
		event_target:patrician_familial_connection_country = {
			has_opinion = { who = ROOT value = 100 }
		}
	}
	task_completed_effect = {
		small_increase_of_human_tolerance_effect = yes
		add_estate_loyalty = {estate = estate_human loyalty = 10}
	}
	fail_if = {
		event_target:patrician_familial_connection_country = {
			NOT = { num_of_cities = 1 }
		}
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}

# War with non human
estate_human_war_with_non_human = {
	can_select = {
		is_free_or_tributary_trigger = yes
		is_at_war = no
		has_estate_privilege = estate_human_intolerance_policy
		any_neighbor_country = {
			has_human_majority_trigger = no
			is_free_or_tributary_trigger = yes
			NOT = { is_subject_of = root }
			NOT = { overlord_of = root }
			NOT = { alliance_with = root }
			NOT = { ROOT = { truce_with = prev } }
			NOT = { has_opinion = {who = root value = 25}}
			ROOT = {knows_country = prev}
			AND = {
				is_part_of_hre = no
				NOT = { hre_reform_passed = landfriede }
				ROOT = { is_part_of_hre = no }
			}
		}
	}
	selection_weight = {
		factor = 30
		modifier = {factor = 2.0 manpower_percentage = 0.90 }
		modifier = {factor = 2.0 army_size_percentage = 0.90 }
	}
	pre_effect = {
		random_neighbor_country = {
			limit = {
				has_human_majority_trigger = no
				is_free_or_tributary_trigger = yes
				NOT = { is_subject_of = root }
				NOT = { overlord_of = root }
				NOT = { alliance_with = root }
				NOT = { ROOT = { truce_with = prev } }
				NOT = { has_opinion = {who = root value = 25}}
				ROOT = {knows_country = prev}
				AND = {
					is_part_of_hre = no
					NOT = { hre_reform_passed = landfriede }
					ROOT = { is_part_of_hre = no }
				}
			}
			every_owned_province = {save_event_target_as = agenda_province_human}
			save_event_target_as = agenda_country
			set_country_flag = agenda_target@ROOT
		}
	}
	provinces_to_highlight = {
		is_capital_of = event_target:agenda_country
	}
	task_requirements = {
		event_target:agenda_country = {
			war_with = ROOT
		}
	}
	fail_if = {
		event_target:agenda_country = {
			NOT = { num_of_cities = 1 }
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 20}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_WAR_WITH_NON_HUMAN
			influence = 10
			duration = 7300
		}
		add_country_modifier = {name = thriving_arms_industry_agenda duration = 1825}		
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
		}		
    }
}
#Dev Production in
estate_human_develop_production_x = {
	selection_weight = {
		factor = 10
		modifier = {factor = 1.5 is_at_war = no }
		modifier = {factor = 1.5 dip_power = 800 }
	}
	can_select = {
		any_owned_province = {
			is_state_core = root
			has_any_human_pop_trigger = yes
			NOT = { has_terrain = gladeway }
			NOT = { has_terrain = great_walls }
		}
	}
	pre_effect = {
		if = {
			limit = {				
				any_owned_province = {
					is_state_core = root
					has_human_majority_trigger = yes
					NOT = { has_terrain = gladeway }
					NOT = { has_terrain = great_walls }
				}
			}
			random_owned_province = {
				limit = {
					is_state_core = root
					has_human_majority_trigger = yes
					NOT = { has_terrain = gladeway }
					NOT = { has_terrain = great_walls }
				}
				save_event_target_as = agenda_province
				save_event_target_as = agenda_province_human
				set_variable = {which = province_development value = 0}
				export_to_variable = {which = province_development value = development}
				set_variable = {which = prestige_per_dev_tooltip value = 0}
				change_variable = {which = prestige_per_dev_tooltip value = 0.1}
			}
		}
		else = {
			random_owned_province = {
				limit = {
					is_state_core = root
					has_any_human_pop_trigger = yes
					NOT = { has_terrain = gladeway }
					NOT = { has_terrain = great_walls }
				}
				save_event_target_as = agenda_province
				save_event_target_as = agenda_province_human
				set_variable = {which = province_development value = 0}
				export_to_variable = {which = province_development value = development}
				set_variable = {which = prestige_per_dev_tooltip value = 0}
				change_variable = {which = prestige_per_dev_tooltip value = 0.1}
			}
		}
		event_target:agenda_province = {
			set_variable = {which = province_dip_var value = 0}
			export_to_variable = {which = province_dip_var value = trigger_value:base_production}
			change_variable = {which = province_dip_var value = 2}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			OR = {
				NOT = { owned_by = root }
				NOT = {has_any_human_pop_trigger = yes}
			}
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			base_production = "province_dip_var"
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_DEV_PRODUCTION
			influence = 5
			duration = 7300
		}
		event_target:agenda_province = {
			if = {
				limit = {owner = {high_tolerance_human_race_trigger = yes}}				
				gain_prestige_from_provinces = {prestige_per_dev = 0.1}
			}
			else = {
				get_tolerance_from_provinces = {race = human}
			}
		}
		
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_named_unrest = {name = local_burghers_displeased value = 5}
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}
#Dev Taxes in
estate_human_develop_tax_x = {
	selection_weight = {
		factor = 10
		modifier = {factor = 1.5 is_at_war = no }
		modifier = {factor = 1.5 adm_power = 800 }
	}
	can_select = {
		any_owned_province = {			
			is_state_core = root
			has_any_human_pop_trigger = yes
			NOT = { has_terrain = gladeway }
			NOT = { has_terrain = great_walls }
		}
	}
	pre_effect = {
		if = {
			limit = {				
				any_owned_province = {
					is_state_core = root
					has_human_majority_trigger = yes
					NOT = { has_terrain = gladeway }
					NOT = { has_terrain = great_walls }
				}
			}
			random_owned_province = {
				limit = {
					is_state_core = root
					has_human_majority_trigger = yes
					NOT = { has_terrain = gladeway }
					NOT = { has_terrain = great_walls }
				}
				save_event_target_as = agenda_province
				save_event_target_as = agenda_province_human
			}
		}
		else = {
			random_owned_province = {
				limit = {
					is_state_core = root
					has_any_human_pop_trigger = yes
					NOT = { has_terrain = gladeway }
					NOT = { has_terrain = great_walls }
				}
				save_event_target_as = agenda_province
				save_event_target_as = agenda_province_human
			}
		}
		event_target:agenda_province = {
			set_variable = {which = province_tax_var value = 0}
			export_to_variable = {which = province_tax_var value = trigger_value:base_tax}
			change_variable = {which = province_tax_var value = 2}
			set_variable = {which = prestige_per_dev_tooltip value = 0}
			change_variable = {which = prestige_per_dev_tooltip value = 0.1}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			OR = {
				NOT = { owned_by = root }
				NOT = {has_any_human_pop_trigger = yes}
			}
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			base_tax = "province_tax_var"
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_DEV_TAX
			influence = 5
			duration = 7300
		}
		event_target:agenda_province = {
			if = {
				limit = {owner = {high_tolerance_human_race_trigger = yes}}				
				gain_prestige_from_provinces = {prestige_per_dev = 0.1}
			}
			else = {
				get_tolerance_from_provinces = {race = human}
			}
		}
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_unrest = 5
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }		
    }
}
#Dev Manpower in
estate_human_develop_manpower_x = {
	selection_weight = {
		factor = 10
		modifier = {factor = 1.5 is_at_war = no }
		modifier = {factor = 1.5 mil_power = 800 }
	}
	can_select = {
		any_owned_province = {
			is_state_core = root
			has_any_human_pop_trigger = yes
			NOT = {has_province_modifier = non_military_pop}
			NOT = { has_terrain = gladeway }
			NOT = { has_terrain = great_walls }
		}
		has_race_recruitment = {
			race = human
		}
	}
	pre_effect = {
		if = {
			limit = {				
				any_owned_province = {
					is_state_core = root
					has_human_majority_trigger = yes
					NOT = {has_province_modifier = non_military_pop}
					NOT = { has_terrain = gladeway }
					NOT = { has_terrain = great_walls }
				}
			}
			random_owned_province = {
				limit = {
					is_state_core = root
					has_human_majority_trigger = yes
					NOT = {has_province_modifier = non_military_pop}
					NOT = { has_terrain = gladeway }
					NOT = { has_terrain = great_walls }
				}
				save_event_target_as = agenda_province
				save_event_target_as = agenda_province_human
				set_variable = {which = province_development value = 0}
				export_to_variable = {which = province_development value = development}
				set_variable = {which = prestige_per_dev_tooltip value = 0}
				change_variable = {which = prestige_per_dev_tooltip value = 0.2}
			}
		}
		else = {
			random_owned_province = {
				limit = {
					is_state_core = root
					has_any_human_pop_trigger = yes
					NOT = {has_province_modifier = non_military_pop}
					NOT = { has_terrain = gladeway }
					NOT = { has_terrain = great_walls }
				}
				save_event_target_as = agenda_province
				save_event_target_as = agenda_province_human
				set_variable = {which = province_development value = 0}
				export_to_variable = {which = province_development value = development}
				set_variable = {which = prestige_per_dev_tooltip value = 0}
				change_variable = {which = prestige_per_dev_tooltip value = 0.1}
			}
		}
		event_target:agenda_province = {
			set_variable = {which = province_manpower_var value = 0}
			export_to_variable = {which = province_manpower_var value = trigger_value:base_manpower}
			change_variable = {which = province_manpower_var value = 2}
		}
	}
	provinces_to_highlight = {
		province_id = event_target:agenda_province
	}
	fail_if = {
		event_target:agenda_province = {
			OR = {
				NOT = { owned_by = root }
				NOT = {has_any_human_pop_trigger = yes}
			}
		}
	}
    task_requirements = {
		event_target:agenda_province = {
			base_manpower = "province_manpower_var"
		}
    }
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_DEV_MANPOWER
			influence = 5
			duration = 7300
		}
		event_target:agenda_province = {
			if = {
				limit = {owner = {high_tolerance_human_race_trigger = yes}}				
				gain_prestige_from_provinces = {prestige_per_dev = 0.1}
			}
			else = {
				get_tolerance_from_provinces = {race = human}
			}
		}
		
    }
    failing_effect = {
		event_target:agenda_province = {
			if = {
				limit = { owned_by = root }
				add_unrest = 5
			}
		}
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}
#Manpower reserves
estate_human_build_up_manpower_reserves = {
	can_select = {
		NOT = { manpower_percentage = 0.40 }
		has_race_recruitment = { race = human }
		NOT = { any_owned_province = { has_construction = army } }
	}
	selection_weight = {
		factor = 10
		modifier = {factor = 1.7 NOT = { manpower_percentage = 0.35 }}
		modifier = {factor = 1.6 NOT = { manpower_percentage = 0.3 }}
		modifier = {factor = 1.5 NOT = { manpower_percentage = 0.25 }}
		modifier = {factor = 1.4 NOT = { manpower_percentage = 0.2 }}
		modifier = {factor = 1.3 NOT = { manpower_percentage = 0.15 }}
	}
	pre_effect = {
		set_variable = {which = estate_human_build_up_manpower_reserves_variable value = 0}
		if = {
			limit = {NOT = {manpower_percentage = 0.1}}
			set_variable = {which = estate_human_build_up_manpower_reserves_variable value = 1}
		}
		else_if = {
			limit = {NOT = {manpower_percentage = 0.25}}
			set_variable = {which = estate_human_build_up_manpower_reserves_variable value = 2}
		}
		else = {
			set_variable = {which = estate_human_build_up_manpower_reserves_variable value = 3}
		}
	}
	fail_if = {		
	}
	task_requirements = {
		if = {
			limit = {check_variable = {which = estate_human_build_up_manpower_reserves_variable value = 3}}
			manpower_percentage = 0.50
		}
		else_if = {
			limit = {check_variable = {which = estate_human_build_up_manpower_reserves_variable value = 2}}
			manpower_percentage = 0.40
		}
		else = {
			manpower_percentage = 0.25
		}
	}
	task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_yearly_manpower = 1
	}
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }
    }
}
# recruit race
estate_human_recruitment_agenda = {
	can_select = {
		high_tolerance_human_race_trigger = yes
		NOT = {has_race_recruitment = {race = human}}
		any_owned_province = {
			is_state_core = root
			has_human_majority_trigger = yes
		}
	}
	pre_effect = {
		every_owned_province = {
			limit = {has_human_majority_trigger = yes}
			set_variable = {which = manpower_per_dev_tooltip value = 0}
			change_variable = {which = manpower_per_dev_tooltip value = 0.1}
			set_variable = {which = manpower_per_dev_tooltip value = 0}
			change_variable = {which = manpower_per_dev_tooltip value = 100}
		}
	}
	selection_weight = {
		factor = 10
	}
	task_requirements = {
		has_race_recruitment = {race = human}
	}
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		custom_tooltip = estate_human_recruitment_agenda_tt
		hidden_effect = {
			every_owned_province = {
				limit = {has_human_majority_trigger = yes}	
				gain_manpower_from_provinces = {manpower_per_dev = 0.100}
			}
		}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_RECRUITMENT
			influence = 5
			duration = 7300
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }		
    }
}
# first chairman race
estate_human_first_chairman_agenda = {
	can_select = {
		high_tolerance_human_race_trigger = yes
		NOT = {has_estate_privilege = estate_human_first_hand_chairman}
		had_country_flag = { flag = first_chairman_interaction_cd days = 3650 }
	}
	pre_effect = {
	}
	selection_weight = {
		factor = 10
	}
	task_requirements = {
		has_estate_privilege = estate_human_first_hand_chairman
	}
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_adm_power = 50
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_CHAIRMAN
			influence = 5
			duration = 7300
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }		
    }
}
# diplo chairman race
estate_human_diplomacy_chairman_agenda = {
	can_select = {
		high_tolerance_human_race_trigger = yes
		NOT = {has_country_modifier = estate_human_diplomacy_chairman_modifier}
		had_country_flag = { flag = diplomacy_chairman_interaction_cd days = 3650 }
	}
	pre_effect = {
	}
	selection_weight = {
		factor = 10
	}
	task_requirements = {
		has_country_modifier = estate_human_diplomacy_chairman_modifier
	}
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_dip_power = 50
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_CHAIRMAN
			influence = 5
			duration = 7300
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }		
    }
}
# militar chairman race
estate_human_military_chairman_agenda = {
	can_select = {
		high_tolerance_human_race_trigger = yes
		NOT = {has_country_modifier = estate_human_military_chairman_modifier}
		had_country_flag = { flag = military_chairman_interaction_cd days = 3650 }
	}
	pre_effect = {
	}
	selection_weight = {
		factor = 10
	}
	task_requirements = {
		has_country_modifier = estate_human_military_chairman_modifier
	}
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_mil_power = 50
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_CHAIRMAN
			influence = 5
			duration = 7300
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }		
    }
}
# economic chairman race
estate_human_economic_chairman_agenda = {
	can_select = {
		high_tolerance_human_race_trigger = yes
		NOT = {has_country_modifier = estate_human_economic_chairman_modifier}
		had_country_flag = { flag = economic_chairman_interaction_cd days = 3650 }
	}
	pre_effect = {
	}
	selection_weight = {
		factor = 10
	}
	task_requirements = {
		has_country_modifier = estate_human_economic_chairman_modifier
	}
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_years_of_income = 0.5
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_CHAIRMAN
			influence = 5
			duration = 7300
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }		
    }
}
# navy chairman race
estate_human_navy_chairman_agenda = {
	can_select = {
		any_owned_province = { has_port = yes }
		high_tolerance_human_race_trigger = yes
		NOT = {has_country_modifier = estate_human_navy_chairman_modifier}
		had_country_flag = { flag = navy_chairman_interaction_cd days = 3650 }
	}
	pre_effect = {
	}
	selection_weight = {
		factor = 10
	}
	task_requirements = {
		has_country_modifier = estate_human_navy_chairman_modifier
	}
    task_completed_effect = {
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_dip_power = 50
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_CHAIRMAN
			influence = 5
			duration = 7300
		}
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }		
    }
}
# Increase stability
estate_human_increase_stability_agenda = {
	can_select = {
		high_tolerance_human_race_trigger = yes
		NOT = {stability = 1}
	}
	selection_weight = {
		factor = 50
		modifier = {factor = 2 NOT = {stability = -1}}
		modifier = {factor = 2 NOT = {stability = -2}}
	}
	pre_effect = {
		set_variable = {which = estate_human_increase_stability_var value = 0}
		if = {
			limit = {NOT = {stability = -3}}
			set_variable = {which = estate_human_increase_stability_var value = 1}
		}
		else_if = {
			limit = {NOT = {stability = -2}}
			set_variable = {which = estate_human_increase_stability_var value = 2}
		}
		else = {
			set_variable = {which = estate_human_increase_stability_var value = 3}
		}
	}
	task_requirements = {
		stability = 1
	}
    task_completed_effect = {
		if = {
			limit = {check_variable = {which = estate_human_increase_stability_var value = 1}}
			add_adm_power = 150
		}
		else_if = {
			limit = {check_variable = {which = estate_human_increase_stability_var value = 2}}
			add_adm_power = 100
		}
		else = {
			add_adm_power = 50
		}
		add_estate_loyalty = {estate = estate_human loyalty = 10}
		add_estate_influence_modifier = {
			estate = estate_human
			desc = EST_VAL_DIET_INCREASE_STABILITY
			influence = 5
			duration = 7300
		}		
    }
    failing_effect = {
        add_estate_loyalty_modifier = {
            estate = estate_human
			desc = EST_VAL_AGENDA_DENIED
			loyalty = -5
			duration = 7300
        }		
    }
}