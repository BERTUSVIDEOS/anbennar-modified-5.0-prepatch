
give_talented_in_3_other = {
	# Then gives talented in three others
	random_list = {
		1 = { trigger = { NOT = { has_ruler_flag = abjuration_3 } NOT = { has_ruler_flag = abjuration_2 } } set_ruler_flag = abjuration_1 }
		1 = { trigger = { NOT = { has_ruler_flag = transmutation_3 } NOT = { has_ruler_flag = transmutation_2 } } set_ruler_flag = transmutation_1 }
		1 = { trigger = { NOT = { has_ruler_flag = divination_3 } NOT = { has_ruler_flag = divination_2 } } set_ruler_flag = divination_1 }
		1 = { trigger = { NOT = { has_ruler_flag = evocation_3 } NOT = { has_ruler_flag = evocation_2 } } set_ruler_flag = evocation_1 }
		1 = { trigger = { NOT = { has_ruler_flag = conjuration_3 } NOT = { has_ruler_flag = conjuration_2 } } set_ruler_flag = conjuration_1 }
		1 = { trigger = { NOT = { has_ruler_flag = enchantment_3 } NOT = { has_ruler_flag = enchantment_2 } } set_ruler_flag = enchantment_1 }
		1 = { trigger = { NOT = { has_ruler_flag = illusion_3 } NOT = { has_ruler_flag = illusion_2 } } set_ruler_flag = illusion_1 }
		1 = { trigger = { NOT = { has_ruler_flag = necromancy_3 } NOT = { has_ruler_flag = necromancy_2 } } set_ruler_flag = necromancy_1 }
	}
	random_list = {
		1 = { trigger = { NOT = { has_ruler_flag = abjuration_3 } NOT = { has_ruler_flag = abjuration_2 } } set_ruler_flag = abjuration_1 }
		1 = { trigger = { NOT = { has_ruler_flag = transmutation_3 } NOT = { has_ruler_flag = transmutation_2 } } set_ruler_flag = transmutation_1 }
		1 = { trigger = { NOT = { has_ruler_flag = divination_3 } NOT = { has_ruler_flag = divination_2 } } set_ruler_flag = divination_1 }
		1 = { trigger = { NOT = { has_ruler_flag = evocation_3 } NOT = { has_ruler_flag = evocation_2 } } set_ruler_flag = evocation_1 }
		1 = { trigger = { NOT = { has_ruler_flag = conjuration_3 } NOT = { has_ruler_flag = conjuration_2 } } set_ruler_flag = conjuration_1 }
		1 = { trigger = { NOT = { has_ruler_flag = enchantment_3 } NOT = { has_ruler_flag = enchantment_2 } } set_ruler_flag = enchantment_1 }
		1 = { trigger = { NOT = { has_ruler_flag = illusion_3 } NOT = { has_ruler_flag = illusion_2 } } set_ruler_flag = illusion_1 }
		1 = { trigger = { NOT = { has_ruler_flag = necromancy_3 } NOT = { has_ruler_flag = necromancy_2 } } set_ruler_flag = necromancy_1 }
	}
	random_list = {
		1 = { trigger = { NOT = { has_ruler_flag = abjuration_3 } NOT = { has_ruler_flag = abjuration_2 } } set_ruler_flag = abjuration_1 }
		1 = { trigger = { NOT = { has_ruler_flag = transmutation_3 } NOT = { has_ruler_flag = transmutation_2 } } set_ruler_flag = transmutation_1 }
		1 = { trigger = { NOT = { has_ruler_flag = divination_3 } NOT = { has_ruler_flag = divination_2 } } set_ruler_flag = divination_1 }
		1 = { trigger = { NOT = { has_ruler_flag = evocation_3 } NOT = { has_ruler_flag = evocation_2 } } set_ruler_flag = evocation_1 }
		1 = { trigger = { NOT = { has_ruler_flag = conjuration_3 } NOT = { has_ruler_flag = conjuration_2 } } set_ruler_flag = conjuration_1 }
		1 = { trigger = { NOT = { has_ruler_flag = enchantment_3 } NOT = { has_ruler_flag = enchantment_2 } } set_ruler_flag = enchantment_1 }
		1 = { trigger = { NOT = { has_ruler_flag = illusion_3 } NOT = { has_ruler_flag = illusion_2 } } set_ruler_flag = illusion_1 }
		1 = { trigger = { NOT = { has_ruler_flag = necromancy_3 } NOT = { has_ruler_flag = necromancy_2 } } set_ruler_flag = necromancy_1 }
	}
}
buy_slaves_effect = {
	add_government_power = {
		mechanic_type = enslavement_mechanic
		power_type = slaves_amount
		value = 10
	}
	hidden_effect = {
		set_variable = {
			which = slave_value_var
			value = 1
		}
		multiply_variable = {
			which = slave_value_var
			which = global_slave_cost_var
		}
		multiply_variable = {
			which = slave_value_var
			value = 1.1
		}
		while = {
			limit = {
				check_variable = {
					which = slave_value_var
					value = 0.1
				}
			}
			change_variable = {
				which = slave_value_var
				value = -0.1
			}
			add_treasury = -1
		}
		increase_slave_cost = yes
	}
}
sell_slaves_effect = {
	add_government_power = {
		mechanic_type = enslavement_mechanic
		power_type = slaves_amount
		value = -10
	}
	hidden_effect = {
		set_variable = {
			which = slave_value_var
			value = 1
		}
		multiply_variable = {
			which = slave_value_var
			which = global_slave_cost_var
		}
		multiply_variable = {
			which = slave_value_var
			value = 0.9
		}
		while = {
			limit = {
				check_variable = {
					which = slave_value_var
					value = 0.1
				}
			}
			change_variable = {
				which = slave_value_var
				value = -0.1
			}
			add_treasury = 1
		}
		decrease_slave_cost = yes
	}
}
decrease_slave_cost = {
	every_country = {
		limit = {ai = no}
		multiply_variable = {
			which = global_slave_cost_var
			value = 0.95
		}
		if = {
			limit = {
				NOT = {
					check_variable = {
						which = global_slave_cost_var
						value = 10.0
					}
				}
			}
			set_variable = {
				which = global_slave_cost_var
				value = 10.0
			}
		}
	}
}
increase_slave_cost = {
	every_country = {
		limit = {ai = no}
		multiply_variable = {
			which = global_slave_cost_var
			value = 1.05
		}
	}
	if = {
		limit = {
			any_country = {
				NOT = {
					check_variable = {
						which = global_slave_cost_var
						which = ROOT
					}
				}
			}
		}
		random_country = {
			limit = {
				NOT = {
					check_variable = {
						which = global_slave_cost_var
						which = ROOT
					}
				}
			}
			change_variable = {
				which = global_slave_cost_var
				which = ROOT
			}
		}
	}
}
get_slaves = {
	controller = {
		set_variable = {
			which = province_development
			value = 0
		}
		export_to_variable = {
			which = province_development
			value = development
			who = ROOT
		}
		multiply_variable = {
			which = province_development
			which = enslavement_efficiency_var
		}
		divide_variable = {
			which = province_development
			value = 50
		}
		while = {
			limit = {
				check_variable = {
					which = province_development
					value = 0.01
				}
			}
			change_variable = {
				which = province_development
				value = -0.01
			}
			add_government_power = {
				mechanic_type = enslavement_mechanic
				power_type = slaves_amount
				value = 0.01
			}
		}
	}
}
increase_dominion_wars_tension = {
	custom_tooltip = increase_dominio_wars_tension_$amount$_tt
	hidden_effect = {
		A13 = {change_variable = {which = dominion_wars_progress value = $amount$}}
	}
}
increase_dominion_wars_power = {
	custom_tooltip = increase_target_power_tt
	hidden_effect = {
		change_variable = {which = dominion_wars_power value = $amount$}
	}
}
increase_dominion_wars_support = {
	if = {limit = {FROM = {tag = A13}}
	custom_tooltip = increase_gawed_support_tt
		hidden_effect = {
			change_variable = {which = dominion_wars_support_gawed value = $amount$}
		}
	}
	if = {limit = {FROM = {tag = A01}}
	custom_tooltip = increase_lorent_support_tt
		hidden_effect = {
			change_variable = {which = dominion_wars_support_lorent value = $amount$}
		}
	}
}
get_wars_of_dominion_bonus = {
	while = {
		limit = {check_variable = {which = dominion_wars_power value = 1}}
		change_variable = {which = dominion_wars_power value = -1}
		add_yearly_manpower = 0.1
		add_years_of_income = 0.1
	}
}
get_random_racial_adm_advisor = {
	random_list = {
		10 = {define_advisor = { skill = 3 type = treasurer cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = philosopher cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = artist cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = theologian cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = master_of_mint cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = inquisitor cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = natural_scientist cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = court_mage cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_1 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_3 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_4 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_6 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_8 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_9 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_20 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_30 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_31 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_32 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
	}
}
get_random_racial_dip_advisor = {
	random_list = {
		10 = {define_advisor = { skill = 3 type = statesman cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = naval_reformer cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = trader cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = spymaster cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = colonial_governor cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = diplomat cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = navigator cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = runic_priest cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_2 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_7 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_10 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_19 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_21 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_22 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_23 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_24 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_25 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_26 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_27 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
	}
}
get_random_racial_mil_advisor = {
	random_list = {
		10 = {define_advisor = { skill = 3 type = army_reformer cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = army_organiser cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = commandant cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = quartermaster cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = recruitmaster cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = fortification_expert cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = grand_captain cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = war_master cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_5 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_11 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_12 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_13 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_14 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_15 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_16 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_17 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_18 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_28 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
		10 = {define_advisor = { skill = 3 type = idea_var_advisor_29 cost_multiplier = $cost_multiplier$  culture = PREV religion = PREV}}
	}
}
get_random_cost_dependant_racial_advisor = {
	if = {	#50% long lived elven
		limit = {culture_is_elven = yes}
		event_target:country_elder_advisor_target = {get_random_racial_$class$_advisor = {cost_multiplier = 0.50}}
	}
	else_if = {	#60% long lived gnomish
		limit = {culture_is_gnomish = yes}
		event_target:country_elder_advisor_target = {get_random_racial_$class$_advisor = {cost_multiplier = 0.60}}
	}
	else_if = {	#66% long lived dwarven 
		limit = {
			OR = {
				culture_is_dwarven = yes
				culture_is_half_elven = yes
			}
		}
		event_target:country_elder_advisor_target = {get_random_racial_$class$_advisor = {cost_multiplier = 0.66}}
	}
	else_if = {	#70%	standar+
		limit = {
			OR = {
				culture_is_halfling = yes
				culture_is_harimari = yes
				culture_is_kobold = yes
			}
		}
		event_target:country_elder_advisor_target = {get_random_racial_$class$_advisor = {cost_multiplier = 0.70}}
	}
	else_if = {	#90% short lived
		limit = {
			OR = {
				culture_is_goblin = yes
				culture_is_gnollish = yes
			}
		}
		event_target:country_elder_advisor_target = {get_random_racial_$class$_advisor = {cost_multiplier = 0.90}}
	}
	else = {	#80%	standar
		event_target:country_elder_advisor_target = {get_random_racial_$class$_advisor = {cost_multiplier = 0.80}}
	}
}

get_racial_advisor = {
	if = {
		limit = {event_target:province_event_target = {culture_is_elven = yes}}
		custom_tooltip = get_elven_advisor_tt
	}
	else_if = {
		limit = {event_target:province_event_target = {culture_is_dwarven = yes}}
		custom_tooltip = get_dwarven_advisor_tt
	}
	else_if = {
		limit = {event_target:province_event_target = {culture_is_gnomish = yes}}
		custom_tooltip = get_gnomish_advisor_tt
	}
	else = {
		custom_tooltip = "Get Discounted Advisor"
	}
	hidden_effect = {
		event_target:province_event_target = {
			get_random_cost_dependant_racial_advisor = {class = $class$}
		}
	}
}
magic_siege_defence = {
	if = {
		limit = {has_ward_province_modifiers = yes}
		province_event = {id = bertus_changes.1106}	#magic defence
	}
}
slave_ruler_race_selection = {
	random_list = {
		10 = {	
			trigger = {	has_saved_event_target = human_ruler_alternative_province	NOT = { has_ruler_flag = human_ruler_flag}	}
			set_ruler_flag = human_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = elven_ruler_alternative_province	NOT = { has_ruler_flag = elven_ruler_flag}	}
			set_ruler_flag = elven_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = dwarven_ruler_alternative_province	NOT = { has_ruler_flag = dwarven_ruler_flag}	}
			set_ruler_flag = dwarven_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = halfling_ruler_alternative_province	NOT = { has_ruler_flag = halfling_ruler_flag}	}
			set_ruler_flag = halfling_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = gnomish_ruler_alternative_province	NOT = { has_ruler_flag = gnomish_ruler_flag}	}
			set_ruler_flag = gnomish_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = harimari_ruler_alternative_province	NOT = { has_ruler_flag = harimari_ruler_flag}	}
			set_ruler_flag = harimari_ruler_flag	}
		10 = {	
			trigger = {	has_saved_event_target = gnollish_ruler_alternative_province	NOT = { has_ruler_flag = gnollish_ruler_flag}	}
			set_ruler_flag = gnollish_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = ruinborn_ruler_alternative_province	NOT = { has_ruler_flag = ruinborn_ruler_flag}	}
			set_ruler_flag = ruinborn_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = goblin_ruler_alternative_province	NOT = { has_ruler_flag = goblin_ruler_flag}	}
			set_ruler_flag = goblin_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = orcish_ruler_alternative_province	NOT = { has_ruler_flag = orcish_ruler_flag}	}
			set_ruler_flag = orcish_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = ogre_ruler_alternative_province	NOT = { has_ruler_flag = ogre_ruler_flag}	}
			set_ruler_flag = ogre_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = centaur_ruler_alternative_province	NOT = { has_ruler_flag = centaur_ruler_flag}	}
			set_ruler_flag = centaur_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = harpy_ruler_alternative_province	NOT = { has_ruler_flag = harpy_ruler_flag}	}
			set_ruler_flag = harpy_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = troll_ruler_alternative_province	NOT = { has_ruler_flag = troll_ruler_flag}	}
			set_ruler_flag = troll_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = half_orcish_ruler_alternative_province	NOT = { has_ruler_flag = half_orcish_ruler_flag}	}
			set_ruler_flag = half_orcish_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = half_elven_ruler_alternative_province	NOT = { has_ruler_flag = half_elven_ruler_flag}	}
			set_ruler_flag = half_elven_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = hobgoblin_ruler_alternative_province	NOT = { has_ruler_flag = hobgoblin_ruler_flag}	}
			set_ruler_flag = hobgoblin_ruler_flag	
		}
		10 = {	
			trigger = {	has_saved_event_target = kobold_ruler_alternative_province	NOT = { has_ruler_flag = kobold_ruler_flag}	}
			set_ruler_flag = kobold_ruler_flag	
		}
	}
}
colonize_next_level_effect = {
	province_event = { id = bertus_changes.1102}
}
reduce_incompleted_hold_level = {
	if = {
		limit = {has_province_modifier = incomplete_hold_4}
		remove_province_modifier = incomplete_hold_4
	}
	else_if = {
		limit = {has_province_modifier = incomplete_hold_3}
		remove_province_modifier = incomplete_hold_3
		add_permanent_province_modifier = {name = incomplete_hold_4 duration = -1}
	}
	else_if = {
		limit = {has_province_modifier = incomplete_hold_2}
		remove_province_modifier = incomplete_hold_2 
		add_permanent_province_modifier = {name = incomplete_hold_3 duration = -1}
	}
	else_if = {
		limit = {has_province_modifier = incomplete_hold_1}
		remove_province_modifier = incomplete_hold_1 
		add_permanent_province_modifier = {name = incomplete_hold_2 duration = -1}
	}
	else = {
		remove_province_modifier = incomplete_hold 
		add_permanent_province_modifier = {name = incomplete_hold_1 duration = -1}	
	}
}
beepeck_stacking_effect = {
	if = {
		limit = {has_province_modifier = beepeck_house_stacking_$type$_9}
		remove_province_modifier = beepeck_house_stacking_$type$_9 
		add_permanent_province_modifier = {name = beepeck_house_stacking_$type$_10 duration = -1}
	}
	else_if = {
		limit = {has_province_modifier = beepeck_house_stacking_$type$_8}
		remove_province_modifier = beepeck_house_stacking_$type$_8 
		add_permanent_province_modifier = {name = beepeck_house_stacking_$type$_9 duration = -1}
	}
	else_if = {
		limit = {has_province_modifier = beepeck_house_stacking_$type$_7}
		remove_province_modifier = beepeck_house_stacking_$type$_7 
		add_permanent_province_modifier = {name = beepeck_house_stacking_$type$_8 duration = -1}
	}
	else_if = {
		limit = {has_province_modifier = beepeck_house_stacking_$type$_6}
		remove_province_modifier = beepeck_house_stacking_$type$_6
		add_permanent_province_modifier = {name = beepeck_house_stacking_$type$_7 duration = -1}
	}
	else_if = {
		limit = {has_province_modifier = beepeck_house_stacking_$type$_5}
		remove_province_modifier = beepeck_house_stacking_$type$_5
		add_permanent_province_modifier = {name = beepeck_house_stacking_$type$_6 duration = -1}
	}
	else_if = {
		limit = {has_province_modifier = beepeck_house_stacking_$type$_4}
		remove_province_modifier = beepeck_house_stacking_$type$_4 
		add_permanent_province_modifier = {name = beepeck_house_stacking_$type$_5 duration = -1}
	}
	else_if = {
		limit = {has_province_modifier = beepeck_house_stacking_$type$_3}
		remove_province_modifier = beepeck_house_stacking_$type$_3
		add_permanent_province_modifier = {name = beepeck_house_stacking_$type$_4 duration = -1}
	}
	else_if = {
		limit = {has_province_modifier = beepeck_house_stacking_$type$_2}
		remove_province_modifier = beepeck_house_stacking_$type$_2 
		add_permanent_province_modifier = {name = beepeck_house_stacking_$type$_3 duration = -1}
	}
	else_if = {
		limit = {has_province_modifier = beepeck_house_stacking_$type$_1}
		remove_province_modifier = beepeck_house_stacking_$type$_1 
		add_permanent_province_modifier = {name = beepeck_house_stacking_$type$_2 duration = -1}
	}
	else = {
		add_permanent_province_modifier = {name = beepeck_house_stacking_$type$_1 duration = -1}
	}
}
small_increase_of_all_tolerance_in_hre_effect = {
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_human = yes}}
		small_increase_of_human_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_elven = yes}}
		small_increase_of_elven_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_dwarven = yes}}
		small_increase_of_dwarven_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_halfling = yes}}
		small_increase_of_halfling_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_gnomish = yes}}
		small_increase_of_gnomish_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_harimari = yes}}
		small_increase_of_harimari_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_gnollish = yes}}
		small_increase_of_gnollish_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_ruinborn = yes}}
		small_increase_of_ruinborn_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_orcish = yes}}
		small_increase_of_orcish_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_goblin = yes}}
		small_increase_of_goblin_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_ogre = yes}}
		small_increase_of_ogre_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_centaur = yes}}
		small_increase_of_centaur_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_troll = yes}}
		small_increase_of_troll_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_harpy = yes}}
		small_increase_of_harpy_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_half_orcish = yes}}
		small_increase_of_half_orcish_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_half_elven = yes}}
		small_increase_of_half_elven_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_hobgoblin = yes}}
		small_increase_of_hobgoblin_tolerance_effect = yes
	}
	if = {
		limit = {any_country = {is_part_of_hre = yes culture_is_kobold = yes}}
		small_increase_of_kobold_tolerance_effect = yes
	}
}
small_increase_of_all_tolerance_effect = {
	small_increase_of_human_tolerance_effect = yes
	small_increase_of_elven_tolerance_effect = yes
	small_increase_of_dwarven_tolerance_effect = yes
	small_increase_of_halfling_tolerance_effect = yes
	small_increase_of_gnomish_tolerance_effect = yes
	small_increase_of_harimari_tolerance_effect = yes
	small_increase_of_gnollish_tolerance_effect = yes
	small_increase_of_ruinborn_tolerance_effect = yes
	small_increase_of_orcish_tolerance_effect = yes
	small_increase_of_goblin_tolerance_effect = yes
	small_increase_of_ogre_tolerance_effect = yes
	small_increase_of_centaur_tolerance_effect = yes
	small_increase_of_troll_tolerance_effect = yes
	small_increase_of_harpy_tolerance_effect = yes
	small_increase_of_half_orcish_tolerance_effect = yes
	small_increase_of_half_elven_tolerance_effect = yes
	small_increase_of_hobgoblin_tolerance_effect = yes
	small_increase_of_kobold_tolerance_effect = yes
}
add_expulsion_unrest = {
	every_owned_province = {
		limit = { has_small_$race$_minority_trigger = yes }
		add_unrest = 2
	}
	every_owned_province = {
		limit = { has_large_$race$_minority_trigger = yes }
		add_unrest = 5
	}
	every_owned_province = {
		limit = { culture_is_$race$ = yes }
		add_unrest = 10
	}
}
add_purguing_unrest = {
	every_owned_province = {
		limit = { has_small_$race$_minority_trigger = yes }
		add_unrest = 5
	}
	every_owned_province = {
		limit = { has_large_$race$_minority_trigger = yes }
		add_unrest = 7
	}
	every_owned_province = {
		limit = { culture_is_$race$ = yes }
		add_unrest = 15
	}
}
remove_racial_superiority_modifier = {
	if = {
		limit = {has_province_modifier = racial_superiority}
		remove_province_modifier = racial_superiority
	}
	if = {
		limit = {has_province_modifier = inferior_race}
		remove_province_modifier = inferior_race
	}
}
add_racial_superiority_modifier = {
	if = {
		limit = {
			OR = {
				culture_is_$race$ = yes
				[[multiple_races]
					culture_is_$race2$ = yes
					culture_is_$race3$ = yes
				]
			}
			has_owner_accepted_culture = yes
		}
		add_province_modifier = {name = racial_superiority duration = -1}
	}
	else_if = {
		limit = {has_province_modifier = racial_superiority}
		remove_province_modifier = racial_superiority
	}
	if = {
		limit = {
			culture_is_$race$ = no 
			[[multiple_races]
				culture_is_$race2$ = no 
				culture_is_$race3$ = no
			]
		}
		add_province_modifier = {name = inferior_race duration = -1}
	}
	else_if = {
		limit = {has_province_modifier = inferior_race}
		remove_province_modifier = inferior_race
	}
}
remove_racial_culture = {
	small_decrease_of_$race$_tolerance_effect = yes
	if = {
		limit = {
			any_owned_province = {					
				culture_is_$race$ = yes
				owner = {accepted_culture = PREV}
			}
		}
		custom_tooltip = remove_$race$_culture_tooltip
		every_owned_province = {
			limit = {
				culture_is_$race$ = yes
				owner = {accepted_culture = PREV}
			}
			owner = {remove_accepted_culture = PREV}
		}
	}
}
block_area_effect = {
	set_province_flag = cant_colonize_bertus_flag
}
colonization_malus = {
	add_permanent_province_modifier = {name = colonizating_malus duration = -1}
	add_permanent_province_modifier = {name = colonizating_malus_2 duration = 74874}
	add_permanent_province_modifier = {name = colonizating_malus_3 duration = 38374}
}
reset_development_bertus = {
	change_religion = ---
	change_culture = ---
	add_base_tax = -100
	add_base_production = -100
	add_base_manpower = -100
}
reset_natives_colonizable_province = {
	random_list = {
		20 = {change_native_size = 5}
		40 = {change_native_size = 10}
		60 = {change_native_size = 20}
		80 = {change_native_size = 30}
		100 = {change_native_size = 40}
		100 = {change_native_size = 50}
		80 = {change_native_size = 60}
		60 = {change_native_size = 70}
		40 = {change_native_size = 80}
		20 = {change_native_size = 90}
		10 = {change_native_size = 100}
		6 = {change_native_size = 110}
		5 = {change_native_size = 120}
		4 = {change_native_size = 130}
		3 = {change_native_size = 140}
		2 = {change_native_size = 150}
		1 = {change_native_size = 160}
		1 = {change_native_size = 170}
		1 = {change_native_size = 180}
		1 = {change_native_size = 190}
		1 = {change_native_size = 200}
	}
}
reset_native_ferocity_colonizable_province = {
	random_list = {
		10 = {change_native_ferocity = 0.1}
		10 = {change_native_ferocity = 0.2}
		10 = {change_native_ferocity = 0.3}
		40 = {change_native_ferocity = 0.4}
		30 = {change_native_ferocity = 0.5}
		20 = {change_native_ferocity = 0.6}
		10 = {change_native_ferocity = 0.7}
		3 = {change_native_ferocity = 0.8}
		2 = {change_native_ferocity = 0.9}
		1 = {change_native_ferocity = 1.0}
	}
}
reset_native_hostileness_colonizable_province = {
	random_list = {
		10 = {change_native_hostileness = 0.1}
		10 = {change_native_hostileness = 0.2}
		20 = {change_native_hostileness = 0.3}
		40 = {change_native_hostileness = 0.4}
		50 = {change_native_hostileness = 0.5}
		40 = {change_native_hostileness = 0.6}
		20 = {change_native_hostileness = 0.7}
		10 = {change_native_hostileness = 0.8}
		5 = {change_native_hostileness = 0.9}
		1 = {change_native_hostileness = 1}
	}
}
boost_ruler_general = {
	if = {
		limit = {
			has_leader_with = {total_pips = 14}
			OR = {NOT = {adm = 1} NOT = {dip = 1} NOT = {mil = 1}}
		}
		if = {
			limit = {NOT = {adm = 1}}
			change_adm = 1
		}
		if = {
			limit = {NOT = {dip = 1}}
			change_dip = 1
		}
		if = {
			limit = {NOT = {mil = 1}}
			change_mil = 1
		}
	}
	if = {
		limit = {
			has_leader_with = {total_pips = 16}
			OR = {NOT = {adm = 2} NOT = {dip = 2} NOT = {mil = 2}}
		}
		if = {
			limit = {NOT = {adm = 2}}
			change_adm = 1
		}
		if = {
			limit = {NOT = {dip = 2}}
			change_dip = 1
		}
		if = {
			limit = {NOT = {mil = 2}}
			change_mil = 1
		}
	}
	if = {
		limit = {
			has_leader_with = {total_pips = 18}
			OR = {NOT = {adm = 3} NOT = {dip = 3} NOT = {mil = 3}}
		}
		if = {
			limit = {NOT = {adm = 3}}
			change_adm = 1
		}
		if = {
			limit = {NOT = {dip = 3}}
			change_dip = 1
		}
		if = {
			limit = {NOT = {mil = 3}}
			change_mil = 1
		}
	}
	if = {
		limit = {
			has_leader_with = {total_pips = 20}
			OR = {NOT = {adm = 4} NOT = {dip = 4} NOT = {mil = 4}}
		}
		if = {
			limit = {NOT = {adm = 4}}
			change_adm = 1
		}
		if = {
			limit = {NOT = {dip = 4}}
			change_dip = 1
		}
		if = {
			limit = {NOT = {mil = 4}}
			change_mil = 1
		}
	}
	if = {
		limit = {
			has_leader_with = {total_pips = 22}
			OR = {NOT = {adm = 5} NOT = {dip = 5} NOT = {mil = 5}}
		}
		if = {
			limit = {NOT = {adm = 5}}
			change_adm = 1
		}
		if = {
			limit = {NOT = {dip = 5}}
			change_dip = 1
		}
		if = {
			limit = {NOT = {mil = 5}}
			change_mil = 1
		}
	}
}
increase_imperial_centralization = {
	if = {limit = {has_global_flag = imperial_centralization_9_flag } set_global_flag = imperial_centralization_10_flag}
	else_if = {limit = {has_global_flag = imperial_centralization_8_flag} set_global_flag = imperial_centralization_9_flag}
	else_if = {limit = {has_global_flag = imperial_centralization_7_flag} set_global_flag = imperial_centralization_8_flag}
	else_if = {limit = {has_global_flag = imperial_centralization_6_flag} set_global_flag = imperial_centralization_7_flag}
	else_if = {limit = {has_global_flag = imperial_centralization_5_flag} set_global_flag = imperial_centralization_6_flag}
	else_if = {limit = {has_global_flag = imperial_centralization_4_flag} set_global_flag = imperial_centralization_5_flag}
	else_if = {limit = {has_global_flag = imperial_centralization_3_flag} set_global_flag = imperial_centralization_4_flag}
	else_if = {limit = {has_global_flag = imperial_centralization_2_flag} set_global_flag = imperial_centralization_3_flag}
	else_if = {limit = {has_global_flag = imperial_centralization_1_flag} set_global_flag = imperial_centralization_2_flag}
	else = {set_global_flag = imperial_centralization_1_flag}
}
get_manpower_fraction = {
	FROM = {
		set_variable = {
			which = current_manpower
			value = 0
		}
		set_variable = {
			which = manpower_to_transfer
			value = 1
		}
		subtract_variable = {
			which = manpower_to_transfer
			value = $fraction$
		}
		export_to_variable = {
			which = current_manpower
			value = manpower
		}
		multiply_variable = {
			which = manpower_to_transfer
			which = current_manpower
		}
		while = {
			limit = {
				check_variable = {
					which = current_manpower
					which = manpower_to_transfer
				}
			}
			subtract_variable = {
				which = current_manpower
				value = 1
			}
			add_manpower = -1
			ROOT = {add_manpower = 1}
		}
	}
}
get_treasury_fraction = {
	FROM = {
		set_variable = {
			which = current_treasury
			value = 0
		}
		set_variable = {
			which = treasury_to_transfer
			value = 1
		}
		subtract_variable = {
			which = treasury_to_transfer
			value = $fraction$
		}
		export_to_variable = {
			which = current_treasury
			value = treasury
		}
		multiply_variable = {
			which = treasury_to_transfer
			which = current_treasury
		}
		while = {
			limit = {
				check_variable = {
					which = current_treasury
					which = treasury_to_transfer
				}
			}
			subtract_variable = {
				which = current_treasury
				value = 1
			}
			add_treasury = -1
			ROOT = {add_treasury = 1}
		}
	}
}
increase_isolationism = {
	add_isolationism = $value$
	get_isolationsim_bonus = yes
}
decrease_isolationism = {
	add_isolationism = -$value$
	get_isolationsim_bonus = yes
}
get_isolationsim_bonus = {
	if = {
		limit = {
			isolationism = 0
			NOT = {isolationism = 1}
		}
		add_years_of_income = 1
	}
	else_if = {
		limit = {
			isolationism = 1
			NOT = {isolationism = 2}
		}
		country_event = {
			id = bertus_changes.1011
		}
	}
	else_if = {
		limit = {
			isolationism = 2
			NOT = {isolationism = 3}
		}
		set_country_flag = get_adventurer_flag
		custom_tooltip = get_great_hero_general_tt
		hidden_effect = {
			set_saved_name = {key = special_general_name type = advisor scope = ROOT}
			country_event = {id = bertus_changes.6030}
		}
	}
	else_if = {
		limit = {
			isolationism = 3
			NOT = {isolationism = 4}
		}
		add_yearly_manpower = 5
	}
	else_if = {
		limit = {
			isolationism = 4
			NOT = {isolationism = 5}
		}
		random_list = {
			33 = {
				modifier = {factor = 0 adm = 6}
				change_adm = 1
			}
			33 = {
				modifier = {factor = 0 dip = 6}
				change_dip = 1
			}
			33 = {
				modifier = {factor = 0 mil = 6}
				change_mil = 1
			}
		}
	}
}
kobold_celebrate_effect = {
	if = {	#red
		limit = {has_dragon_aspect = {color = red amount = 3}}
		add_yearly_manpower = 2
	}
	else_if = {	#red
		limit = {has_dragon_aspect = {color = red amount = 2}}
		add_yearly_manpower = 1
	}
	else_if = {	#red
		limit = {has_dragon_aspect = {color = red amount = 1}}
		add_yearly_manpower = 0.5
	}
	if = {	#blue
		limit = {has_dragon_aspect = {color = blue amount = 3}}
		add_yearly_sailors = 2
	}
	else_if = {	#blue
		limit = {has_dragon_aspect = {color = blue amount = 2}}
		add_yearly_sailors = 1
	}
	else_if = {	#blue
		limit = {has_dragon_aspect = {color = blue amount = 1}}
		add_yearly_sailors = 0.5
	}
	if = {	#green
		limit = {has_dragon_aspect = {color = green amount = 3}}
		add_prestige_or_monarch_power = {amount =  40}
	}
	else_if = {	#green
		limit = {has_dragon_aspect = {color = green amount = 2}}
		add_prestige_or_monarch_power = {amount =  20}
	}
	else_if = {	#green
		limit = {has_dragon_aspect = {color = green amount = 1}}
		add_prestige_or_monarch_power = {amount =  10}
	}
	if = {	#black
		limit = {has_dragon_aspect = {color = black amount = 3}}
		set_country_flag = get_mage_flag
		custom_tooltip = get_great_hero_general_tt
		hidden_effect = {
			set_saved_name = {key = special_general_name type = advisor scope = ROOT}
			country_event = {id = bertus_changes.6030}
		}
	}
	else_if = {	#black
		limit = {has_dragon_aspect = {color = black amount = 2}}
		create_general = { tradition = 100 }
	}
	else_if = {	#black
		limit = {has_dragon_aspect = {color = black amount = 1}}
		create_general = { tradition = 60 }
	}
	if = {	#white
		limit = {has_dragon_aspect = {color = white amount = 3}}
		set_country_flag = get_elder_advisor_flag
		set_country_flag = elder_adm_advisor_flag
		country_event = {	#long lived advisor
			id = bertus_changes.1011
		}
		add_adm_power = 50
	}
	else_if = {	#white
		limit = {has_dragon_aspect = {color = white amount = 2}}
		get_racial_advisor = {class = adm}
		add_adm_power = 50
	}
	else_if = {	#white
		limit = {has_dragon_aspect = {color = white amount = 1}}
		add_adm_power = 50
	}
	if = {	#purple
		limit = {has_dragon_aspect = {color = purple amount = 3}}
		custom_tooltip = purple_dragon_effect_20_tt
		hidden_effect = {
			every_owned_province = {
				limit = {culture_is_kobold = yes}
				add_local_autonomy = -20
			}
		}
	}
	else_if = {	#purple
		limit = {has_dragon_aspect = {color = purple amount = 2}}
		custom_tooltip = purple_dragon_effect_10_tt
		hidden_effect = {
			every_owned_province = {
				limit = {culture_is_kobold = yes}
				add_local_autonomy = -10
			}
		}
	}
	else_if = {	#purple
		limit = {has_dragon_aspect = {color = purple amount = 1}}
		custom_tooltip = purple_dragon_effect_5_tt
		hidden_effect = {
			every_owned_province = {
				limit = {culture_is_kobold = yes}
				add_local_autonomy = -5
			}
		}
	}
	if = {	#brown
		limit = {has_dragon_aspect = {color = brownd amount = 3}}
		set_country_flag = get_elder_advisor_flag
		set_country_flag = elder_dip_advisor_flag
		country_event = {	#long lived advisor
			id = bertus_changes.1011
		}
		add_dip_power = 50
	}
	else_if = {	#brown
		limit = {has_dragon_aspect = {color = brown amount = 2}}
		get_racial_advisor = {class = dip}
		add_dip_power = 50
	}
	else_if = {	#brown
		limit = {has_dragon_aspect = {color = brown amount = 1}}
		add_dip_power = 50
	}
	if = {	#brass
		limit = {has_dragon_aspect = {color = brass amount = 3}}
		set_country_flag = get_elder_advisor_flag
		set_country_flag = elder_mil_advisor_flag
		country_event = {	#long lived advisor
			id = bertus_changes.1011
		}
	}
	else_if = {	#brass
		limit = {has_dragon_aspect = {color = brass amount = 2}}
		get_racial_advisor = {class = mil}
		add_mil_power = 100
	}
	else_if = {	#brass
		limit = {has_dragon_aspect = {color = brass amount = 1}}
		add_mil_power = 100
	}
	if = {	#copper
		limit = {has_dragon_aspect = {color = copper amount = 3}}
		change_government_reform_progress = 100
	}
	else_if = {	#copper
		limit = {has_dragon_aspect = {color = copper amount = 2}}
		change_government_reform_progress  = 50
	}
	else_if = {	#copper
		limit = {has_dragon_aspect = {color = copper amount = 1}}
		change_government_reform_progress  = 25
	}
	if = {	#bronze
		limit = {has_dragon_aspect = {color = bronze amount = 3}}
		add_absolutism  = 20
	}
	else_if = {	#bronze
		limit = {has_dragon_aspect = {color = bronze amount = 2}}
		add_absolutism  = 10
	}
	else_if = {	#bronze
		limit = {has_dragon_aspect = {color = bronze amount = 1}}
		add_absolutism  = 5
	}
	if = {	#silver
		limit = {has_dragon_aspect = {color = silver amount = 3}}
		add_mercantilism  = 4
	}
	else_if = {	#silver
		limit = {has_dragon_aspect = {color = silver amount = 2}}
		add_mercantilism  = 2
	}
	else_if = {	#silver
		limit = {has_dragon_aspect = {color = silver amount = 1}}
		add_mercantilism  = 1
	}
	if = {	#gold
		limit = {has_dragon_aspect = {color = gold amount = 3}}
		add_years_of_income = 1.0
	}
	else_if = {	#gold
		limit = {has_dragon_aspect = {color = gold amount = 2}}
		add_years_of_income = 0.5
	}
	else_if = {	#gold
		limit = {has_dragon_aspect = {color = gold amount = 1}}
		add_years_of_income = 0.25
	}
	if = {	#rainbow
		limit = {has_dragon_aspect = {color = rainbow amount = 1}}
		random_list = {
			33 = {
				modifier = {factor = 0 adm = 6}
				change_adm = 1
			}
			33 = {
				modifier = {factor = 0 dip = 6}
				change_dip = 1
			}
			33 = {
				modifier = {factor = 0 mil = 6}
				change_mil = 1
			}
		}
	}
}
dwarven_celebrate_effect = {
	if = {
		limit = {has_church_aspect = dagrin_adm_aspect}
		add_adm_power = 200
	}
	if = {
		limit = {has_church_aspect = dagrin_dip_aspect}
		change_government_reform_progress = 100
	}
	if = {
		limit = {has_church_aspect = anvelind_dip_aspect}
		country_event = {id = bertus_changes.1011}
	}
	if = {
		limit = {has_church_aspect = anvelind_mil_aspect}
		add_mil_power = 200
	}
	if = {
		limit = {has_church_aspect = durvorazir_adm_aspect}
		random_owned_province = {
			area = {
				add_base_production = 1
			}
		}
	}
	if = {
		limit = {has_church_aspect = durvorazir_mil_aspect}
		random_owned_province = {
			limit = {has_fort_building_trigger = yes}
			improve_fortifications_effect = yes
		}
	}
	if = {
		limit = {has_church_aspect = margurz_dip_aspect}
		add_war_exhaustion = -5
		custom_tooltip = margurz_dip_aspect_effect_tt
		hidden_effect = {
			every_owned_province = {
				add_devastation = -20
			}
		}
	}
	if = {
		limit = {has_church_aspect = margurz_mil_aspect}
		add_yearly_manpower = 2
	}
	if = {
		limit = {has_church_aspect = miradeth_dip_aspect}
		get_cash_from_mercantilism = yes
	}
	if = {
		limit = {
			has_church_aspect = miradeth_mil_aspect
		}
		get_racial_advisor = {class = mil}
	}
	if = {
		limit = {has_church_aspect = azmirethazin_adm_aspect}
		custom_tooltip = azmirethazin_adm_aspect_effect_tt
		hidden_effect = {
			every_owned_province = {
				limit = {
					has_manufactory_trigger = yes
					development = 30
				}
				add_base_production = 1
			}
		}
	}
	if = {
		limit = {has_church_aspect = azmirethazin_dip_aspect}
		custom_tooltip = azmirethazin_dip_aspect_effect_tt
		hidden_effect = {
			every_owned_province = {
				add_unrest = -5
			}
		}
	}
	if = {
		limit = {has_church_aspect = argezenna_adm_aspect}
		custom_tooltip = argezenna_adm_aspect_effect_tt
		hidden_effect = {
			every_owned_province = {
				add_local_autonomy = -10
			}
		}
	}
	if = {
		limit = {has_church_aspect = argezenna_mil_aspect}
		set_country_flag = get_adventurer_flag
		custom_tooltip = get_great_hero_general_tt
		hidden_effect = {
			set_saved_name = {key = special_general_name type = advisor scope = ROOT}
			country_event = {id = bertus_changes.6030}
		}
	}
	if = {
		limit = {has_church_aspect = auirikus_adm_aspect}
		add_stability = 1
		add_legitimacy = 20
		add_devotion = 10
		add_republican_tradition = 5
	}
	if = {
		limit = {has_church_aspect = auirikus_dip_aspect}
		add_dip_power = 200
	}
	if = {
		limit = {has_church_aspect = urisazirn_adm_aspect}
		add_adm_power = 50
		add_dip_power = 50
		add_mil_power = 50
	}
	if = {
		limit = {has_church_aspect = urisazirn_mil_aspect}
		add_army_tradition = 25
	}
}
improve_fortifications_effect = {
	trigger_switch = {
		on_trigger = has_building
		fortress_supply = {add_base_manpower = 5}
		fortress_wall = {add_building = fortress_supply}
		fortress_artillery = {add_building = fortress_wall}
		fortress_towers = {add_building = fortress_artillery}
		fortress_barracks = {add_building = fortress_towers}
		fortress_keep = {add_building = fortress_barracks}
	}
	if = {
		limit = {
			NOT = {
				has_building = fortress_keep
				has_building = fortress_supply
				has_building = fortress_wall
				has_building = fortress_artillery
				has_building = fortress_towers
				has_building = fortress_barracks
				has_building = fortress_keep
			}
		}
		add_building = fortress_keep
	}
}
get_cash_from_mercantilism = {
	custom_tooltip = get_cash_from_mercantilism
	hidden_effect = {
		set_variable = {
			which = mercantilism_var
			value = 0
		}
		export_to_variable = {
			which = mercantilism_var
			value = mercantilism
		}
		while = {
			limit = {
				check_variable = {
					which = mercantilism_var
					value = mercantilism
				}
			}
			change_variable = {
				which = mercantilism_var
				value = -1
			}
			add_years_of_income = 0.03
		}
	}
}
on_trade_good_changed_bertus_effect = {

	remove_boost_pop_goods_produced = yes
	remove_province_modifier_effect = { MODIFIER = wine_bonus_prod}
	remove_province_modifier_effect = { MODIFIER = grain_bonus_prod}
	remove_province_modifier_effect = { MODIFIER = artifice_ageifier_bonus}
	remove_province_modifier_effect = { MODIFIER = artifice_growthbeans_bonus}
	remove_province_modifier_effect = { MODIFIER = artifice_gene_food_cultivation_bonus}
	remove_province_modifier_effect = { MODIFIER = artifice_pearl_cultivator_bonus}
	remove_province_modifier_effect = { MODIFIER = wine_lord_wine}
	remove_province_modifier_effect = { MODIFIER = phoenix_empire_bulwar_gov_cost_modifier}
	remove_province_modifier_effect = { MODIFIER = oak_lord_province_modifier}
	remove_province_modifier_effect = { MODIFIER = eordan_expedition_site}
	remove_province_modifier_effect = { MODIFIER = damestear_rich_deposit}
	remove_province_modifier_effect = { MODIFIER = huge_damestear}
	remove_province_modifier_effect = { MODIFIER = big_fungi}
	remove_province_modifier_effect = { MODIFIER = dwindling_resources}
	remove_province_modifier_effect = { MODIFIER = orlghelovar_glasslord_glass}
	remove_province_modifier_effect = { MODIFIER = orlghelovar_reformed_glassworkers}
	remove_province_modifier_effect = { MODIFIER = orlghelovar_glass_value}
	remove_province_modifier_effect = { MODIFIER = B34_board_of_chains_boost}
	remove_province_modifier_effect = { MODIFIER = B34_board_of_chains_boost_upgraded}
	remove_province_modifier_effect = { MODIFIER = B34_board_of_chains_boost_upgraded_2}
	remove_province_modifier_effect = { MODIFIER = slave_boost_modifier}
	remove_province_modifier_effect = { MODIFIER = silk_forest_modifier}
	remove_province_modifier_effect = { MODIFIER = estalleni_silks}
	remove_province_modifier_effect = { MODIFIER = cheese_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = rum_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = maple_syrup_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = olive_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = lumber_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = lumber_red_oak_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = lumber_grey_oak_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = blue_marble_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = citrus_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = viswall_dyes_modifier}
	remove_province_modifier_effect = { MODIFIER = telgeir_champagne_modifier}
	remove_province_modifier_effect = { MODIFIER = jewel_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = jewelpoint_modifier}
	remove_province_modifier_effect = { MODIFIER = the_pearls_modifier}
	remove_province_modifier_effect = { MODIFIER = soulstones_of_isle_vroren}
	remove_province_modifier_effect = { MODIFIER = vanbury_steel_foundry}
	remove_province_modifier_effect = { MODIFIER = copper_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = horse_garden_modifier}
	remove_province_modifier_effect = { MODIFIER = northern_fur_modifier}
	remove_province_modifier_effect = { MODIFIER = tar_bonus_modifier}
	remove_province_modifier_effect = { MODIFIER = whaling_thaw_modifier}
	remove_province_modifier_effect = { MODIFIER = beer_boost_modifier}
	remove_province_modifier_effect = { MODIFIER = incense_boost_modifier}
	remove_province_modifier_effect = { MODIFIER = fish_boost_modifier}
	remove_province_modifier_effect = { MODIFIER = naval_supplies_boost_modifier}
	remove_province_modifier_effect = { MODIFIER = lorent_bottlemaking_monopoly}
	remove_province_modifier_effect = { MODIFIER = giberd_artificer_manufactories}
	remove_province_modifier_effect = { MODIFIER = glass_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = iron_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = grain_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = gems_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = lead_trade_modifier}
	remove_province_modifier_effect = { MODIFIER = wine_trade_modifier}
	
	hidden_effect = {
		if = {
			limit = {
				trade_goods = wine
				FROM = { has_reform = monastic_breweries_reform }
			}
			remove_province_modifier = grain_bonus_prod
			add_province_modifier = {name = wine_bonus_prod duration = -1 hidden = yes}
		}
		if = {
			limit = {
				trade_goods = wine
				FROM = { has_government_attribute = winelord_boost}
			}
			add_province_modifier = {name = wine_lord_wine duration = -1 hidden = yes}
		}
		if = {
			limit = {
				superregion = bulwar_superregion
				FROM = { has_government_attribute = bulwar_reduced_governing_cost}
			}
			add_province_modifier = {name = phoenix_empire_bulwar_gov_cost_modifier duration = -1 hidden = yes}
		}
		if = {
			limit = {
				OR = {
					trade_goods = wine
					trade_goods = champagne
				}
				owner = {
					has_estate_privilege = artifice_invention_wine_ageifier
				}
			}
			add_province_modifier = {name = artifice_ageifier_bonus duration = -1 hidden = yes}
		}
		if = {
			limit = {
				owner = {
					has_estate_privilege = artifice_invention_growth_beans
				}
				province_with_farm_goods = yes
			}
			add_province_modifier = { name = artifice_growthbeans_bonus duration = -1 hidden = yes}
		}
		if = {
			limit = {
				owner = {
					has_estate_privilege = artifice_invention_gene_food_cultivation
				}
				province_with_farm_goods = yes
			}
			add_province_modifier = {name = artifice_gene_food_cultivation_bonus duration = -1 hidden = yes}
		}
		if = {
			limit = {
				trade_goods = gems
				owner = {
					has_estate_privilege = artifice_invention_pearl_cultivators
				}
			}
			add_province_modifier = {name = artifice_pearl_cultivator_bonus duration = -1 hidden = yes}
		}
		if = {
			limit = {
				trade_goods = grain
				OR = {
					FROM = { has_reform = monastic_breweries_reform }
				}
			}
			remove_province_modifier = wine_bonus_prod
			add_province_modifier = {name = grain_bonus_prod duration = -1 hidden = yes}
		}
		
		#honderaak incident gnoll minorities for colonies
		if = {
			limit = {
				is_city = no
				owner = { is_part_of_hre = yes has_country_modifier = honderaak_incident_colonization NOT = { culture_group = gnollish } }
			}
			random = {
				chance = 50
				province_event = { id = flavor_honderaak.6 days = 30 random = 60 }
			}
		}
		#Orlghelovar
		if = {
			limit = {
				trade_goods = glass
				owner = { tag = I12 }
			}
			if = {
				limit = {
					owner = {
						OR = {
							has_reform = orlghelovar_glasslords
							has_reform = orlghelovar_science
						}
					}
					NOT = { has_province_modifier = orlghelovar_glasslord_glass }
				}
				add_province_modifier = { name = orlghelovar_glasslord_glass duration = -1 hidden = yes }
			}
			if = {
				limit = {
					owner = { has_reform = orlghelovar_glass_worker_reform }
					NOT = { has_province_modifier = orlghelovar_reformed_glassworkers }
				}
				add_province_modifier = { name = orlghelovar_reformed_glassworkers duration = -1 hidden = yes }
			}
			if = {
				limit = {
					owner = { has_country_modifier = orlghelovar_sapphire_glass }
					NOT = { has_province_modifier = orlghelovar_glass_value }
				}
				add_province_modifier = { name = orlghelovar_glass_value duration = -1 hidden = yes }
			}
		}
		#luciande
		if = {
			limit = { 
				owner = { tag = B34 }
				trade_goods = slaves
			}
			if = {
				limit = {
					owner = { has_country_flag = luciande_tier3_slaves_flag }
				}
				add_province_modifier = { name = B34_board_of_chains_boost_upgraded_2 duration = -1 hidden = yes }
			}
			else_if = {
				limit = {
					owner = { has_country_flag = luciande_tier2_slaves_flag }
				}
				add_province_modifier = { name = B34_board_of_chains_boost_upgraded duration = -1 hidden = yes }
			}
			else_if = {
				limit = {
					owner = { has_country_flag = luciande_tier1_slaves_flag }
				}
				add_province_modifier = { name = B34_board_of_chains_boost duration = -1 hidden = yes }
			}
		}
		#newshire
		if = {
			limit = {
				OR = {
					trade_goods = grain
					trade_goods = livestock
				}
				FROM = { 
					OR = {
						has_reform = newshire_stewardship
						has_reform = newshire_high_stewardship
					}
				}
			}
			add_province_modifier = {name = newshire_stewardship_boost duration = -1 hidden = yes}
		}
		else_if = {
			limit = {
				NOT = { 
					FROM = { 
						OR = {
							has_reform = newshire_stewardship
							has_reform = newshire_high_stewardship
						}
					} 
				}
				has_province_modifier = newshire_stewardship_boost
			}
			remove_province_modifier = newshire_stewardship_boost
		}
    }
}