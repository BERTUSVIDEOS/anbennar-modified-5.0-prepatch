
get_necromancer_power = {
	set_variable = {which = necromancer_power_var value = 0}
	set_variable = {which = necromancer_power_from_mage_towers_var value = 0}
	set_variable = {which = necromancer_power_from_damestear_var value = 0}
	set_variable = {which = necromancer_power_from_mil_var value = 0}
	set_variable = {which = necromancer_power_from_all_power_cost_var value = 0}
	change_variable = {	which = necromancer_power_var which = pointsWitchKing}	#Magical Infamy base
	every_owned_province = {
		limit = {has_building = mage_tower}	#1 per mage tower
		owner = {change_variable = {	which = necromancer_power_from_mage_towers_var value = 0.5}}
	}
	change_variable = {	which = necromancer_power_var which = necromancer_power_from_mage_towers_var}	
	change_variable = {which = necromancer_power_from_damestear_var which = damestear}
	multiply_variable = {which = necromancer_power_from_damestear_var value = 0.05}	#5% per damestear good produced
	change_variable = {which = necromancer_power_from_damestear_var value = 1}
	multiply_variable = {which = necromancer_power_var which = necromancer_power_from_damestear_var}	# damestear boost
	export_to_variable = {which = necromancer_power_from_mil_var value = trigger_value:mil}
	multiply_variable = {which = necromancer_power_from_mil_var value = 0.05}	#5% per mil point
	change_variable = {which = necromancer_power_from_mil_var value = 1}
	multiply_variable = {which = necromancer_power_var which = necromancer_power_from_mil_var}	#mil boost
	export_to_variable = {which = necromancer_power_from_all_power_cost_var value = modifier:all_power_cost}
	multiply_variable = {which = necromancer_power_from_all_power_cost_var value = -1}
	change_variable = {which = necromancer_power_from_all_power_cost_var value = 1}
	multiply_variable = {which = necromancer_power_var which = necromancer_power_from_all_power_cost_var}	#all power cost boost
	if = {	#necropolis bonus 
		limit = {332 = {owned_by = ROOT has_great_project = { type = the_necropolis tier = 3}}}
		multiply_variable = { which = necromancer_power_var value = 1.5 }
	}
	else_if = {	#necropolis bonus 
		limit = {332 = {owned_by = ROOT has_great_project = { type = the_necropolis tier = 2}}}
		multiply_variable = { which = necromancer_power_var value = 1.25 }
	}
	else_if = {	#necropolis bonus 
		limit = {332 = {owned_by = ROOT has_great_project = { type = the_necropolis tier = 1}}}
		multiply_variable = { which = necromancer_power_var value = 1.1 }
	}
	if = {	#necropolis bonus 
		limit = {has_ruler_flag = necromancy_3}
		multiply_variable = { which = necromancer_power_var value = 1.25 }
	}
	trigger_switch = {
		on_trigger = current_age
		age_of_discovery = {multiply_variable = { which = necromancer_power_var value = 0.33 }}
		age_of_reformation = {multiply_variable = { which = necromancer_power_var value = 0.66 }}
		age_of_revolutions = {multiply_variable = { which = necromancer_power_var value = 1.33 }}
	}
	#localisations adaptation
	change_variable = {which = necromancer_power_from_damestear_var value = -1}
	multiply_variable = {which = necromancer_power_from_damestear_var value = 100}
	change_variable = {which = necromancer_power_from_mil_var value = -1}
	multiply_variable = {which = necromancer_power_from_mil_var value = 100}
	change_variable = {which = necromancer_power_from_all_power_cost_var value = -1}
	multiply_variable = {which = necromancer_power_from_all_power_cost_var value = 100}
	zombie_allowed_amount = yes
}
zombie_allowed_amount = {
	set_variable = {which = num_of_undead_var value = 0}
	export_to_variable = {which = num_of_undead_var value = trigger_value:num_of_streltsy}
	change_variable = {which = num_of_undead_var value = 1}
	while = {
		limit = {
			check_variable = {which = necromancer_power_var  which = num_of_undead_var}
			NOT = {army_size_percentage = 1.0}
		}
		capital_scope = {streltsy_infantry = ROOT}
		change_variable = {which = num_of_undead_var value = 1}
	}
}
summon_all_allowed_zombies = {
	set_variable = {which = num_of_undead_var value = 0}
	export_to_variable = {which = num_of_undead_var value = trigger_value:num_of_streltsy}
	change_variable = {which = num_of_undead_var value = 1}
	while = {
		limit = {
			check_variable = {which = necromancer_power_var  which = num_of_undead_var}
		}
		capital_scope = {streltsy_infantry = ROOT}
		change_variable = {which = num_of_undead_var value = 1}
	}
}
remove_estate_race_councelor = {
	[[enable_annex_penalty]
		if = {
			limit = {has_country_modifier = estate_human_diplomacy_chairman_modifier}
			enable_annexation_penalty = yes
		}
	]
	[[remove_gnomish_bonus]
		if = {
			limit = {has_country_modifier = estate_gnomish_military_chairman_modifier}
			remove_country_modifier = gnomish_militar_chairman_10
			remove_country_modifier = gnomish_militar_chairman_20
			remove_country_modifier = gnomish_militar_chairman_30
			remove_country_modifier = gnomish_militar_chairman_40
			remove_country_modifier = gnomish_militar_chairman_50
			remove_country_modifier = gnomish_militar_chairman_60
			remove_country_modifier = gnomish_militar_chairman_70
			remove_country_modifier = gnomish_militar_chairman_80
			remove_country_modifier = gnomish_militar_chairman_90
			remove_country_modifier = gnomish_militar_chairman_100
		}
	]
	[[remove_halfling_bonus]
		if = {
			limit = {has_country_modifier = estate_halfling_economic_chairman_modifier}
			remove_country_modifier = halfling_economic_chairman_mercantilism_10
			remove_country_modifier = halfling_economic_chairman_mercantilism_20
			remove_country_modifier = halfling_economic_chairman_mercantilism_30
			remove_country_modifier = halfling_economic_chairman_mercantilism_40
			remove_country_modifier = halfling_economic_chairman_mercantilism_50
			remove_country_modifier = halfling_economic_chairman_mercantilism_60
			remove_country_modifier = halfling_economic_chairman_mercantilism_70
			remove_country_modifier = halfling_economic_chairman_mercantilism_80
			remove_country_modifier = halfling_economic_chairman_mercantilism_90
			remove_country_modifier = halfling_economic_chairman_mercantilism_100
		}
	]
	remove_estate_privilege = estate_human_$type$_chairman
	remove_country_modifier = estate_human_$type$_chairman_modifier
	remove_estate_privilege = estate_elven_$type$_chairman
	remove_country_modifier = estate_elven_$type$_chairman_modifier
	remove_estate_privilege = estate_dwarven_$type$_chairman
	remove_country_modifier = estate_dwarven_$type$_chairman_modifier
	remove_estate_privilege = estate_halfling_$type$_chairman
	remove_country_modifier = estate_halfling_$type$_chairman_modifier
	remove_estate_privilege = estate_gnomish_$type$_chairman
	remove_country_modifier = estate_gnomish_$type$_chairman_modifier
	remove_estate_privilege = estate_harimari_$type$_chairman
	remove_country_modifier = estate_harimari_$type$_chairman_modifier
	remove_estate_privilege = estate_gnollish_$type$_chairman
	remove_country_modifier = estate_gnollish_$type$_chairman_modifier
	remove_estate_privilege = estate_ruinborn_$type$_chairman
	remove_country_modifier = estate_ruinborn_$type$_chairman_modifier
	remove_estate_privilege = estate_orcish_$type$_chairman
	remove_country_modifier = estate_orcish_$type$_chairman_modifier
	remove_estate_privilege = estate_goblin_$type$_chairman
	remove_country_modifier = estate_goblin_$type$_chairman_modifier
	remove_estate_privilege = estate_ogre_$type$_chairman
	remove_country_modifier = estate_ogre_$type$_chairman_modifier
	remove_estate_privilege = estate_centaur_$type$_chairman
	remove_country_modifier = estate_centaur_$type$_chairman_modifier
	remove_estate_privilege = estate_troll_$type$_chairman
	remove_country_modifier = estate_troll_$type$_chairman_modifier
	remove_estate_privilege = estate_harpy_$type$_chairman
	remove_country_modifier = estate_harpy_$type$_chairman_modifier
	remove_estate_privilege = estate_half_orcish_$type$_chairman
	remove_country_modifier = estate_half_orcish_$type$_chairman_modifier
	remove_estate_privilege = estate_half_elven_$type$_chairman
	remove_country_modifier = estate_half_elven_$type$_chairman_modifier
	remove_estate_privilege = estate_hobgoblin_$type$_chairman
	remove_country_modifier = estate_hobgoblin_$type$_chairman_modifier
	remove_estate_privilege = estate_kobold_$type$_chairman
	remove_country_modifier = estate_kobold_$type$_chairman_modifier
}
country_chairman_effect = {
	if = {
		limit = {has_country_modifier = estate_human_$type$_chairman_modifier}
		custom_tooltip = has_human_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_elven_$type$_chairman_modifier}
		custom_tooltip = has_elven_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_dwarven_$type$_chairman_modifier}
		custom_tooltip = has_dwarven_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_halfling_$type$_chairman_modifier}
		custom_tooltip = has_halfling_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_gnomish_$type$_chairman_modifier}
		custom_tooltip = has_gnomish_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_harimari_$type$_chairman_modifier}
		custom_tooltip = has_harimari_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_gnollish_$type$_chairman_modifier}
		custom_tooltip = has_gnollish_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_ruinborn_$type$_chairman_modifier}
		custom_tooltip = has_ruinborn_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_orcish_$type$_chairman_modifier}
		custom_tooltip = has_orcish_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_goblin_$type$_chairman_modifier}
		custom_tooltip = has_goblin_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_ogre_$type$_chairman_modifier}
		custom_tooltip = has_ogre_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_centaur_$type$_chairman_modifier}
		custom_tooltip = has_centaur_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_troll_$type$_chairman_modifier}
		custom_tooltip = has_troll_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_harpy_$type$_chairman_modifier}
		custom_tooltip = has_harpy_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_half_orcish_$type$_chairman_modifier}
		custom_tooltip = has_half_orcish_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_half_elven_$type$_chairman_modifier}
		custom_tooltip = has_half_elven_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_hobgoblin_$type$_chairman_modifier}
		custom_tooltip = has_hobgoblin_$type$_chairman_tooltip
	}
	else_if = {
		limit = {has_country_modifier = estate_kobold_$type$_chairman_modifier}
		custom_tooltip = has_kobold_$type$_chairman_tooltip
	}
	else = {custom_tooltip = no_$type$_chairman_tooltip}
}
country_administration_effect = {
	if = {limit = {has_country_modifier = human_administration} custom_tooltip = has_human_$type$_tooltip}
	if = {limit = {has_country_modifier = elven_administration} custom_tooltip = has_elven_$type$_tooltip}
	if = {limit = {has_country_modifier = dwarven_administration} custom_tooltip = has_dwarven_$type$_tooltip}
	if = {limit = {has_country_modifier = halfling_administration} custom_tooltip = has_halfling_$type$_tooltip}
	if = {limit = {has_country_modifier = harimari_administration} custom_tooltip = has_harimari_$type$_tooltip}
	if = {limit = {has_country_modifier = gnollish_administration} custom_tooltip = has_gnollish_$type$_tooltip}
	if = {limit = {has_country_modifier = ruinborn_administration} custom_tooltip = has_ruinborn_$type$_tooltip}
	if = {limit = {has_country_modifier = orcish_administration} custom_tooltip = has_orcish_$type$_tooltip}
	if = {limit = {has_country_modifier = goblin_administration} custom_tooltip = has_goblin_$type$_tooltip}
	if = {limit = {has_country_modifier = ogre_administration} custom_tooltip = has_ogre_$type$_tooltip}
	if = {limit = {has_country_modifier = centaur_administration} custom_tooltip = has_centaur_$type$_tooltip}
	if = {limit = {has_country_modifier = troll_administration} custom_tooltip = has_troll_$type$_tooltip}
	if = {limit = {has_country_modifier = harpy_administration} custom_tooltip = has_harpy_$type$_tooltip}
	if = {limit = {has_country_modifier = half_orcish_administration} custom_tooltip = has_half_orcish_$type$_tooltip}
	if = {limit = {has_country_modifier = half_elven_administration} custom_tooltip = has_half_elven_$type$_tooltip}
	if = {limit = {has_country_modifier = hobgoblin_administration} custom_tooltip = has_hobgoblin_$type$_tooltip}
	if = {limit = {has_country_modifier = kobold_administration} custom_tooltip = has_kobold_$type$_tooltip}
}
clear_artificers_academies = {
	remove_country_modifier = artificers_academies_31
	remove_country_modifier = artificers_academies_27
	remove_country_modifier = artificers_academies_20
	remove_country_modifier = artificers_academies_14
	remove_country_modifier = artificers_academies_8
	remove_country_modifier = artificers_academies_6
	remove_country_modifier = artificers_academies_1
}
setup_artificers_academies = {
	clear_artificers_academies = yes
	if = {
		limit = {has_estate_privilege  = estate_artificers_academies}
		trigger_switch = {
			on_trigger = has_country_flag
			mil_tech_31_flag = {add_country_modifier = {name = artificers_academies_31 duration = -1}}
			mil_tech_27_flag = {add_country_modifier = {name = artificers_academies_27 duration = -1}}
			mil_tech_20_flag = {add_country_modifier = {name = artificers_academies_20 duration = -1}}
			mil_tech_14_flag = {add_country_modifier = {name = artificers_academies_14 duration = -1}}
			mil_tech_8_flag = {add_country_modifier = {name = artificers_academies_8 duration = -1}}
			mil_tech_6_flag = {add_country_modifier = {name = artificers_academies_6 duration = -1}}
			mil_tech_1_flag = {add_country_modifier = {name = artificers_academies_1 duration = -1}}
		}
	}
}
setup_battlemages_training = {
	add_country_modifier = {name = magic_training duration = -1}
}
clear_battlemages_training = {
	remove_country_modifier = magic_training
}
setup_battlemages_shock = {
	clear_battlemages_shock = yes
	if = {
		limit = {
			has_estate_privilege  = estate_mages_battlemage_academies
			NOT = {has_estate_privilege  = estate_mages_fire_academy}
			NOT = {has_country_modifier = centaur_military}
		}
		trigger_switch = {
			on_trigger = has_country_flag
			mil_tech_31_flag = {add_country_modifier = {name = magic_academies_31 duration = -1}}
			mil_tech_28_flag = {add_country_modifier = {name = magic_academies_28 duration = -1}}
			mil_tech_27_flag = {add_country_modifier = {name = magic_academies_27 duration = -1}}
			mil_tech_21_flag = {add_country_modifier = {name = magic_academies_21 duration = -1}}
			mil_tech_20_flag = {add_country_modifier = {name = magic_academies_20 duration = -1}}
			mil_tech_14_flag = {add_country_modifier = {name = magic_academies_14 duration = -1}}
			mil_tech_11_flag = {add_country_modifier = {name = magic_academies_11 duration = -1}}
			mil_tech_8_flag = {add_country_modifier = {name = magic_academies_8 duration = -1}}
			mil_tech_6_flag = {add_country_modifier = {name = magic_academies_6 duration = -1}}
			mil_tech_5_flag = {add_country_modifier = {name = magic_academies_5 duration = -1}}
			mil_tech_2_flag = {add_country_modifier = {name = magic_academies_2 duration = -1}}
		}
	}
	else_if = {
		limit = {
			has_estate_privilege  = estate_mages_battlemage_academies
			has_country_modifier = centaur_military
		}
		trigger_switch = {
			on_trigger = has_country_flag
			mil_tech_31_flag = {add_country_modifier = {name = centaur_magic_academies_31 duration = -1}}
			mil_tech_23_flag = {add_country_modifier = {name = centaur_magic_academies_23 duration = -1}}
			mil_tech_17_flag = {add_country_modifier = {name = centaur_magic_academies_17 duration = -1}}
			mil_tech_8_flag = {add_country_modifier = {name = centaur_magic_academies_8 duration = -1}}
			mil_tech_5_flag = {add_country_modifier = {name = centaur_magic_academies_5 duration = -1}}
			mil_tech_2_flag = {add_country_modifier = {name = centaur_magic_academies_2 duration = -1}}
		}
	}
	else = {
		add_country_modifier = {name = magic_academies_fire duration = -1}
	}
}
clear_battlemages_shock = {
	remove_country_modifier = magic_academies_2
	remove_country_modifier = magic_academies_5
	remove_country_modifier = magic_academies_6
	remove_country_modifier = magic_academies_8
	remove_country_modifier = magic_academies_11
	remove_country_modifier = magic_academies_14
	remove_country_modifier = magic_academies_20
	remove_country_modifier = magic_academies_21
	remove_country_modifier = magic_academies_27
	remove_country_modifier = magic_academies_28
	remove_country_modifier = magic_academies_31
	remove_country_modifier = magic_academies_fire
	remove_country_modifier = centaur_magic_academies_2
	remove_country_modifier = centaur_magic_academies_5
	remove_country_modifier = centaur_magic_academies_8
	remove_country_modifier = centaur_magic_academies_17
	remove_country_modifier = centaur_magic_academies_23
	remove_country_modifier = centaur_magic_academies_31
}
setup_artificers_weapon = {
	clear_artificers_weapon = yes
	if = {
		limit = {has_country_flag = artifice_weapons_1_flag}
		trigger_switch = {
			on_trigger = has_country_flag
			mil_tech_31_flag = {add_country_modifier = {name = artifice_weapons_1_31 duration = -1}}
			mil_tech_27_flag = {add_country_modifier = {name = artifice_weapons_1_27 duration = -1}}
			mil_tech_20_flag = {add_country_modifier = {name = artifice_weapons_1_20 duration = -1}}
			mil_tech_14_flag = {add_country_modifier = {name = artifice_weapons_1_14 duration = -1}}
			mil_tech_8_flag = {add_country_modifier = {name = artifice_weapons_1_8 duration = -1}}
			mil_tech_6_flag = {add_country_modifier = {name = artifice_weapons_1_6 duration = -1}}
			mil_tech_2_flag = {add_country_modifier = {name = artifice_weapons_1_1 duration = -1}}
		}
	}
	if = {
		limit = {has_country_flag = artifice_weapons_2_flag}
		trigger_switch = {
			on_trigger = has_country_flag
			mil_tech_31_flag = {add_country_modifier = {name = artifice_weapons_2_31 duration = -1}}
			mil_tech_27_flag = {add_country_modifier = {name = artifice_weapons_2_27 duration = -1}}
			mil_tech_20_flag = {add_country_modifier = {name = artifice_weapons_2_20 duration = -1}}
			mil_tech_14_flag = {add_country_modifier = {name = artifice_weapons_2_14 duration = -1}}
			mil_tech_8_flag = {add_country_modifier = {name = artifice_weapons_2_8 duration = -1}}
			mil_tech_6_flag = {add_country_modifier = {name = artifice_weapons_2_6 duration = -1}}
			mil_tech_2_flag = {add_country_modifier = {name = artifice_weapons_2_1 duration = -1}}
		}
	}
	if = {
		limit = {has_country_flag = artifice_weapons_3_flag}
		trigger_switch = {
			on_trigger = has_country_flag
			mil_tech_31_flag = {add_country_modifier = {name = artifice_weapons_3_31 duration = -1}}
			mil_tech_27_flag = {add_country_modifier = {name = artifice_weapons_3_27 duration = -1}}
			mil_tech_20_flag = {add_country_modifier = {name = artifice_weapons_3_20 duration = -1}}
			mil_tech_14_flag = {add_country_modifier = {name = artifice_weapons_3_14 duration = -1}}
			mil_tech_8_flag = {add_country_modifier = {name = artifice_weapons_3_8 duration = -1}}
			mil_tech_6_flag = {add_country_modifier = {name = artifice_weapons_3_6 duration = -1}}
			mil_tech_2_flag = {add_country_modifier = {name = artifice_weapons_3_1 duration = -1}}
		}
	}
	if = {
		limit = {has_country_flag = artifice_blade_weapons_1_flag}
		trigger_switch = {
			on_trigger = has_country_flag
			mil_tech_28_flag = {add_country_modifier = {name = artifice_blade_weapons_1_28 duration = -1}}
			mil_tech_21_flag = {add_country_modifier = {name = artifice_blade_weapons_1_21 duration = -1}}
			mil_tech_11_flag = {add_country_modifier = {name = artifice_blade_weapons_1_11 duration = -1}}
			mil_tech_6_flag = {add_country_modifier = {name = artifice_blade_weapons_1_6 duration = -1}}
			mil_tech_5_flag = {add_country_modifier = {name = artifice_blade_weapons_1_5 duration = -1}}
			mil_tech_2_flag = {add_country_modifier = {name = artifice_blade_weapons_1_2 duration = -1}}
		}
	}
	if = {
		limit = {has_country_flag = artifice_blade_weapons_2_flag}
		trigger_switch = {
			on_trigger = has_country_flag
			mil_tech_28_flag = {add_country_modifier = {name = artifice_blade_weapons_2_28 duration = -1}}
			mil_tech_21_flag = {add_country_modifier = {name = artifice_blade_weapons_2_21 duration = -1}}
			mil_tech_11_flag = {add_country_modifier = {name = artifice_blade_weapons_2_11 duration = -1}}
			mil_tech_6_flag = {add_country_modifier = {name = artifice_blade_weapons_2_6 duration = -1}}
			mil_tech_5_flag = {add_country_modifier = {name = artifice_blade_weapons_2_5 duration = -1}}
			mil_tech_2_flag = {add_country_modifier = {name = artifice_blade_weapons_2_2 duration = -1}}
		}
	}
	if = {
		limit = {has_country_flag = artifice_blade_weapons_3_flag}
		trigger_switch = {
			on_trigger = has_country_flag
			mil_tech_28_flag = {add_country_modifier = {name = artifice_blade_weapons_3_28 duration = -1}}
			mil_tech_21_flag = {add_country_modifier = {name = artifice_blade_weapons_3_21 duration = -1}}
			mil_tech_11_flag = {add_country_modifier = {name = artifice_blade_weapons_3_11 duration = -1}}
			mil_tech_6_flag = {add_country_modifier = {name = artifice_blade_weapons_3_6 duration = -1}}
			mil_tech_5_flag = {add_country_modifier = {name = artifice_blade_weapons_3_5 duration = -1}}
			mil_tech_2_flag = {add_country_modifier = {name = artifice_blade_weapons_3_2 duration = -1}}
		}
	}
	if = {
		limit = {has_country_flag = artifice_arcane_blaster_bertus_flag}
		trigger_switch = {
			on_trigger = has_country_flag
			mil_tech_31_flag = {add_country_modifier = {name = artifice_weapons_arcane_blaster_31 duration = -1}}
			mil_tech_28_flag = {add_country_modifier = {name = artifice_weapons_arcane_blaster_28 duration = -1}}
			mil_tech_27_flag = {add_country_modifier = {name = artifice_weapons_arcane_blaster_27 duration = -1}}
			mil_tech_21_flag = {add_country_modifier = {name = artifice_weapons_arcane_blaster_21 duration = -1}}
			mil_tech_20_flag = {add_country_modifier = {name = artifice_weapons_arcane_blaster_20 duration = -1}}
			mil_tech_14_flag = {add_country_modifier = {name = artifice_weapons_arcane_blaster_14 duration = -1}}
			mil_tech_11_flag = {add_country_modifier = {name = artifice_weapons_arcane_blaster_11 duration = -1}}
			mil_tech_8_flag = {add_country_modifier = {name = artifice_weapons_arcane_blaster_8 duration = -1}}
			mil_tech_6_flag = {add_country_modifier = {name = artifice_weapons_arcane_blaster_6 duration = -1}}
			mil_tech_5_flag = {add_country_modifier = {name = artifice_weapons_arcane_blaster_5 duration = -1}}
			mil_tech_2_flag = {add_country_modifier = {name = artifice_weapons_arcane_blaster_2 duration = -1}}
		}
	}
}
clear_artificers_weapon = {
	remove_country_modifier = artifice_weapons_1_1
	remove_country_modifier = artifice_weapons_1_6
	remove_country_modifier = artifice_weapons_1_8
	remove_country_modifier = artifice_weapons_1_14
	remove_country_modifier = artifice_weapons_1_20
	remove_country_modifier = artifice_weapons_1_27
	remove_country_modifier = artifice_weapons_1_31
	remove_country_modifier = artifice_weapons_2_1
	remove_country_modifier = artifice_weapons_2_6
	remove_country_modifier = artifice_weapons_2_8
	remove_country_modifier = artifice_weapons_2_14
	remove_country_modifier = artifice_weapons_2_20
	remove_country_modifier = artifice_weapons_2_27
	remove_country_modifier = artifice_weapons_2_31
	remove_country_modifier = artifice_weapons_3_1
	remove_country_modifier = artifice_weapons_3_6
	remove_country_modifier = artifice_weapons_3_8
	remove_country_modifier = artifice_weapons_3_14
	remove_country_modifier = artifice_weapons_3_20
	remove_country_modifier = artifice_weapons_3_27
	remove_country_modifier = artifice_weapons_3_31
	remove_country_modifier = artifice_blade_weapons_1_2
	remove_country_modifier = artifice_blade_weapons_1_5
	remove_country_modifier = artifice_blade_weapons_1_6
	remove_country_modifier = artifice_blade_weapons_1_11
	remove_country_modifier = artifice_blade_weapons_1_21
	remove_country_modifier = artifice_blade_weapons_1_28
	remove_country_modifier = artifice_blade_weapons_2_2
	remove_country_modifier = artifice_blade_weapons_2_5
	remove_country_modifier = artifice_blade_weapons_2_6
	remove_country_modifier = artifice_blade_weapons_2_11
	remove_country_modifier = artifice_blade_weapons_2_21
	remove_country_modifier = artifice_blade_weapons_2_28
	remove_country_modifier = artifice_blade_weapons_3_2
	remove_country_modifier = artifice_blade_weapons_3_5
	remove_country_modifier = artifice_blade_weapons_3_6
	remove_country_modifier = artifice_blade_weapons_3_11
	remove_country_modifier = artifice_blade_weapons_3_21
	remove_country_modifier = artifice_blade_weapons_3_28
	remove_country_modifier = artifice_weapons_arcane_blaster_2
	remove_country_modifier = artifice_weapons_arcane_blaster_5
	remove_country_modifier = artifice_weapons_arcane_blaster_6
	remove_country_modifier = artifice_weapons_arcane_blaster_8
	remove_country_modifier = artifice_weapons_arcane_blaster_11
	remove_country_modifier = artifice_weapons_arcane_blaster_14
	remove_country_modifier = artifice_weapons_arcane_blaster_20
	remove_country_modifier = artifice_weapons_arcane_blaster_21
	remove_country_modifier = artifice_weapons_arcane_blaster_27
	remove_country_modifier = artifice_weapons_arcane_blaster_28
	remove_country_modifier = artifice_weapons_arcane_blaster_31
}
take_estate_land_share_all = {
	change_estate_land_share = {estate = estate_$RACE$ share = -100}
}
set_basic_variables = {
	set_variable = {which = $RACE$_base_manpower_province_variable value = 0}
	set_variable = {which = $RACE$_efficiency_manpower_province_variable value = 0}
	set_variable = {which = $RACE$_dev_province_variable value = 0}
	set_variable = {which = $RACE$_total_base_manpower_variable value = 0}
	set_variable = {which = $RACE$_total_dev_variable value = 0}
}
set_pop_percentage = {
	if = {
		limit = {has_estate = estate_$RACE$}
		multiply_variable = {which = $RACE$_total_base_manpower_variable value = 100}
		divide_variable = {which = $RACE$_total_base_manpower_variable which = all_races_base_manpower_variable}
		multiply_variable = {which = $RACE$_total_dev_variable value = 100}
		divide_variable = {which = $RACE$_total_dev_variable which = all_races_total_dev_variable}
	}
}
all_races_effect = {
	$EFFECT$ = { RACE = human }
	$EFFECT$ = { RACE = elven }
	$EFFECT$ = { RACE = dwarven }
	$EFFECT$ = { RACE = halfling }
	$EFFECT$ = { RACE = gnomish }
	$EFFECT$ = { RACE = harimari }
	$EFFECT$ = { RACE = gnollish }
	$EFFECT$ = { RACE = ruinborn }
	$EFFECT$ = { RACE = orcish }
	$EFFECT$ = { RACE = goblin }
	$EFFECT$ = { RACE = ogre }
	$EFFECT$ = { RACE = centaur }
	$EFFECT$ = { RACE = troll }
	$EFFECT$ = { RACE = harpy }
	$EFFECT$ = { RACE = half_orcish }
	$EFFECT$ = { RACE = half_elven }
	$EFFECT$ = { RACE = hobgoblin }
	$EFFECT$ = { RACE = kobold }
	$EFFECT$ = { RACE = lizardfolk }
}
change_estate_land_to_percentage = {
	if = {
		limit = {
			any_owned_province = {
				culture_is_$RACE$ = yes
				NOT = {has_province_modifier = non_military_pop}
			}
		}
		set_variable = {which = land_to_percentage_var value = 1.0}
		if = {
			limit = {check_variable = {which = $RACE$_total_base_manpower_variable which = land_to_percentage_var}}
			change_estate_land_share = {estate = estate_$RACE$ share = 0.99}
		}
		while = {
			limit = {check_variable = {which = $RACE$_total_base_manpower_variable which = land_to_percentage_var}}
			change_variable = {which = land_to_percentage_var value = 1}
			change_estate_land_share = {estate = estate_$RACE$ share = 1}
		}
	}
	else_if = {
		limit = {has_estate_privilege = estate_non_military_country}
		change_estate_land_share = {estate = estate_halfling share = 100}
		change_estate_land_share = {estate = estate_halfling share = -100}
	}
}
count_country_manpower = {		#Country
	if = { #
		limit = {
			is_state_core = owner
			culture_is_$RACE$ = yes
		}
		owner = {		#Country	
			set_variable = {which = $RACE$_base_manpower_province_variable value = 0}
			export_to_variable = {which = $RACE$_base_manpower_province_variable value = base_manpower who = ROOT}
			if = {
				limit = {ROOT = {NOT = {has_province_modifier = non_military_pop}}}
				change_variable = {which = $RACE$_total_base_manpower_variable which = $RACE$_base_manpower_province_variable}
				change_variable = {which = all_races_base_manpower_variable which = $RACE$_base_manpower_province_variable}
			}
			export_to_variable = {which = $RACE$_dev_province_variable value = development who = PREV}
			change_variable = {which = $RACE$_total_dev_variable which = $RACE$_dev_province_variable}
			change_variable = {which = all_races_total_dev_variable which = $RACE$_dev_province_variable}
		}
	}
}
update_race_recruitment = {
	update_$race$_recruitment = yes
}
update_human_recruitment = {
	set_estate_privilege = estate_human_recruitment
}
update_elven_recruitment = {
	set_estate_privilege = estate_elven_recruitment
}
update_dwarven_recruitment = {
	set_estate_privilege = estate_dwarven_recruitment
}
update_halfling_recruitment = {
	trigger_switch = {
		on_trigger = has_country_flag
		mil_tech_32_flag = {set_estate_privilege = estate_halfling_recruitment_32}
		mil_tech_31_flag = {set_estate_privilege = estate_halfling_recruitment_31}
		mil_tech_28_flag = {set_estate_privilege = estate_halfling_recruitment_28}
		mil_tech_27_flag = {set_estate_privilege = estate_halfling_recruitment_27}
		mil_tech_25_flag = {set_estate_privilege = estate_halfling_recruitment_25}
		mil_tech_23_flag = {set_estate_privilege = estate_halfling_recruitment_23}
		mil_tech_22_flag = {set_estate_privilege = estate_halfling_recruitment_22}
		mil_tech_21_flag = {set_estate_privilege = estate_halfling_recruitment_21}
		mil_tech_20_flag = {set_estate_privilege = estate_halfling_recruitment_20}
		mil_tech_17_flag = {set_estate_privilege = estate_halfling_recruitment_17}
		mil_tech_16_flag = {set_estate_privilege = estate_halfling_recruitment_16}
		mil_tech_14_flag = {set_estate_privilege = estate_halfling_recruitment_14}
		mil_tech_13_flag = {set_estate_privilege = estate_halfling_recruitment_13}
		mil_tech_11_flag = {set_estate_privilege = estate_halfling_recruitment_11}
		mil_tech_8_flag = {set_estate_privilege = estate_halfling_recruitment_8}
		mil_tech_7_flag = {set_estate_privilege = estate_halfling_recruitment_7}
		mil_tech_6_flag = {set_estate_privilege = estate_halfling_recruitment_6}
		mil_tech_5_flag = {set_estate_privilege = estate_halfling_recruitment_5}
		mil_tech_2_flag = {set_estate_privilege = estate_halfling_recruitment_2}
		mil_tech_1_flag = {set_estate_privilege = estate_halfling_recruitment}
	}
}
update_gnomish_recruitment = {
	trigger_switch = {
		on_trigger = has_country_flag
		mil_tech_32_flag = {set_estate_privilege = estate_gnomish_recruitment_32}
		mil_tech_31_flag = {set_estate_privilege = estate_gnomish_recruitment_31}
		mil_tech_28_flag = {set_estate_privilege = estate_gnomish_recruitment_28}
		mil_tech_27_flag = {set_estate_privilege = estate_gnomish_recruitment_27}
		mil_tech_25_flag = {set_estate_privilege = estate_gnomish_recruitment_25}
		mil_tech_22_flag = {set_estate_privilege = estate_gnomish_recruitment_22}
		mil_tech_21_flag = {set_estate_privilege = estate_gnomish_recruitment_21}
		mil_tech_20_flag = {set_estate_privilege = estate_gnomish_recruitment_20}
		mil_tech_16_flag = {set_estate_privilege = estate_gnomish_recruitment_16}
		mil_tech_14_flag = {set_estate_privilege = estate_gnomish_recruitment_14}
		mil_tech_13_flag = {set_estate_privilege = estate_gnomish_recruitment_13}
		mil_tech_11_flag = {set_estate_privilege = estate_gnomish_recruitment_11}
		mil_tech_8_flag = {set_estate_privilege = estate_gnomish_recruitment_8}
		mil_tech_7_flag = {set_estate_privilege = estate_gnomish_recruitment_7}
		mil_tech_6_flag = {set_estate_privilege = estate_gnomish_recruitment_6}
		mil_tech_5_flag = {set_estate_privilege = estate_gnomish_recruitment_5}
		mil_tech_2_flag = {set_estate_privilege = estate_gnomish_recruitment_2}
		mil_tech_1_flag = {set_estate_privilege = estate_gnomish_recruitment}
	}
}
update_harimari_recruitment = {
	trigger_switch = {
		on_trigger = has_country_flag
		mil_tech_32_flag = {set_estate_privilege = estate_harimari_recruitment_32}
		mil_tech_31_flag = {set_estate_privilege = estate_harimari_recruitment_31}
		mil_tech_28_flag = {set_estate_privilege = estate_harimari_recruitment_28}
		mil_tech_27_flag = {set_estate_privilege = estate_harimari_recruitment_27}
		mil_tech_25_flag = {set_estate_privilege = estate_harimari_recruitment_25}
		mil_tech_22_flag = {set_estate_privilege = estate_harimari_recruitment_22}
		mil_tech_21_flag = {set_estate_privilege = estate_harimari_recruitment_21}
		mil_tech_20_flag = {set_estate_privilege = estate_harimari_recruitment_20}
		mil_tech_16_flag = {set_estate_privilege = estate_harimari_recruitment_16}
		mil_tech_14_flag = {set_estate_privilege = estate_harimari_recruitment_14}
		mil_tech_13_flag = {set_estate_privilege = estate_harimari_recruitment_13}
		mil_tech_11_flag = {set_estate_privilege = estate_harimari_recruitment_11}
		mil_tech_8_flag = {set_estate_privilege = estate_harimari_recruitment_8}
		mil_tech_7_flag = {set_estate_privilege = estate_harimari_recruitment_7}
		mil_tech_6_flag = {set_estate_privilege = estate_harimari_recruitment_6}
		mil_tech_5_flag = {set_estate_privilege = estate_harimari_recruitment_5}
		mil_tech_2_flag = {set_estate_privilege = estate_harimari_recruitment_2}
		mil_tech_1_flag = {set_estate_privilege = estate_harimari_recruitment}
	}
}
update_gnollish_recruitment = {
	trigger_switch = {
		on_trigger = has_country_flag
		mil_tech_32_flag = {set_estate_privilege = estate_gnollish_recruitment_32}
		mil_tech_31_flag = {set_estate_privilege = estate_gnollish_recruitment_31}
		mil_tech_28_flag = {set_estate_privilege = estate_gnollish_recruitment_28}
		mil_tech_27_flag = {set_estate_privilege = estate_gnollish_recruitment_27}
		mil_tech_25_flag = {set_estate_privilege = estate_gnollish_recruitment_25}
		mil_tech_22_flag = {set_estate_privilege = estate_gnollish_recruitment_22}
		mil_tech_21_flag = {set_estate_privilege = estate_gnollish_recruitment_21}
		mil_tech_20_flag = {set_estate_privilege = estate_gnollish_recruitment_20}
		mil_tech_16_flag = {set_estate_privilege = estate_gnollish_recruitment_16}
		mil_tech_14_flag = {set_estate_privilege = estate_gnollish_recruitment_14}
		mil_tech_13_flag = {set_estate_privilege = estate_gnollish_recruitment_13}
		mil_tech_11_flag = {set_estate_privilege = estate_gnollish_recruitment_11}
		mil_tech_8_flag = {set_estate_privilege = estate_gnollish_recruitment_8}
		mil_tech_7_flag = {set_estate_privilege = estate_gnollish_recruitment_7}
		mil_tech_6_flag = {set_estate_privilege = estate_gnollish_recruitment_6}
		mil_tech_5_flag = {set_estate_privilege = estate_gnollish_recruitment_5}
		mil_tech_2_flag = {set_estate_privilege = estate_gnollish_recruitment_2}
		mil_tech_1_flag = {set_estate_privilege = estate_gnollish_recruitment}
	}
}
update_ruinborn_recruitment = {
	set_estate_privilege = estate_ruinborn_recruitment
}
update_orcish_recruitment = {
	trigger_switch = {
		on_trigger = has_country_flag
		mil_tech_32_flag = {set_estate_privilege = estate_orcish_recruitment_32}
		mil_tech_31_flag = {set_estate_privilege = estate_orcish_recruitment_31}
		mil_tech_28_flag = {set_estate_privilege = estate_orcish_recruitment_28}
		mil_tech_27_flag = {set_estate_privilege = estate_orcish_recruitment_27}
		mil_tech_25_flag = {set_estate_privilege = estate_orcish_recruitment_25}
		mil_tech_22_flag = {set_estate_privilege = estate_orcish_recruitment_22}
		mil_tech_21_flag = {set_estate_privilege = estate_orcish_recruitment_21}
		mil_tech_20_flag = {set_estate_privilege = estate_orcish_recruitment_20}
		mil_tech_16_flag = {set_estate_privilege = estate_orcish_recruitment_16}
		mil_tech_14_flag = {set_estate_privilege = estate_orcish_recruitment_14}
		mil_tech_13_flag = {set_estate_privilege = estate_orcish_recruitment_13}
		mil_tech_11_flag = {set_estate_privilege = estate_orcish_recruitment_11}
		mil_tech_8_flag = {set_estate_privilege = estate_orcish_recruitment_8}
		mil_tech_7_flag = {set_estate_privilege = estate_orcish_recruitment_7}
		mil_tech_6_flag = {set_estate_privilege = estate_orcish_recruitment_6}
		mil_tech_5_flag = {set_estate_privilege = estate_orcish_recruitment_5}
		mil_tech_2_flag = {set_estate_privilege = estate_orcish_recruitment_2}
		mil_tech_1_flag = {set_estate_privilege = estate_orcish_recruitment}
	}
}
update_goblin_recruitment = {
	trigger_switch = {
		on_trigger = has_country_flag
		mil_tech_32_flag = {set_estate_privilege = estate_goblin_recruitment_32}
		mil_tech_31_flag = {set_estate_privilege = estate_goblin_recruitment_31}
		mil_tech_28_flag = {set_estate_privilege = estate_goblin_recruitment_28}
		mil_tech_27_flag = {set_estate_privilege = estate_goblin_recruitment_27}
		mil_tech_25_flag = {set_estate_privilege = estate_goblin_recruitment_25}
		mil_tech_22_flag = {set_estate_privilege = estate_goblin_recruitment_22}
		mil_tech_21_flag = {set_estate_privilege = estate_goblin_recruitment_21}
		mil_tech_20_flag = {set_estate_privilege = estate_goblin_recruitment_20}
		mil_tech_16_flag = {set_estate_privilege = estate_goblin_recruitment_16}
		mil_tech_14_flag = {set_estate_privilege = estate_goblin_recruitment_14}
		mil_tech_13_flag = {set_estate_privilege = estate_goblin_recruitment_13}
		mil_tech_11_flag = {set_estate_privilege = estate_goblin_recruitment_11}
		mil_tech_8_flag = {set_estate_privilege = estate_goblin_recruitment_8}
		mil_tech_7_flag = {set_estate_privilege = estate_goblin_recruitment_7}
		mil_tech_6_flag = {set_estate_privilege = estate_goblin_recruitment_6}
		mil_tech_5_flag = {set_estate_privilege = estate_goblin_recruitment_5}
		mil_tech_2_flag = {set_estate_privilege = estate_goblin_recruitment_2}
		mil_tech_1_flag = {set_estate_privilege = estate_goblin_recruitment}
	}
}
update_ogre_recruitment = {
	trigger_switch = {
		on_trigger = has_country_flag
		mil_tech_32_flag = {set_estate_privilege = estate_ogre_recruitment_32}
		mil_tech_31_flag = {set_estate_privilege = estate_ogre_recruitment_31}
		mil_tech_30_flag = {set_estate_privilege = estate_ogre_recruitment_30}
		mil_tech_28_flag = {set_estate_privilege = estate_ogre_recruitment_28}
		mil_tech_27_flag = {set_estate_privilege = estate_ogre_recruitment_27}
		mil_tech_25_flag = {set_estate_privilege = estate_ogre_recruitment_25}
		mil_tech_23_flag = {set_estate_privilege = estate_ogre_recruitment_23}
		mil_tech_22_flag = {set_estate_privilege = estate_ogre_recruitment_22}
		mil_tech_21_flag = {set_estate_privilege = estate_ogre_recruitment_21}
		mil_tech_20_flag = {set_estate_privilege = estate_ogre_recruitment_20}
		mil_tech_19_flag = {set_estate_privilege = estate_ogre_recruitment_19}
		mil_tech_16_flag = {set_estate_privilege = estate_ogre_recruitment_16}
		mil_tech_15_flag = {set_estate_privilege = estate_ogre_recruitment_15}
		mil_tech_14_flag = {set_estate_privilege = estate_ogre_recruitment_14}
		mil_tech_13_flag = {set_estate_privilege = estate_ogre_recruitment_13}
		mil_tech_12_flag = {set_estate_privilege = estate_ogre_recruitment_12}
		mil_tech_11_flag = {set_estate_privilege = estate_ogre_recruitment_11}
		mil_tech_9_flag = {set_estate_privilege = estate_ogre_recruitment_9}
		mil_tech_8_flag = {set_estate_privilege = estate_ogre_recruitment_8}
		mil_tech_7_flag = {set_estate_privilege = estate_ogre_recruitment_7}
		mil_tech_6_flag = {set_estate_privilege = estate_ogre_recruitment_6}
		mil_tech_5_flag = {set_estate_privilege = estate_ogre_recruitment_5}
		mil_tech_4_flag = {set_estate_privilege = estate_ogre_recruitment_4}
		mil_tech_2_flag = {set_estate_privilege = estate_ogre_recruitment_2}
		mil_tech_1_flag = {set_estate_privilege = estate_ogre_recruitment}
	}
}
update_centaur_recruitment = {
	trigger_switch = {
		on_trigger = has_country_flag		
		mil_tech_32_flag = {set_estate_privilege = estate_centaur_recruitment_32}
		mil_tech_29_flag = {set_estate_privilege = estate_centaur_recruitment_29}
		mil_tech_25_flag = {set_estate_privilege = estate_centaur_recruitment_25}
		mil_tech_22_flag = {set_estate_privilege = estate_centaur_recruitment_22}
		mil_tech_21_flag = {set_estate_privilege = estate_centaur_recruitment_21}
		mil_tech_17_flag = {set_estate_privilege = estate_centaur_recruitment_17}
		mil_tech_16_flag = {set_estate_privilege = estate_centaur_recruitment_16}
		mil_tech_13_flag = {set_estate_privilege = estate_centaur_recruitment_13}
		mil_tech_9_flag = {set_estate_privilege = estate_centaur_recruitment_9}
		mil_tech_7_flag = {set_estate_privilege = estate_centaur_recruitment_7}
		mil_tech_5_flag = {set_estate_privilege = estate_centaur_recruitment_5}
		mil_tech_2_flag = {set_estate_privilege = estate_centaur_recruitment_2}
		mil_tech_1_flag = {set_estate_privilege = estate_centaur_recruitment}
	}
}
update_harpy_recruitment = {
	set_estate_privilege = estate_harpy_recruitment
}
update_troll_recruitment = {
	trigger_switch = {
		on_trigger = has_country_flag		
		mil_tech_32_flag = {set_estate_privilege = estate_troll_recruitment_32}
		mil_tech_31_flag = {set_estate_privilege = estate_troll_recruitment_31}
		mil_tech_30_flag = {set_estate_privilege = estate_troll_recruitment_30}
		mil_tech_28_flag = {set_estate_privilege = estate_troll_recruitment_28}
		mil_tech_27_flag = {set_estate_privilege = estate_troll_recruitment_27}
		mil_tech_24_flag = {set_estate_privilege = estate_troll_recruitment_24}
		mil_tech_23_flag = {set_estate_privilege = estate_troll_recruitment_23}
		mil_tech_21_flag = {set_estate_privilege = estate_troll_recruitment_21}
		mil_tech_20_flag = {set_estate_privilege = estate_troll_recruitment_20}
		mil_tech_19_flag = {set_estate_privilege = estate_troll_recruitment_19}
		mil_tech_15_flag = {set_estate_privilege = estate_troll_recruitment_15}
		mil_tech_14_flag = {set_estate_privilege = estate_troll_recruitment_14}
		mil_tech_12_flag = {set_estate_privilege = estate_troll_recruitment_12}
		mil_tech_11_flag = {set_estate_privilege = estate_troll_recruitment_11}
		mil_tech_9_flag = {set_estate_privilege = estate_troll_recruitment_9}
		mil_tech_8_flag = {set_estate_privilege = estate_troll_recruitment_8}
		mil_tech_7_flag = {set_estate_privilege = estate_troll_recruitment_7}
		mil_tech_6_flag = {set_estate_privilege = estate_troll_recruitment_6}
		mil_tech_5_flag = {set_estate_privilege = estate_troll_recruitment_5}
		mil_tech_4_flag = {set_estate_privilege = estate_troll_recruitment_4}
		mil_tech_2_flag = {set_estate_privilege = estate_troll_recruitment_2}
		mil_tech_1_flag = {set_estate_privilege = estate_troll_recruitment}
	}
}
update_half_orcish_recruitment = {
	set_estate_privilege = estate_half_orcish_recruitment
}
update_half_elven_recruitment = {
	set_estate_privilege = estate_half_elven_recruitment
}
update_hobgoblin_recruitment = {
	set_estate_privilege = estate_hobgoblin_recruitment
}
update_kobold_recruitment = {
	trigger_switch = {
		on_trigger = has_country_flag
		mil_tech_32_flag = {set_estate_privilege = estate_kobold_recruitment_32}
		mil_tech_31_flag = {set_estate_privilege = estate_kobold_recruitment_31}
		mil_tech_28_flag = {set_estate_privilege = estate_kobold_recruitment_28}
		mil_tech_27_flag = {set_estate_privilege = estate_kobold_recruitment_27}
		mil_tech_25_flag = {set_estate_privilege = estate_kobold_recruitment_25}
		mil_tech_22_flag = {set_estate_privilege = estate_kobold_recruitment_22}
		mil_tech_21_flag = {set_estate_privilege = estate_kobold_recruitment_21}
		mil_tech_20_flag = {set_estate_privilege = estate_kobold_recruitment_20}
		mil_tech_16_flag = {set_estate_privilege = estate_kobold_recruitment_16}
		mil_tech_14_flag = {set_estate_privilege = estate_kobold_recruitment_14}
		mil_tech_13_flag = {set_estate_privilege = estate_kobold_recruitment_13}
		mil_tech_11_flag = {set_estate_privilege = estate_kobold_recruitment_11}
		mil_tech_8_flag = {set_estate_privilege = estate_kobold_recruitment_8}
		mil_tech_7_flag = {set_estate_privilege = estate_kobold_recruitment_7}
		mil_tech_6_flag = {set_estate_privilege = estate_kobold_recruitment_6}
		mil_tech_5_flag = {set_estate_privilege = estate_kobold_recruitment_5}
		mil_tech_2_flag = {set_estate_privilege = estate_kobold_recruitment_2}
		mil_tech_1_flag = {set_estate_privilege = estate_kobold_recruitment}
	}
}
update_tech_flag = {
	tech_flag_per_tech = {value = 32}
	tech_flag_per_tech = {value = 31}
	tech_flag_per_tech = {value = 30}
	tech_flag_per_tech = {value = 29}
	tech_flag_per_tech = {value = 28}
	tech_flag_per_tech = {value = 27}
	tech_flag_per_tech = {value = 26}
	tech_flag_per_tech = {value = 25}
	tech_flag_per_tech = {value = 24}
	tech_flag_per_tech = {value = 23}
	tech_flag_per_tech = {value = 22}
	tech_flag_per_tech = {value = 21}
	tech_flag_per_tech = {value = 20}
	tech_flag_per_tech = {value = 19}
	tech_flag_per_tech = {value = 18}
	tech_flag_per_tech = {value = 17}
	tech_flag_per_tech = {value = 16}
	tech_flag_per_tech = {value = 15}
	tech_flag_per_tech = {value = 14}
	tech_flag_per_tech = {value = 13}
	tech_flag_per_tech = {value = 12}
	tech_flag_per_tech = {value = 11}
	tech_flag_per_tech = {value = 10}
	tech_flag_per_tech = {value = 9}
	tech_flag_per_tech = {value = 8}
	tech_flag_per_tech = {value = 7}
	tech_flag_per_tech = {value = 6}
	tech_flag_per_tech = {value = 5}
	tech_flag_per_tech = {value = 4}
	tech_flag_per_tech = {value = 3}
	tech_flag_per_tech = {value = 2}
	tech_flag_per_tech = {value = 1}
}
tech_flag_per_tech = {
	if = {
		limit = {
			mil_tech = $value$
			NOT = {has_country_flag = mil_tech_$value$_flag}
		}
		set_country_flag = mil_tech_$value$_flag
	}
}
get_special_general_stats = {
	set_variable = {which = country_leader_total_var value = 0}
	set_variable = {which = country_leader_shock_var value = 0}
	set_variable = {which = country_leader_fire_var value = 0}
	set_variable = {which = country_leader_manuever_var value = 0}
	set_variable = {which = country_leader_siege_var value = 0}
	export_to_variable = {which = country_leader_shock_var value = modifier:leader_land_shock}
	export_to_variable = {which = country_leader_fire_var value = modifier:leader_land_fire}
	export_to_variable = {which = country_leader_manuever_var value = modifier:leader_land_manuever}
	export_to_variable = {which = country_leader_siege_var value = modifier:leader_siege}

	if = {
		limit = {army_tradition = 95}
		change_variable = {which = country_leader_shock_var value = 1}
		change_variable = {which = country_leader_fire_var value = 1}
		change_variable = {which = country_leader_manuever_var value = 1}
		change_variable = {which = country_leader_siege_var value = 1}
	}
	if = {
		limit = {army_tradition = 75}
		change_variable = {which = country_leader_shock_var value = 1}
		change_variable = {which = country_leader_fire_var value = 1}
		change_variable = {which = country_leader_manuever_var value = 1}
		change_variable = {which = country_leader_siege_var value = 1}
	}
	if = {
		limit = {army_tradition = 50}
		change_variable = {which = country_leader_shock_var value = 1}
		change_variable = {which = country_leader_fire_var value = 1}
		change_variable = {which = country_leader_manuever_var value = 1}
		change_variable = {which = country_leader_siege_var value = 1}
	}
	if = {
		limit = {army_tradition = 25}
		change_variable = {which = country_leader_shock_var value = 1}
		change_variable = {which = country_leader_fire_var value = 1}
		change_variable = {which = country_leader_manuever_var value = 1}
		change_variable = {which = country_leader_siege_var value = 1}
	}
	if = {
		limit = {has_government_attribute = generals_become_rulers}
		change_variable = {which = country_leader_shock_var value = 1}
		change_variable = {which = country_leader_fire_var value = 1}
		change_variable = {which = country_leader_manuever_var value = 1}
	}
	if = {
		limit = {has_country_flag = get_sword_wielder_general_flag}
		if = {
			limit = {army_tradition = 95}
			change_variable = {which = country_leader_shock_var value = 1}
			change_variable = {which = country_leader_fire_var value = 1}
			change_variable = {which = country_leader_manuever_var value = 1}
		}
		if = {
			limit = {army_tradition = 75}
			change_variable = {which = country_leader_shock_var value = 1}
			change_variable = {which = country_leader_fire_var value = 1}
			change_variable = {which = country_leader_manuever_var value = 1}
		}
		if = {
			limit = {army_tradition = 50}
			change_variable = {which = country_leader_shock_var value = 1}
			change_variable = {which = country_leader_fire_var value = 1}
			change_variable = {which = country_leader_manuever_var value = 1}
		}
		if = {
			limit = {army_tradition = 25}
			change_variable = {which = country_leader_shock_var value = 1}
			change_variable = {which = country_leader_fire_var value = 1}
			change_variable = {which = country_leader_manuever_var value = 1}
		}
	}
	if = {
		limit = {has_country_flag = get_ruler_general_flag}
		export_variable = { which = ruler_mil value = mil }
		while = {	#+2 pip per mil skill
			limit = { check_variable = { which = ruler_mil value = 1 } }
			change_variable = {which = ruler_mil value = -1}
			random_list = {
				50 = {change_variable = {which = country_leader_fire_var value = 1}}
				50 = {change_variable = {which = country_leader_shock_var value = 1}}
				50 = {change_variable = {which = country_leader_manuever_var value = 1}}
			}
			random_list = {
				50 = {change_variable = {which = country_leader_fire_var value = 1}}
				50 = {change_variable = {which = country_leader_shock_var value = 1}}
				50 = {change_variable = {which = country_leader_manuever_var value = 1}}
			}
		}
		if = {
			limit = {ruler_has_personality = mage_personality}
			change_variable = {which = country_leader_shock_var value = 3}
		}
	}

	if = {
		limit = {has_country_flag = get_adventurer_flag}
		if = {
			limit = {has_country_modifier = great_ording_unsung_heroes }
			change_variable = {which = country_leader_shock_var value = 1}
			change_variable = {which = country_leader_manuever_var value = 1}
		}
		if = {
			limit = {estate_influence = {estate = estate_adventurers influence = 90}}
			change_variable = {which = country_leader_fire_var value = 1}
			change_variable = {which = country_leader_shock_var value = 1}
			change_variable = {which = country_leader_manuever_var value = 1}
		}
		if = {
			limit = {estate_influence = {estate = estate_adventurers influence = 60}}
			change_variable = {which = country_leader_fire_var value = 1}
			change_variable = {which = country_leader_shock_var value = 1}
			change_variable = {which = country_leader_manuever_var value = 1}
		}
		if = {
			limit = {estate_influence = {estate = estate_adventurers influence = 30}}
			change_variable = {which = country_leader_fire_var value = 1}
			change_variable = {which = country_leader_shock_var value = 1}
			change_variable = {which = country_leader_manuever_var value = 1}
		}
		if = {
			limit = {has_estate_privilege = estate_adventurers_heroes_in_the_army }
			change_variable = {which = country_leader_fire_var value = 1}
			change_variable = {which = country_leader_shock_var value = 1}
			change_variable = {which = country_leader_manuever_var value = 1}
		}
	}
	else_if = {
		limit = {has_country_flag = get_mage_flag}
		if = {
			limit = {
				OR = {
					has_country_flag = magisterium_general_flag
					has_government_attribute = is_magocracy
				}
			}
			change_variable = {which = country_leader_shock_var value = 1}
			change_variable = {which = country_leader_fire_var value = 1}
		}
		if = {
			limit = {
				has_country_flag = magisterium_free_general_flag
			}
			change_variable = {which = country_leader_fire_var value = 1}
			change_variable = {which = country_leader_shock_var value = 1}
		}
		if = {
			limit = {has_estate_privilege = estate_mages_battlemage_academies }
			change_variable = {which = country_leader_shock_var value = 1}
			change_variable = {which = country_leader_fire_var value = 1}
			change_variable = {which = country_leader_manuever_var value = 1}
		}
		if = {
			limit = {has_estate_privilege = estate_magisterium_battlemages }
			change_variable = {which = country_leader_shock_var value = 1}
			change_variable = {which = country_leader_fire_var value = 1}
			change_variable = {which = country_leader_manuever_var value = 1}
		}
		if = {
			limit = {has_estate_privilege = estate_mages_fire_academy }
			change_variable = {which = country_leader_fire_var value = 1}
		}
		if = {
			limit = {
				OR = {
					has_estate_privilege = estate_mages_water_academy
					has_estate_privilege = estate_mages_air_academy
					has_estate_privilege = estate_mages_earth_academy
					has_estate_privilege = estate_mages_divination_academy
					has_estate_privilege = estate_mages_necromancy_academy
					has_estate_privilege = estate_mages_conjuration_academy
					has_estate_privilege = estate_mages_enchantment_academy
				}
			}
			change_variable = {which = country_leader_shock_var value = 1}
		}
		if = {
			limit = {has_estate_privilege = estate_mages_water_academy }
			change_variable = {which = country_leader_manuever_var value = 1}
		}
		if = {
			limit = {estate_influence = {estate = estate_mages influence = 100}}
			change_variable = {which = country_leader_shock_var value = 1}
		}
		if = {
			limit = {estate_influence = {estate = estate_mages influence = 80}}
			change_variable = {which = country_leader_shock_var value = 1}
		}
		if = {
			limit = {estate_influence = {estate = estate_mages influence = 60}}
			change_variable = {which = country_leader_shock_var value = 1}
		}
		if = {
			limit = {estate_influence = {estate = estate_mages influence = 40}}
			change_variable = {which = country_leader_shock_var value = 1}
		}
		if = {
			limit = {estate_influence = {estate = estate_mages influence = 20}}
			change_variable = {which = country_leader_shock_var value = 1}
		}
	}
	else_if = {
		limit = {has_country_flag = get_artificer_flag}
		if = {
			limit = {estate_influence = {estate = estate_artificers influence = 100}}
			change_variable = {which = country_leader_fire_var value = 1}
		}
		if = {
			limit = {estate_influence = {estate = estate_artificers influence = 80}}
			change_variable = {which = country_leader_fire_var value = 1}
		}
		if = {
			limit = {estate_influence = {estate = estate_artificers influence = 60}}
			change_variable = {which = country_leader_fire_var value = 1}
		}
		if = {
			limit = {estate_influence = {estate = estate_artificers influence = 40}}
			change_variable = {which = country_leader_fire_var value = 1}
		}
		if = {
			limit = {estate_influence = {estate = estate_artificers influence = 20}}
			change_variable = {which = country_leader_fire_var value = 1}
		}
	}
	else_if = {
		limit = {has_country_flag = get_lord_alfonso_flag }
		set_variable = {which = country_leader_lord_alfonso_shock_var value = 0}
		set_variable = {which = country_leader_lord_alfonso_fire_var value = 3}
		set_variable = {which = country_leader_lord_alfonso_manuever_var value = 2}
		set_variable = {which = country_leader_lord_alfonso_siege_var value = 0}
		change_variable = {which = lord_alfonso value = 2}
		while = {
			limit = {check_variable = {which = lord_alfonso which = country_leader_lord_alfonso_shock_var}}
			change_variable = {which = country_leader_lord_alfonso_shock_var value = 5}
			change_variable = {which = country_leader_shock_var value = 1}
		}
		while = {
			limit = {check_variable = {which = lord_alfonso which = country_leader_lord_alfonso_fire_var}}
			change_variable = {which = country_leader_lord_alfonso_fire_var value = 5}
			change_variable = {which = country_leader_fire_var value = 1}
		}
		while = {
			limit = {check_variable = {which = lord_alfonso which = country_leader_lord_alfonso_manuever_var}}
			change_variable = {which = country_leader_lord_alfonso_manuever_var value = 4}
			change_variable = {which = country_leader_manuever_var value = 1}
		}
	}
	else_if = {
		limit = {has_country_flag = ShaggtFiremouth_flag}
		change_variable = {which = country_leader_fire_var value = 7}
		change_variable = {which = country_leader_manuever_var value = 1}
	}
	else_if = {
		limit = {has_country_flag = KrambruStrongarm_flag}
		change_variable = {which = country_leader_shock_var value = 7}
		change_variable = {which = country_leader_manuever_var value = 2}
	}
	else_if = {
		limit = {has_country_flag = LutgorTheReaver_flag}
		change_variable = {which = country_leader_fire_var value = 4}
		change_variable = {which = country_leader_shock_var value = 4}
	}
	else_if = {
		limit = {has_country_flag = Zathnar_longlegged_flag}
		change_variable = {which = country_leader_shock_var value = 6}
		change_variable = {which = country_leader_fire_var value = 2}
		change_variable = {which = country_leader_manuever_var value = 4}
	}
	else_if = {
		limit = {has_country_flag = DrogoTheGreat_flag}
		change_variable = {which = country_leader_fire_var value = 4}
		change_variable = {which = country_leader_shock_var value = 4}
		change_variable = {which = country_leader_manuever_var value = 1}
	}
	else_if = {
		limit = {has_country_flag = PegthusTheWinged_flag}
		change_variable = {which = country_leader_fire_var value = 6}
		change_variable = {which = country_leader_shock_var value = 2}
		change_variable = {which = country_leader_manuever_var value = 3}
	}
	else_if = {
		limit = {has_country_flag = KruthnuTheBrawl_flag}
		change_variable = {which = country_leader_shock_var value = 7}
	}
	else_if = {
		limit = {has_country_flag = Carl_The_Loony_flag}
		change_variable = {which = country_leader_fire_var value = 5}
		change_variable = {which = country_leader_shock_var value = 3}
	}
	else_if = {
		limit = {has_country_flag = MikeTheBrainy_flag}
		change_variable = {which = country_leader_fire_var value = 4}
		change_variable = {which = country_leader_shock_var value = 4}
		change_variable = {which = country_leader_manuever_var value = 2}
	}
	else_if = {
		limit = {has_country_flag = JonhyTheFat_flag}
		change_variable = {which = country_leader_shock_var value = 7}
	}
	else_if = {
		limit = {has_country_flag = McGregorTheBully_flag}
		change_variable = {which = country_leader_fire_var value = 3}
		change_variable = {which = country_leader_shock_var value = 5}
		change_variable = {which = country_leader_manuever_var value = 1}
	}

	while = {	#change excess siege
		limit = { check_variable = { which = country_leader_siege_var value = 11 } }
		change_variable = {which = country_leader_siege_var value = -1}
		random_list = {
			50 = {
				change_variable = {which = country_leader_fire_var value = 1}
			}
			50 = {
				change_variable = {which = country_leader_shock_var value = 1}
			}
			50 = {
				change_variable = {which = country_leader_manuever_var value = 1}
			}
		}
	}
	while = {	#change excess manuever
		limit = { check_variable = { which = country_leader_manuever_var value = 16 } }
		change_variable = {which = country_leader_manuever_var value = -1}
		random_list = {
			50 = {
				change_variable = {which = country_leader_fire_var value = 1}
			}
			50 = {
				change_variable = {which = country_leader_shock_var value = 1}
			}
		}
	}
	while = {	#change excess shock
		limit = { check_variable = { which = country_leader_shock_var value = 26 } }
		change_variable = {which = country_leader_shock_var value = -1}
		change_variable = {which = country_leader_fire_var value = 1}
	}
	while = {	#change excess fire
		limit = { check_variable = { which = country_leader_fire_var value = 26 } }
		change_variable = {which = country_leader_fire_var value = -1}
		change_variable = {which = country_leader_shock_var value = 1}
	}
	while = {	#remove excess shock
		limit = { check_variable = { which = country_leader_shock_var value = 26 } }
		add_prestige_or_monarch_power = {amount =  5}
	}

	change_variable = {which = country_leader_total_var which = country_leader_shock_var}
	change_variable = {which = country_leader_total_var which = country_leader_fire_var}
	change_variable = {which = country_leader_total_var which = country_leader_manuever_var}
	change_variable = {which = country_leader_total_var which = country_leader_siege_var}

	set_variable = {which = special_general_cost value = 2}
	if = {
		limit = {
			OR = {
				has_country_flag = hero_free_general_flag
				has_country_flag = magisterium_free_general_flag
				has_government_attribute = free_magic_commander
			}
		}
		set_variable = {which = special_general_cost value = 0}
		set_variable = {which = special_general_cost_tt value = 0}
	}
	else = {
		change_variable = {which = special_general_cost which = country_leader_shock_var}
		change_variable = {which = special_general_cost which = country_leader_fire_var}
		change_variable = {which = special_general_cost which = country_leader_manuever_var}
		change_variable = {which = special_general_cost which = country_leader_siege_var}
		
		set_variable = {which = general_cost_var value = 0}
		set_variable = {which = all_power_cost_var value = 0}
		export_to_variable = {which = general_cost_var value = modifier:general_cost}
		export_to_variable = {which = all_power_cost_var value = modifier:all_power_cost}
		change_variable = {which = general_cost_var which = all_power_cost_var}
		change_variable = {which = general_cost_var value = 1}
		multiply_variable = {which = special_general_cost which = general_cost_var}

		set_variable = {which = special_general_cost_tt value = -5}
		multiply_variable = {which = special_general_cost_tt which = special_general_cost}
		if = {
			limit = {
				has_government_attribute = is_magocracy
			}
			divide_variable = {which = special_general_cost value = 2}
			divide_variable = {which = special_general_cost_tt value = 2}
		}
	}
}
get_improved_general = {
	improved_general_cost = yes
	general_defined_shock = yes
}
improved_general_cost = {
	hidden_effect = {
		set_variable = {which = cicles_var value = 1}

		while = {
			limit = {check_variable = {which = special_general_cost which = cicles_var}}
			change_variable = {which = cicles_var value = 1}
			add_mil_power = -5
		}
	}
}
general_defined_shock = {
	if = { limit = {check_variable = {which = country_leader_shock_var value = 25} } general_defined_fire = { shock = 25}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 24} } general_defined_fire = { shock = 24}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 23} } general_defined_fire = { shock = 23}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 22} } general_defined_fire = { shock = 22}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 21} } general_defined_fire = { shock = 21}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 20} } general_defined_fire = { shock = 20}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 19} } general_defined_fire = { shock = 19}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 18} } general_defined_fire = { shock = 18}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 17} } general_defined_fire = { shock = 17}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 16} } general_defined_fire = { shock = 16}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 15} } general_defined_fire = { shock = 15}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 14} } general_defined_fire = { shock = 14}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 13} } general_defined_fire = { shock = 13}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 12} } general_defined_fire = { shock = 12}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 11} } general_defined_fire = { shock = 11}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 10} } general_defined_fire = { shock = 10}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 9} } general_defined_fire = { shock = 9}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 8} } general_defined_fire = { shock = 8}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 7} } general_defined_fire = { shock = 7}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 6} } general_defined_fire = { shock = 6}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 5} } general_defined_fire = { shock = 5}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 4} } general_defined_fire = { shock = 4}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 3} } general_defined_fire = { shock = 3}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 2} } general_defined_fire = { shock = 2}}
	else_if = { limit = {check_variable = {which = country_leader_shock_var value = 1} } general_defined_fire = { shock = 1}}
	else = { general_defined_fire = { shock = 0}}
}
general_defined_fire = {
	if = { limit = {check_variable = {which = country_leader_fire_var value = 25} } general_defined_manuever = { shock = $shock$ fire = 25}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 24} } general_defined_manuever = { shock = $shock$ fire = 24}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 23} } general_defined_manuever = { shock = $shock$ fire = 23}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 22} } general_defined_manuever = { shock = $shock$ fire = 22}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 21} } general_defined_manuever = { shock = $shock$ fire = 21}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 20} } general_defined_manuever = { shock = $shock$ fire = 20}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 19} } general_defined_manuever = { shock = $shock$ fire = 19}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 18} } general_defined_manuever = { shock = $shock$ fire = 18}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 17} } general_defined_manuever = { shock = $shock$ fire = 17}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 16} } general_defined_manuever = { shock = $shock$ fire = 16}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 15} } general_defined_manuever = { shock = $shock$ fire = 15}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 14} } general_defined_manuever = { shock = $shock$ fire = 14}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 13} } general_defined_manuever = { shock = $shock$ fire = 13}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 12} } general_defined_manuever = { shock = $shock$ fire = 12}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 11} } general_defined_manuever = { shock = $shock$ fire = 11}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 10} } general_defined_manuever = { shock = $shock$ fire = 10}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 9} } general_defined_manuever = { shock = $shock$ fire = 9}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 8} } general_defined_manuever = { shock = $shock$ fire = 8}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 7} } general_defined_manuever = { shock = $shock$ fire = 7}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 6} } general_defined_manuever = { shock = $shock$ fire = 6}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 5} } general_defined_manuever = { shock = $shock$ fire = 5}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 4} } general_defined_manuever = { shock = $shock$ fire = 4}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 3} } general_defined_manuever = { shock = $shock$ fire = 3}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 2} } general_defined_manuever = { shock = $shock$ fire = 2}}
	else_if = { limit = {check_variable = {which = country_leader_fire_var value = 1} } general_defined_manuever = { shock = $shock$ fire = 1}}
	else = { general_defined_manuever = { shock = $shock$ fire = 0}}
}
general_defined_manuever = {
	if = { limit = {check_variable = {which = country_leader_manuever_var value = 15} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 15}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 14} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 14}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 13} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 13}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 12} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 12}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 11} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 11}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 10} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 10}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 9} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 9}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 8} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 8}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 7} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 7}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 6} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 6}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 5} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 5}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 4} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 4}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 3} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 3}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 2} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 2}}
	else_if = { limit = {check_variable = {which = country_leader_manuever_var value = 1} } general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 1}}
	else = { general_defined_siege = { shock = $shock$ fire = $fire$ manuever = 0}}
}
general_defined_siege = {
	if = { limit = {check_variable = {which = country_leader_siege_var value = 10} } define_special_general = { shock = $shock$ fire = $fire$ manuever = $manuever$ siege = 10}}
	else_if = { limit = {check_variable = {which = country_leader_siege_var value = 9} } define_special_general = { shock = $shock$ fire = $fire$ manuever = $manuever$ siege = 9}}
	else_if = { limit = {check_variable = {which = country_leader_siege_var value = 8} } define_special_general = { shock = $shock$ fire = $fire$ manuever = $manuever$ siege = 8}}
	else_if = { limit = {check_variable = {which = country_leader_siege_var value = 7} } define_special_general = { shock = $shock$ fire = $fire$ manuever = $manuever$ siege = 7}}
	else_if = { limit = {check_variable = {which = country_leader_siege_var value = 6} } define_special_general = { shock = $shock$ fire = $fire$ manuever = $manuever$ siege = 6}}
	else_if = { limit = {check_variable = {which = country_leader_siege_var value = 5} } define_special_general = { shock = $shock$ fire = $fire$ manuever = $manuever$ siege = 5}}
	else_if = { limit = {check_variable = {which = country_leader_siege_var value = 4} } define_special_general = { shock = $shock$ fire = $fire$ manuever = $manuever$ siege = 4}}
	else_if = { limit = {check_variable = {which = country_leader_siege_var value = 3} } define_special_general = { shock = $shock$ fire = $fire$ manuever = $manuever$ siege = 3}}
	else_if = { limit = {check_variable = {which = country_leader_siege_var value = 2} } define_special_general = { shock = $shock$ fire = $fire$ manuever = $manuever$ siege = 2}}
	else_if = { limit = {check_variable = {which = country_leader_siege_var value = 1} } define_special_general = { shock = $shock$ fire = $fire$ manuever = $manuever$ siege = 1}}
	else = { define_special_general = { shock = $shock$ fire = $fire$ manuever = $manuever$ siege = 0}}
}
define_special_general = {
	event_target:get_general_event_target = {
		if = {
			limit = {has_country_flag = get_ruler_general_flag}
			define_ruler_to_general = {shock = $shock$ fire = $fire$ manuever = $manuever$ siege = $siege$ }
		}
		else = {
			define_general = {shock = $shock$ fire = $fire$ manuever = $manuever$ siege = $siege$ name = special_general_name }
		}
	}
}
clr_special_general_flags = {
	clr_country_flag = get_adventurer_flag
	clr_country_flag = get_mage_flag
	clr_country_flag = get_artificer_flag
	clr_country_flag = ShaggtFiremouth_flag
	clr_country_flag = Zathnar_longlegged_flag
	clr_country_flag = Carl_The_Loony_flag
	clr_country_flag = KrambruStrongarm_flag
	clr_country_flag = DrogoTheGreat_flag
	clr_country_flag = MikeTheBrainy_flag
	clr_country_flag = LutgorTheReaver_flag
	clr_country_flag = PegthusTheWinged_flag
	clr_country_flag = JonhyTheFat_flag
	clr_country_flag = KruthnuTheBrawl_flag
	clr_country_flag = McGregorTheBully_flag
	clr_country_flag = magisterium_free_general_flag
	clr_country_flag = hero_free_general_flag
	clr_country_flag = magisterium_general_flag
	clr_country_flag = get_ruler_general_flag
	clr_country_flag = get_sword_wielder_general_flag
	clr_country_flag = get_lord_alfonso_flag
	clear_saved_name = special_general_name
}
update_tech_group = {
	if = {
		limit = {
			OR = {
				estate_territory = {estate = estate_human territory = 50.1}
				AND = {
					estate_territory = {estate = estate_human territory = 30}
					estate_territory = {estate = estate_half_elven territory = 30}
					NOT = {estate_territory = {estate = estate_half_elven territory = 50.1}}
				}
				AND = {
					estate_territory = {estate = estate_human territory = 30}
					estate_territory = {estate = estate_half_orcish territory = 30}
					NOT = {estate_territory = {estate = estate_half_orcish territory = 50.1}}
				}
			}
		}
		if = { limit = { capital_scope = { superregion = bulwar_superregion} NOT = {unit_type = tech_bulwari} }
			change_unit_type = tech_bulwari
		}
		else_if = { limit = { capital_scope = { superregion = west_salahad_superregion} NOT = {unit_type = tech_salahadesi} }
			change_unit_type = tech_salahadesi
		}
		else_if = { limit = { capital_scope = { superregion = rahen_superregion} NOT = {unit_type = tech_raheni} }
			change_unit_type = tech_raheni
		}
		else_if = {
			limit = {
				OR = {
					capital_scope = { superregion = yanshen_superregion }
					capital_scope = { superregion = south_haless_superregion }
				}
				NOT = {unit_type = tech_halessi}
			}
			change_unit_type = tech_halessi
		}
		else_if = { limit = { capital_scope = { superregion = north_haless_superregion } NOT = {unit_type = tech_shuvuush} }
			change_unit_type = tech_shuvuush
		}
		else_if = { limit = { capital_scope = { superregion = forbidden_lands_superregion } NOT = {unit_type = tech_triunic} }
			change_unit_type = tech_triunic
		}
		else_if = { limit = { culture_group = gerudian NOT = {unit_type = tech_gerudian} }
			change_unit_type = tech_gerudian
		}
		else_if = {
			limit = {
				capital_scope = {
					NOT = {
						culture_group = gerudian
						superregion = north_haless_superregion 
						superregion = forbidden_lands_superregion 
						superregion = bulwar_superregion
						superregion = west_salahad_superregion
						superregion = rahen_superregion
						superregion = yanshen_superregion
						superregion = south_haless_superregion
					}
				}
				NOT = {unit_type = tech_cannorian}
			}
			change_unit_type = tech_cannorian
		}
		clear_racial_military = yes
		add_country_modifier = { name = human_military duration = -1 }
	}
	if = {
		limit = {
			OR = {
				estate_territory = {estate = estate_elven territory = 50.1}
				AND = {
					estate_territory = {estate = estate_elven territory = 30}
					estate_territory = {estate = estate_half_elven territory = 30}
					NOT = {estate_territory = {estate = estate_half_elven territory = 50.1}}
				}
			}
		}
		if = {
			limit = {
				OR = {
					capital_scope = { superregion = deepwoods_superregion }
					primary_culture = wood_elf
					AND = {
						accepted_culture = wood_elf
						NOT = { culture_group = elven }
					}
				}
				NOT = {unit_type = tech_wood_elf}
			}
			change_unit_type = tech_wood_elf
		}
		else_if = {
			limit = {
				NOT = {unit_type = tech_east_elven}
				OR = {
					primary_culture = sun_elf
					primary_culture = dawn_elf
					primary_culture = desert_elf
					primary_culture = sunrise_elf
					capital_scope = { continent = asia }
					capital_scope = { continent = africa }
					AND = {
						religion_group = bulwari
						OR = {
							capital_scope = { continent = north_america }
							capital_scope = { continent = south_america }
						}
					}
					AND = {
						accepted_culture = sun_elf
						NOT = { culture_group = elven }
					}
					AND = {
						accepted_culture = dawn_elf
						NOT = { culture_group = elven }
					}
					AND = {
						accepted_culture = desert_elf
						NOT = { culture_group = elven }
					}
					AND = {
						accepted_culture = sunrise_elf
						NOT = { culture_group = elven }
					}
				}
			}
			change_unit_type = tech_east_elven
		}
		else_if = {
			limit = { NOT = { primary_culture = wood_elf primary_culture = sun_elf primary_culture = dawn_elf primary_culture = desert_elf primary_culture = sunrise_elf} NOT = {unit_type = tech_elven}}
			change_unit_type = tech_elven
		}
		clear_racial_military = yes
		add_country_modifier = { name = elven_military duration = -1 }
	}
	if = {
		limit = {
			estate_territory = {estate = estate_dwarven territory = 50.1}
			NOT = {unit_type = tech_dwarven}
		}
		change_unit_type = tech_dwarven
		clear_racial_military = yes
		add_country_modifier = { name = dwarven_military duration = -1 }
	}
	if = {
		limit = {
			estate_territory = {estate = estate_halfling territory = 50.1}
			NOT = {unit_type = tech_halfling}
		}
		change_unit_type = tech_halfling
		clear_racial_military = yes
		add_country_modifier = { name = halfling_military duration = -1 }
	}
	if = {
		limit = {
			estate_territory = {estate = estate_gnomish territory = 50.1}
			NOT = {unit_type = tech_gnomish}
		}
		change_unit_type = tech_gnomish
		clear_racial_military = yes
		add_country_modifier = { name = gnomish_military duration = -1 }
	}
	if = {
		limit = {estate_territory = {estate = estate_harimari territory = 50.1}}
		if = {
			limit = {
				NOT = {unit_type = tech_east_harimari}
				OR = {
					capital_scope = { superregion = yanshen_superregion }
					capital_scope = { superregion = south_haless_superregion }
					capital_scope = { superregion = north_haless_superregion }
					primary_culture = east_harimari
					AND = {
						accepted_culture = east_harimari
						NOT = { culture_group = harimari }
					}
				}
			}
			change_unit_type = tech_east_harimari
		}
		else_if = {
			limit = { NOT = { primary_culture = east_harimari } NOT = {unit_type = tech_west_harimari}}
			change_unit_type = tech_west_harimari
		}
		clear_racial_military = yes
		add_country_modifier = { name = harimari_military duration = -1 }
	}
	if = {
		limit = {
			estate_territory = {estate = estate_gnollish territory = 50.1}
			NOT = {unit_type = tech_gnollish}
		}
		change_unit_type = tech_gnollish
		clear_racial_military = yes
		add_country_modifier = { name = gnollish_military duration = -1 }
	}
	if = {
		limit = {
			estate_territory = {estate = estate_ruinborn territory = 50.1}
		}
		if = { limit = { capital_scope = { superregion = ynn_superregion } NOT = {unit_type = tech_ynnic } }
			change_unit_type = tech_ynnic
		}
		else_if = { limit = { capital_scope = { superregion = eordand_superregion } NOT = {unit_type = tech_eordand } }
			change_unit_type = tech_eordand
		}
		else_if = { limit = { capital_scope = { superregion = kheionai_superregion } NOT = {unit_type = tech_kheionai } }
			change_unit_type = tech_kheionai
		}
		else_if = { limit = { capital_scope = { superregion = greater_taychend_superregion } NOT = {unit_type = tech_taychendi } }
			change_unit_type = tech_taychendi
		}
		else_if = {
			limit = {
				NOT = {unit_type = tech_noruin }
				OR = {
					capital_scope = { superregion = north_aelantir_superregion }
					capital_scope = { superregion = ruined_sea_superregion }
					capital_scope = { superregion = torn_sea_superregion }
				}
			}
			change_unit_type = tech_noruin
		}
		else_if = {
			limit = {
				NOT = {unit_type = tech_south_aelantiri }
				OR = {
					capital_scope = { superregion = south_aelantir_superregion }
					capital_scope = { superregion = effelai_superregion }
				}
			}
			change_unit_type = tech_south_aelantiri
		}
		clear_racial_military = yes
		add_country_modifier = { name = ruinborn_military duration = -1 }
	}
	if = {
		limit = {
			OR = {
				estate_territory = {estate = estate_orcish territory = 50.1}
				AND = {
					estate_territory = {estate = estate_orcish territory = 30}
					estate_territory = {estate = estate_half_orcish territory = 30}
					NOT = {estate_territory = {estate = estate_half_orcish territory = 50.1}}
				}
			}
		}
		if = {
			limit = {
				OR = {
					capital_scope = {continent = serpentspine}
					primary_culture = black_orc
					AND = {
						accepted_culture = black_orc
						NOT = { culture_group = orcish }
					}
				}
				NOT = {unit_type = tech_black_orcish }
			}
			change_unit_type = tech_black_orcish
		}
		else_if = {
			limit = {
				OR = {
					capital_scope = {
						continent = asia
						NOT = { superregion = forbidden_lands_superregion }
					}
					primary_culture = brown_orc
					AND = {
						accepted_culture = brown_orc
						NOT = { culture_group = orcish }
					}
				}
				NOT = {unit_type = tech_east_orcish }
			}
			change_unit_type = tech_east_orcish
		}
		else_if = {
			limit = { NOT = {primary_culture = brown_orc primary_culture = black_orc } NOT = {unit_type = tech_orcish }}
			change_unit_type = tech_orcish
		}
		clear_racial_military = yes
		add_country_modifier = { name = orcish_military duration = -1 }
	}
	if = {
		limit = {estate_territory = {estate = estate_goblin territory = 50.1}}
		if = {
			limit = {
				OR = {
					capital_scope = {continent = serpentspine}
					primary_culture = cave_goblin
					primary_culture = undergrowth_goblin
				}
				NOT = {unit_type = tech_cave_goblin }
			}
			change_unit_type = tech_cave_goblin
		}
		else_if = {
			limit = {
				OR = {
					primary_culture = exodus_goblin
					primary_culture = march_goblin
				}
				NOT = {unit_type = tech_exodus_goblin }
			}
			change_unit_type = tech_exodus_goblin
		}
		else_if = {
			limit = { NOT = { primary_culture = undergrowth_goblin primary_culture = cave_goblin primary_culture = exodus_goblin primary_culture = march_goblin} NOT = {unit_type = tech_goblin }}
			change_unit_type = tech_goblin
		}
		clear_racial_military = yes
		add_country_modifier = { name = goblin_military duration = -1 }
	}
	if = {
		limit = {
			estate_territory = {estate = estate_ogre territory = 50.1}
		}		
		if = {
			limit = {
				OR = {
					capital_scope = { superregion = yanshen_superregion }
					capital_scope = { superregion = south_haless_superregion }
					capital_scope = { superregion = north_haless_superregion }
					capital_scope = { superregion = rahen_superregion }
					primary_culture = horned_ogre
					AND = {
						accepted_culture = horned_ogre
						NOT = { culture_group = ogre }
					}
				}
				NOT = {unit_type = tech_eastern_ogre }
			}
			change_unit_type = tech_eastern_ogre
		}
		else_if = {
			limit = { NOT = { primary_culture = horned_ogre } NOT = {unit_type = tech_ogre }}
			change_unit_type = tech_ogre	#may need custom one
		}
		clear_racial_military = yes
		add_country_modifier = { name = ogre_military duration = -1 }
	}
	if = {
		limit = {
			estate_territory = {estate = estate_centaur territory = 50.1}
			NOT = {unit_type = tech_centaur }
		}
		change_unit_type = tech_centaur
		clear_racial_military = yes
		add_country_modifier = { name = centaur_military duration = -1 }
	}
	if = {
		limit = {
			estate_territory = {estate = estate_troll territory = 50.1}
			NOT = {unit_type = tech_troll }
		}
		change_unit_type = tech_troll
		clear_racial_military = yes
		add_country_modifier = { name = troll_military duration = -1 }
	}
	if = {
		limit = {estate_territory = {estate = estate_harpy territory = 50.1}}
		if = {
			limit = {
				OR = {
					capital_scope = { superregion = yanshen_superregion }
					capital_scope = { superregion = south_haless_superregion }
					capital_scope = { superregion = north_haless_superregion }
					primary_culture = feng_harpy
					AND = {
						accepted_culture = feng_harpy
						NOT = { culture_group = harpy }
					}
				}
				NOT = {unit_type = tech_east_harpy }
			}
			change_unit_type = tech_east_harpy
		}
		else_if = {
			limit = { NOT = { primary_culture = feng_harpy } NOT = {unit_type = tech_harpy }}
			change_unit_type = tech_harpy
		}
		clear_racial_military = yes		
		add_country_modifier = { name = harpy_military duration = -1 }
	}
	if = {
		limit = {
			estate_territory = {estate = estate_half_orcish territory = 50.1}
			NOT = {unit_type = tech_half_orcish }
		}
		change_unit_type = tech_half_orcish
		clear_racial_military = yes
		add_country_modifier = { name = half_orcish_military duration = -1 }
	}
	if = {
		limit = {
			estate_territory = {estate = estate_hobgoblin territory = 50.1}
			NOT = {unit_type = tech_hobgoblin }
		}
		change_unit_type = tech_hobgoblin
		clear_racial_military = yes
		add_country_modifier = { name = hobgoblin_military duration = -1 }
	}
	if = {
		limit = {estate_territory = {estate = estate_kobold territory = 50.1}}		
		if = {
			limit = {
				OR = {
					capital_scope = { superregion = yanshen_superregion }
					capital_scope = { superregion = south_haless_superregion }
					capital_scope = { superregion = north_haless_superregion }
					capital_scope = { superregion = rahen_superregion }
					primary_culture = goldscale_kobold
					AND = {
						accepted_culture = goldscale_kobold
						NOT = { culture_group = kobold }
					}
				}
				NOT = {unit_type = tech_east_kobold }
			}
			change_unit_type = tech_east_kobold
		}
		else_if = {
			limit = {  NOT = {primary_culture = goldscale_kobold } NOT = {unit_type = tech_kobold }}
			change_unit_type = tech_kobold
		}
		clear_racial_military = yes
		add_country_modifier = { name = kobold_military duration = -1 }
	}	
}