#Estate Privilege on_action effects are in 01_scripted_effects_for_estates.txt

on_new_monarch_effect = { #1.35
	if = {
		limit = {has_government_attribute = only_mage_rulers}
		add_ruler_personality = mage_personality
	}
	if = {
		limit = {
			has_consort_regency = no
			any_owned_province = { has_province_modifier = domain_of_spouses_family }
		}
		every_owned_province = {
			limit = { has_province_modifier = domain_of_spouses_family }
			remove_province_modifier = domain_of_spouses_family
		}
	}
	if = {
		limit = {
			has_consort_regency = no
			any_owned_province = { has_province_modifier = home_of_consort }
		}
		every_owned_province = {
			limit = { has_province_modifier = home_of_consort }
			remove_province_modifier = home_of_consort
		}
	}
	if = {
		limit = { has_any_heir_cult_active = yes }
		remove_heir_cult = yes
	}
	if = {
		limit = { has_government_attribute = absolutism_reduction_on_ruler_death }
		add_absolutism = -60
	}
	if = {
		limit = { has_government_attribute = civil_war_on_every_new_ruler }
		capital_scope = { spawn_rebels = { type = pretender_rebels size = 2 } }
	}
	if = {
		limit = {
			has_government_attribute = theocratic_monarchy_mechanic
		}
		#Setting it to 0
		change_statists_vs_orangists = -10
		change_statists_vs_orangists = 1
		if = {
			limit = { has_ruler_flag = monarchistic_heir }
			change_statists_vs_orangists = 0.25
		}
		if = {
			limit = { has_ruler_flag = theocratic_heir }
			change_statists_vs_orangists = -0.25
		}
		if = {
			limit = {
				has_government_attribute = theocratic_monarchy_mechanic
			}
			country_event = { id = flavor_sca.2 }
			country_event = { id = theocracy.1 days = 3 }
		}
	}
	if = {
		limit = {
			OR = {
				has_government_attribute = absolutism_reduction_on_ruler_death
				has_government_attribute = has_limited_terms
			}
		}
		set_variable = {
			which = election_term
			value = 1
		}
	}
}

succession_culture_religion_effect = {
	if = {
		limit = {
			NOT = { has_reform = elective_monarchy }
			NOT = { has_reform = polish_elective_monarchy } 
			has_regency = no
			NOT = { has_country_flag = had_culture_religion_reaction_event_flag }
			# NOT = { has_reform = mamluk_government }
			OR = {
				NOT = { ruler_culture = ROOT }
				NOT = { ruler_religion = ROOT }
			}
		}
		set_country_flag = had_culture_religion_reaction_event_flag #Note: Cleared in the event below, all future effects from ruler culture/religion are gated behind this flag being cleared.
		country_event = { id = culture_religion_events.2 days = 75 random = 7 }
	}
}

on_province_owner_change_government_effect = {
	if = {
		limit = {
			owner = { has_country_flag = phoenix_empire_the_sun_outshines_the_moon }
			culture = moon_elf
		}
		add_province_modifier = { name = phoenix_empire_the_sun_outshines_the_moon duration = -1 }
	}
	if = {
		limit = {
			owner = { has_country_flag = jaddari_remnant_dhenijansar_administration_flag }
			OR = { region = rakhadesh_region region = rahen_coast_region region = dhujat_region }
		}
		add_province_modifier = { name = jaddari_remnant_dhenijansar_administration duration = -1 hidden = yes }
	}
	if = {	#Seinathil Sheetmusic Bonuses
		limit = {
			NOT = { has_province_modifier = A90_sheet_music_1 }
			owner = { has_country_flag = seinathil_paper1 }
		}
		hidden_effect = {
			if = {
				limit = { trade_goods = paper }
				add_province_modifier = { name = A90_sheet_music_1 duration = -1 hidden = yes }
			}
		}
	}
	if = {	#Seinathil Sheetmusic Bonuses
		limit = {
			NOT = { has_province_modifier = A90_sheet_music_2 }
			owner = { has_country_flag = seinathil_paper2 }
		}
		hidden_effect = {
			if = {
				limit = { trade_goods = paper }
				add_province_modifier = { name = A90_sheet_music_2 duration = -1 hidden = yes }
			}
		}
	}
	if = {
		limit = {
			owner = { has_estate_privilege = artifice_invention_wine_ageifier }
			OR = {
				trade_goods = wine
				trade_goods = champagne
			}
		}
		hidden_effect = {
			add_province_modifier = { name = artifice_ageifier_bonus duration = -1 hidden = yes }
		}
	}
	if = {
		limit = {
			owner = { has_estate_privilege = artifice_invention_growth_beans }
			province_with_farm_goods = yes
		}
		hidden_effect = {
			add_province_modifier = { name = artifice_growthbeans_bonus duration = -1 hidden = yes }
		}
	}
	if = {
		limit = {
			owner = { has_estate_privilege = artifice_invention_gene_food_cultivation }
			province_with_farm_goods = yes
		}
		hidden_effect = {
			add_province_modifier = { name = artifice_gene_food_cultivation_bonus duration = -1 hidden = yes }
		}
	}
	if = {
		limit = {
			trade_goods = gems
			has_port = yes
			owner = { has_estate_privilege = artifice_invention_pearl_cultivators }
		}
		hidden_effect = {
			add_province_modifier = { name = artifice_pearl_cultivator_bonus duration = -1 hidden = yes }
		}
	}
	if = {
		limit = {
			province_group = hold_province
			owner = { has_estate_privilege = artifice_invention_superfast_elevators }
		}
		hidden_effect = {
			add_province_modifier = { name = artifice_superfast_elevators_bonus duration = -1 hidden = yes }
		}
	}
	if = {	#Harpy roosts
		limit = { has_province_modifier = harpy_roost }
		owner = {
			if = {
				limit = { has_country_modifier = harpy_administration }
				update_roost_count = yes
			}
			every_known_country = {
				limit = { has_country_modifier = harpy_administration }
				update_roost_count = yes
			}
		}
	}
	if = {	#reduced gov cost in capital region, adds modifier when gaining provinces in capital region
		limit = {
			owner = {
				has_government_attribute = lower_gov_cost_in_home_region
				ROOT = {
					region_for_scope_province = { is_capital_of = PREV }
					NOT = { has_province_modifier = lower_gov_cost_in_home_region_modifier }
				}
			}
		}
		add_province_modifier = { name = lower_gov_cost_in_home_region_modifier duration = -1 hidden = yes }
	}
	if = {	#reduced dev cost in capital state, adds modifier when gaining provinces in capital state
		limit = {
			owner = {
				has_government_attribute = lower_dev_cost_in_capital_state
				ROOT = {
					area_for_scope_province = { is_capital_of = PREV }
					NOT = { has_province_modifier = lower_dev_cost_in_capital_state_modifier }
				}
			}
		}
		add_province_modifier = { name = lower_dev_cost_in_capital_state_modifier duration = -1 hidden = yes }
	}
	if = {
		limit = {
			owner = { has_country_flag = jaddari_the_western_beacon_flag }
			continent = europe
			NOT = { religion = the_jadd }
		}
		add_province_modifier = { name = jaddari_the_western_beacon duration = -1 hidden = yes }
	}
	if = {
		limit = {
			trade_goods = slaves
			owned_by = B34
		}
		if = {
			limit = { owner = {  has_country_flag = luciande_tier3_slaves_flag } }
			add_province_modifier = { name = B34_board_of_chains_boost_upgraded_2 duration = -1 hidden = yes }
		}
		else_if = {
			limit = { 
				trade_goods = slaves
				owner = { has_country_flag = luciande_tier2_slaves_flag }
			}
			add_province_modifier = { name = B34_board_of_chains_boost_upgraded duration = -1 hidden = yes }
		}
		else_if = {
			limit = { 
				trade_goods = slaves
				owner = { has_country_flag = luciande_tier1_slaves_flag } 
			}
			add_province_modifier = { name = B34_board_of_chains_boost duration = -1 hidden = yes }
		}
	}
	if = {	#Orlghelovar (I12)
		limit = {
			trade_goods = glass
			owner = { tag = I12 }
		}
		if = {
			limit = {
				owner = {
					OR = {
						has_reform = orlghelovar_glasslords
						has_reform = orlghelovar_science
					}
				}
				NOT = { has_province_modifier = orlghelovar_glasslord_glass }
			}
			add_province_modifier = { name = orlghelovar_glasslord_glass duration = -1 hidden = yes }
		}
		if = {
			limit = {
				owner = { has_reform = orlghelovar_glass_worker_reform }
				NOT = { has_province_modifier = orlghelovar_reformed_glassworkers }
			}
			add_province_modifier = { name = orlghelovar_reformed_glassworkers duration = -1 hidden = yes }
		}
		if = {
			limit = {
				owner = { has_country_modifier = orlghelovar_sapphire_glass }
				NOT = { has_province_modifier = orlghelovar_glass_value }
			}
			add_province_modifier = { name = orlghelovar_glass_value duration = -1 hidden = yes }
		}
	}
	if = {	#seghdihr military modifiers
		limit = {
			owned_by = H78
			H78 = { has_reform = seghdihr_segbandalic_military }
		}
		if = {
			limit = { province_group = segbandal_hold_province }
			add_province_modifier = { name = seghdihr_reform_holds duration = -1 hidden = yes }
		}
		else = { add_province_modifier = { name = seghdihr_reform_non_holds duration = -1 hidden = yes } }
	}
	if = {	#Newshire
		limit = {
			OR = {
				trade_goods = grain
				trade_goods = livestock
			}
			owner = { 
				OR = {
					has_reform = newshire_stewardship
					has_reform = newshire_high_stewardship
				}
			}
		}
		add_province_modifier = { name = newshire_stewardship_boost duration = -1 hidden = yes }
	}
	if = {	#oak lord
		limit = {
			NOT = { has_province_modifier = oak_lord_province_modifier }
			owner = { has_government_attribute = oak_lord_boost}
		}
		hidden_effect = {
			if = {
				limit = { trade_goods = tropical_wood }
				add_province_modifier = { name = oak_lord_province_modifier duration = -1 hidden = yes }
			}
		}
	}
	if = {	# Grain Lords
        limit = {
            NOT = { has_province_modifier = barumand_lord_grain}
            owner = { has_reform = barumand_grain_lords_reform }
        }
        hidden_effect = {
            if = {
                limit = { trade_goods = grain }
                add_province_modifier = { name = barumand_lord_grain duration = -1 hidden = yes }
            }
        }
    }
	if = {	#wine lord
		limit = {
			NOT = { has_province_modifier = wine_lord_wine }
			owner = { has_government_attribute = winelord_boost }
		}
		hidden_effect = {
			if = {
				limit = { trade_goods = wine }
				add_province_modifier = { name = wine_lord_wine duration = -1 hidden = yes }
			}
		}
	}
	if = {	#bulwar lord
		limit = {
			NOT = { has_province_modifier = phoenix_empire_bulwar_gov_cost_modifier }
			owner = { has_government_attribute = bulwar_reduced_governing_cost}
		}
		hidden_effect = {
			if = {
				limit = { superregion = bulwar_superregion }
				add_province_modifier = { name = phoenix_empire_bulwar_gov_cost_modifier duration = -1 hidden = yes }
			}
		}
	}
	if = {	#bertus mod
		limit = {
			NOT = { has_province_modifier = gov_expanded_temple_rights_mod }
			owner = { has_government_attribute = temples_modifier}
		}	
		hidden_effect = {
			if = {
				limit = { has_tax_building_trigger = yes }
				add_province_modifier = { name = gov_expanded_temple_rights_mod duration = -1 }				
			}		
		}
	}
	if = {	#bertus mod
		limit = { owner = {has_government_attribute = elven_repopulation} }
		add_elven_minority_size_effect = yes
	}
	if = {	#bertus mod
		limit = { is_part_of_hre = yes }
		if = {
			limit = {
				province_with_mine_goods = yes
				has_global_flag = minery_reform_hre_flag
			}
			add_province_modifier = {name = minery_reform_province_modifier duration = -1}
		}
		if = {
			limit = {
				province_with_farm_goods = yes
				has_global_flag = agriculture_reform_hre_flag
			}
			add_province_modifier = {name = agricultural_reform_province_modifier duration = -1}
		}
	}
	if = {
		limit = {
			NOT = {has_province_modifier = magisgerium_damesear_claim_modifier}
			owner = {has_reform = magisterium_reform}
			OR = {area = west_damesear_area area = east_damesear_area}
		}
		add_province_modifier = {name = magisgerium_damesear_claim_modifier duration = -1}
	}
	if = {
		limit = {
			is_part_of_hre = yes
			owner = {is_part_of_hre = yes}
			NOT = {has_province_modifier = empire_centralization_modifier}
			has_province_flag = empire_centralization_province_flag
		}
		add_province_modifier = {name = empire_centralization_modifier duration = -1}
	}
	if = {
		limit = {
			NOT = {has_province_modifier = flottenbasis1_dock_bonus_3}
			NOT = {has_province_modifier = flottenbasis1_dock_bonus_2}
			NOT = {has_province_modifier = flottenbasis1_dock_bonus_1}
			owner = {has_idea = flottenbasis1}
		}
		trigger_switch = {
			on_trigger = has_building
			navymanpower_lvl_3 = {add_province_modifier = {name = flottenbasis1_dock_bonus_3 duration = -1 hidden = yes}}
			drydock = {add_province_modifier = {name = flottenbasis1_dock_bonus_2 duration = -1 hidden = yes}}
			dock = {add_province_modifier = {name = flottenbasis1_dock_bonus_1 duration = -1 hidden = yes}}
		}
	}
	if = {
		limit = {
			NOT = {has_province_modifier = flottenbasis4_dock_bonus_3}
			NOT = {has_province_modifier = flottenbasis4_dock_bonus_2}
			NOT = {has_province_modifier = flottenbasis4_dock_bonus_1}
			owner = {has_idea = flottenbasis4}
		}
		trigger_switch = {
			on_trigger = has_building
			navymanpower_lvl_3 = {add_province_modifier = {name = flottenbasis4_dock_bonus_3 duration = -1 hidden = yes}}
			drydock = {add_province_modifier = {name = flottenbasis4_dock_bonus_2 duration = -1 hidden = yes}}
			dock = {add_province_modifier = {name = flottenbasis4_dock_bonus_1 duration = -1 hidden = yes}}
		}
	}
	if = {
		limit = {
			owner = {
				is_part_of_hre = yes
				has_global_flag = xenophobe_weddings_hre_flag
			}
		}
		if = {
			limit = {
				is_part_of_hre = yes
				OR = {
					AND = {emperor = {culture_is_human = yes} culture_is_human = yes}
					AND = {emperor = {culture_is_elven = yes} culture_is_elven = yes}
					AND = {emperor = {culture_is_dwarven = yes} culture_is_dwarven = yes}
					AND = {emperor = {culture_is_halfling = yes} culture_is_halfling = yes}
					AND = {emperor = {culture_is_gnomish = yes} culture_is_gnomish = yes}
					AND = {emperor = {culture_is_harimari = yes} culture_is_harimari = yes}
					AND = {emperor = {culture_is_gnollish = yes} culture_is_gnollish = yes}
					AND = {emperor = {culture_is_ruinborn = yes} culture_is_ruinborn = yes}
					AND = {emperor = {culture_is_orcish = yes} culture_is_orcish = yes}
					AND = {emperor = {culture_is_goblin = yes} culture_is_goblin = yes}
					AND = {emperor = {culture_is_ogre = yes} culture_is_ogre = yes}
					AND = {emperor = {culture_is_centaur = yes} culture_is_centaur = yes}
					AND = {emperor = {culture_is_troll = yes} culture_is_troll = yes}
					AND = {emperor = {culture_is_harpy = yes} culture_is_harpy = yes}
					AND = {emperor = {culture_is_half_orcish = yes} culture_is_half_orcish = yes}
					AND = {emperor = {culture_is_half_elven = yes} culture_is_half_elven = yes}
					AND = {emperor = {culture_is_hobgoblin = yes} culture_is_hobgoblin = yes}
					AND = {emperor = {culture_is_kobold = yes} culture_is_kobold = yes}
					AND = {emperor = {culture_is_lizardfolk = yes} culture_is_lizardfolk = yes}
				}
			}
			add_province_modifier = {name = xenophobe_weddings_boost_modifier duration = -1}
		}
		if = {
			limit = {
				is_part_of_hre = yes
				OR = {
					AND = {emperor = {culture_is_human = yes} NOT = { culture_is_human = yes}}
					AND = {emperor = {culture_is_elven = yes} NOT = { culture_is_elven = yes}}
					AND = {emperor = {culture_is_dwarven = yes} NOT = { culture_is_dwarven = yes}}
					AND = {emperor = {culture_is_halfling = yes} NOT = { culture_is_halfling = yes}}
					AND = {emperor = {culture_is_gnomish = yes} NOT = { culture_is_gnomish = yes}}
					AND = {emperor = {culture_is_harimari = yes} NOT = { culture_is_harimari = yes}}
					AND = {emperor = {culture_is_gnollish = yes} NOT = { culture_is_gnollish = yes}}
					AND = {emperor = {culture_is_ruinborn = yes} NOT = { culture_is_ruinborn = yes}}
					AND = {emperor = {culture_is_orcish = yes} NOT = { culture_is_orcish = yes}}
					AND = {emperor = {culture_is_goblin = yes} NOT = { culture_is_goblin = yes}}
					AND = {emperor = {culture_is_ogre = yes} NOT = { culture_is_ogre = yes}}
					AND = {emperor = {culture_is_centaur = yes} NOT = { culture_is_centaur = yes}}
					AND = {emperor = {culture_is_troll = yes} NOT = { culture_is_troll = yes}}
					AND = {emperor = {culture_is_harpy = yes} NOT = { culture_is_harpy = yes}}
					AND = {emperor = {culture_is_half_orcish = yes} NOT = { culture_is_half_orcish = yes}}
					AND = {emperor = {culture_is_half_elven = yes} NOT = { culture_is_half_elven = yes}}
					AND = {emperor = {culture_is_hobgoblin = yes} NOT = { culture_is_hobgoblin = yes}}
					AND = {emperor = {culture_is_kobold = yes} NOT = { culture_is_kobold = yes}}
					AND = {emperor = {culture_is_lizardfolk = yes} NOT = { culture_is_lizardfolk = yes}}
				}
			}
			add_province_modifier = {name = xenophobe_weddings_boost_modifier duration = -1}
		}
	}
	if = {
		limit = {
			owner = {has_government_attribute = purge_on_conquest}
			OR = {
				AND = {
					culture_is_human = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_human_expulsion
							has_country_modifier = racial_pop_human_purge
						}
					}
				}
				AND = {
					culture_is_elven = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_elven_expulsion
							has_country_modifier = racial_pop_elven_purge
						}
					}
				}
				AND = {
					culture_is_dwarven = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_dwarven_expulsion
							has_country_modifier = racial_pop_dwarven_purge
						}
					}
				}
				AND = {
					culture_is_halfling = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_halfling_expulsion
							has_country_modifier = racial_pop_halfling_purge
						}
					}
				}
				AND = {
					culture_is_gnomish = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_gnomish_expulsion
							has_country_modifier = racial_pop_gnomish_purge
						}
					}
				}
				AND = {
					culture_is_harimari = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_harimari_expulsion
							has_country_modifier = racial_pop_harimari_purge
						}
					}
				}
				AND = {
					culture_is_gnollish = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_gnollish_expulsion
							has_country_modifier = racial_pop_gnollish_purge
						}
					}
				}
				AND = {
					culture_is_ruinborn = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_ruinborn_expulsion
							has_country_modifier = racial_pop_ruinborn_purge
						}
					}
				}
				AND = {
					culture_is_orcish = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_orcish_expulsion
							has_country_modifier = racial_pop_orcish_purge
						}
					}
				}
				AND = {
					culture_is_goblin = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_goblin_expulsion
							has_country_modifier = racial_pop_goblin_purge
						}
					}
				}
				AND = {
					culture_is_ogre = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_ogre_expulsion
							has_country_modifier = racial_pop_ogre_purge
						}
					}
				}
				AND = {
					culture_is_centaur = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_centaur_expulsion
							has_country_modifier = racial_pop_centaur_purge
						}
					}
				}
				AND = {
					culture_is_troll = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_troll_expulsion
							has_country_modifier = racial_pop_troll_purge
						}
					}
				}
				AND = {
					culture_is_harpy = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_harpy_expulsion
							has_country_modifier = racial_pop_harpy_purge
						}
					}
				}
				AND = {
					culture_is_half_orcish = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_half_orcish_expulsion
							has_country_modifier = racial_pop_half_orcish_purge
						}
					}
				}
				AND = {
					culture_is_half_elven = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_half_elven_expulsion
							has_country_modifier = racial_pop_half_elven_purge
						}
					}
				}
				AND = {
					culture_is_hobgoblin = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_hobgoblin_expulsion
							has_country_modifier = racial_pop_hobgoblin_purge
						}
					}
				}
				AND = {
					culture_is_kobold = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_kobold_expulsion
							has_country_modifier = racial_pop_kobold_purge
						}
					}
				}
				AND = {
					culture_is_lizardfolk = yes
					owner = {
						OR = {
							has_country_modifier = racial_pop_lizardfolk_expulsion
							has_country_modifier = racial_pop_lizardfolk_purge
						}
					}
				}
			}
		}
		add_devastation = 50
		change_culture = owner
		change_religion = owner
		bertus_dev_reduction = {value = 0.75}
		add_permanent_province_modifier = { name = purge_unrest_modifier duration = 1825 }
	}
	if = {
		limit = {
			OR = {
				has_province_modifier = wine_bonus_prod
				has_province_modifier = grain_bonus_prod
			}
			FROM = { has_reform = monastic_breweries_reform }
			NOT = { owner = { has_reform = monastic_breweries_reform } }
		}
		remove_province_modifier = wine_bonus_prod
		remove_province_modifier = grain_bonus_prod
	}
	if = {
		limit = {
			NOT = {
				OR = {
					has_province_modifier = wine_bonus_prod
					has_province_modifier = grain_bonus_prod
				}
			}
			owner = { has_reform = monastic_breweries_reform }
			NOT = { FROM = { has_reform = monastic_breweries_reform } }
		}
		hidden_effect = {
			if = {
				limit = { trade_goods = wine }
				add_province_modifier = {  name = wine_bonus_prod duration = -1 hidden = yes }
			}
			if = {
				limit = { trade_goods = grain }
				add_province_modifier = { name = grain_bonus_prod duration = -1 hidden = yes }
			}
		}
	}
	if = {
		limit = {
			has_province_modifier = grain_vodka_bonus_prod
			FROM = { has_government_attribute = extra_trade_goods_from_grain }
			NOT = { owner = { has_government_attribute = extra_trade_goods_from_grain } }
		}
		remove_province_modifier = grain_vodka_bonus_prod
	}
	if = {
		limit = {
			NOT = { has_province_modifier = grain_vodka_bonus_prod }
			owner = { has_government_attribute = extra_trade_goods_from_grain }
			NOT = { FROM = { has_government_attribute = extra_trade_goods_from_grain } }
			trade_goods = grain
		}
		hidden_effect = {
			add_province_modifier = { name = grain_vodka_bonus_prod duration = -1 hidden = yes }
		}
	}
	if = {
		limit = {
			has_province_modifier = naval_supplies_bonus_prod
			FROM = { has_government_attribute = extra_trade_goods_from_naval_supplies }
			NOT = { owner = { has_government_attribute = extra_trade_goods_from_naval_supplies } }
		}
		remove_province_modifier = naval_supplies_bonus_prod
	}
	if = {
		limit = {
			NOT = { has_province_modifier = naval_supplies_bonus_prod }
			owner = { has_government_attribute = extra_trade_goods_from_naval_supplies }
			NOT = { FROM = { has_government_attribute = extra_trade_goods_from_naval_supplies } }
		}
		hidden_effect = {
			if = {
				limit = { trade_goods = naval_supplies }
				add_province_modifier = { name = naval_supplies_bonus_prod duration = -1 hidden = yes }
			}
		}
	}
	if = {
		limit = {
			owner = { has_government_attribute = temples_modifier }
			has_tax_building_trigger = yes
		}
		add_province_modifier = { name = gov_expanded_temple_rights_mod duration = -1 }
	}
	if = {
		limit = {
			owner = { has_government_attribute = improved_military_buildings }
		}
		if = {
			limit = { has_building = barracks }
			add_province_modifier = { name = wei_suo_system_reform_barracks_modifier duration = -1 hidden = yes }
		}
		if = {
			limit = { has_building = training_fields }
			add_province_modifier = { name = wei_suo_system_reform_training_fields_modifier duration = -1 hidden = yes }
		}
		if = {
			limit = { has_building = regimental_camp }
			add_province_modifier = { name = wei_suo_system_reform_regimental_camp_modifier duration = -1 hidden = yes }
		}
		if = {
			limit = { has_building = conscription_center }
			add_province_modifier = { name = wei_suo_system_reform_conscription_center_modifier duration = -1 hidden = yes }
		}
		if = {
			limit = { has_building = soldier_households }
			add_province_modifier = { name = wei_suo_system_reform_soldier_households_modifier duration = -1 hidden = yes }
		}
	}
	if = {
		limit = {
			has_port = yes
			owner = { has_government_attribute = cheaper_coastal_province_core }
		}
		add_province_modifier = { name = gov_coastal_government duration = -1 }
	}
}

on_province_religion_changed_effect = {
	on_province_religion_converted_estate_privileges_effect = yes
}

on_province_religion_converted_effect = {
	if = {	#bertus mod
		limit = { has_idea = F51_increase_lightbringer_jurisdiction }
		set_variable = { which = development_var value = 0 }
		export_to_variable = { which = development_var value = development who = PREV }
		while = {
			limit = { check_variable = { which = development_var value = 1 } }
			subtract_variable = { which = development_var value = 1 }
			add_adm_power = 5
			add_dip_power = 5
			add_mil_power = 5
			add_fervor = 2
		}
	}
	if = {
		limit = { owner = { has_government_attribute = gain_devotion_from_conversions } }
		owner = { add_devotion = 0.2 }
	}
	if = {
		limit = { owner = { has_government_attribute = theocratic_monarchy_mechanic } }
		owner = { change_statists_vs_orangists = -0.01 }
	}
	if = {
		limit = {has_province_modifier = ibevar_old_tradition}
		remove_province_modifier = ibevar_old_tradition
		if = {
			limit = {religion = regent_court}
			change_religion = elven_forebears
		}
		else = { change_religion = regent_court }
		add_province_modifier = { name = ibevar_reformation_effort duration = -1 }
		remove_province_modifier = religious_zeal_at_conv
	}
	else_if = {
		limit = {has_province_modifier = ibevar_reformation_effort}
		remove_province_modifier = ibevar_reformation_effort
		if = {
			limit = {religion = regent_court}
			change_religion = elven_forebears
		}
		else = { change_religion = regent_court }
		add_province_modifier = { name = ibevar_last_reformation_effort duration = -1 }
		remove_province_modifier = religious_zeal_at_conv
	}
	else_if = {
		limit = {has_province_modifier = ibevar_last_reformation_effort}
		remove_province_modifier = ibevar_last_reformation_effort
		if = {
			limit = {religion = regent_court}
			change_religion = elven_forebears
		}
		else = { change_religion = regent_court }
		remove_province_modifier = religious_zeal_at_conv
	}
	if = {	#bertus mod
		limit = { has_government_attribute = gain_power_from_conversions }
		set_variable = { which = development_var value = 0 }
		export_to_variable = { which = development_var value = development who = PREV }
		while = {
			limit = {  check_variable = { which = development_var value = 1 } }
			subtract_variable = { which = development_var value = 1 }
			add_adm_power = 2
			add_dip_power = 2
			add_mil_power = 2
		}
	}
}

on_trade_good_changed_government_effect = {
	if = {
		limit = { owner = { has_reform = monastic_breweries_reform } }
		if = {
			limit = { trade_goods = grain }
			remove_province_modifier_effect = {MODIFIER = wine_bonus_prod}
			add_province_modifier = { name = grain_bonus_prod duration = -1 hidden = yes }
		}
		else_if = {
			limit = { trade_goods = wine }
			remove_province_modifier_effect = {MODIFIER = grain_bonus_prod}
			add_province_modifier = {  name = wine_bonus_prod duration = -1 hidden = yes }
		}
		else = {
			remove_province_modifier_effect = {MODIFIER = grain_bonus_prod}
			remove_province_modifier_effect = {MODIFIER = wine_bonus_prod}
		}
	}
	else = {
		remove_province_modifier_effect = {MODIFIER = grain_bonus_prod}
		remove_province_modifier_effect = {MODIFIER = wine_bonus_prod}
	}
	if = {
		limit = { owner = { has_government_attribute = extra_trade_goods_from_grain } }
		if = {
			limit = { trade_goods = grain }
			add_province_modifier = { name = grain_vodka_bonus_prod duration = -1 hidden = yes }
		}
		else = { remove_province_modifier_effect = {MODIFIER = grain_vodka_bonus_prod}}
	}
	else = { remove_province_modifier_effect = {MODIFIER = grain_vodka_bonus_prod} }
	if = {
		limit = { owner = { has_government_attribute = extra_trade_goods_from_naval_supplies } }
		if = {
			limit = { trade_goods = naval_supplies }
			add_province_modifier = {  name = naval_supplies_bonus_prod duration = -1 hidden = yes }
		}
		else = {
			remove_province_modifier_effect = {MODIFIER = naval_supplies_bonus_prod}
		}
	}
	else = {
		remove_province_modifier_effect = {MODIFIER = naval_supplies_bonus_prod}
	}
}
#1.35
on_battle_won_unit_effect = {
	if = {
		limit = {
			unit_owner = { has_government_attribute = winning_battles_increases_legitimacy }
			is_ruler_commanding_unit = yes
		}
		unit_owner = {
			add_legitimacy_equivalent = { amount = 0.5 republican_tradition = 0.2 }
			add_revolutionary_zeal_or_absolutism = { amount = 1 }
		}
	}
	if = {
		limit = {
			enemy_unit = { unit_owner = { OR = {ai = no overlord = { ai = no } } } }
			unit_owner = { uses_church_aspects = yes OR = { religion_group = orcish religion_group = giantkin } }
		}
		unit_owner = {
			set_variable = { which = amount_kill which = land_units_killed }
			divide_variable = { which = amount_kill value = 1000 }
			while = {
				limit = { check_variable = { which = amount_kill value = 1 } }
				add_church_power = 1
				change_variable = { which = amount_kill value = -1 }
			}
		}
	}
	if = {
		limit = { unit_owner = { has_government_attribute = warlock_religion_actions_mechanic } }
		unit_owner = {
			set_variable = { which = amount_kill which = land_units_killed }
			divide_variable = { which = amount_kill value = 1000 }
			while = {
				limit = { check_variable = { which = amount_kill value = 1 } }
				add_church_power = 1
				change_variable = { which = amount_kill value = -1 }
			}
		}
	}
}

on_battle_lost_unit_effect = {
	if = {	#bertus mod - Military Reform
		limit = {
			#enemy_unit = { unit_owner = { OR = {ai = no overlord = { ai = no } } } }
			unit_owner = {
				ai = no
				has_government_mechanic = military_reforms_mechanic
			}
		}
		unit_owner = {
			set_variable = { which = military_reform_unit_kill_losses value = 0 }
			change_variable = { which = military_reform_unit_kill_losses which = land_units_lost }
			set_variable = { which = land_forcelimit_unit_kill_losses value = 0 }
			export_to_variable = { which = land_forcelimit_unit_kill_losses value = trigger_value:land_forcelimit }
			set_variable = { which = army_size_unit_kill_losses value = 0 }
			export_to_variable = { which = army_size_unit_kill_losses value = trigger_value:army_size }
			divide_variable = { which = military_reform_unit_kill_losses value = 1000 }
			divide_variable = { which = military_reform_unit_kill_losses which = land_forcelimit_unit_kill_losses }
			multiply_variable = { which = military_reform_unit_kill_losses which = army_size_unit_kill_losses }
			while = {
				limit = { check_variable = { which = military_reform_unit_kill_losses value = 0.1 } }
				change_variable = { which = military_reform_unit_kill_losses value = -0.1 }
				add_government_power = { mechanic_type = military_reforms_mechanic power_type = military_reform_power value = 0.01 }
			}
		}
	}
}

on_battle_won_country_effect = {
	if = {	#lord alfonso experience
		limit = {
			has_leader = "Lord Alfonso"
			FROM = { OR = { ai = no overlord = { ai = no } } }
		}
		set_variable = { which = temp value = 0 }
		change_variable = { which = temp which = land_units_killed }
		divide_variable = { which = temp value = 100 }	#1 exp every 100 kills
		change_variable = { which = lord_alfonso_exp which = temp }	#in order to avoid division by 0
		update_lord_alfonso_level = yes
	}
	if = {	#bertus mod - Military Reform
		limit = {
			FROM = { OR = {ai = no overlord = { ai = no } } }
			ai = no
			has_government_mechanic = military_reforms_mechanic
		}
		set_variable = { which = military_reform_unit_kill_losses value = 0 }
		change_variable = { which = military_reform_unit_kill_losses which = land_units_lost }
		set_variable = { which = land_forcelimit_unit_kill_losses value = 0 }
		export_to_variable = { which = land_forcelimit_unit_kill_losses value = trigger_value:land_forcelimit }
		set_variable = { which = army_size_unit_kill_losses value = 0 }
		export_to_variable = { which = army_size_unit_kill_losses value = trigger_value:army_size }
		divide_variable = { which = military_reform_unit_kill_losses value = 1000 }
		divide_variable = { which = military_reform_unit_kill_losses which = land_forcelimit_unit_kill_losses }
		multiply_variable = { which = military_reform_unit_kill_losses which = army_size_unit_kill_losses }
		while = {
			limit = { check_variable = { which = military_reform_unit_kill_losses value = 0.1 } }
			change_variable = { which = military_reform_unit_kill_losses value = -0.1 }
			add_government_power = { mechanic_type = military_reforms_mechanic power_type = military_reform_power value = 0.01 }
		}
	}
	if = {	#bertus mod
		limit = {
			ROOT = {
				religion = corinite
				has_church_aspect = corinite_purim_teachings_aspect
			}
		}
		ROOT = {
			remove_country_modifier = corinite_purim_teachings_aspect_modifier
			add_country_modifier = { name = corinite_purim_teachings_aspect_modifier duration = 730 }
		}
	}
	if = {
		limit = {
			ROOT = { has_government_attribute = manpower_from_defeating_armies }
		}
		ROOT = {
			multiply_variable = { which = land_units_killed_var value = 0.1 }
			while = {
				limit = { check_variable = { which = land_units_killed_var value = 1000 } }
				subtract_variable = { which = land_units_killed_var value = 1000 }
				add_manpower = 1
			}
			multiply_variable = { which = land_units_killed_var value = 1000 }
			while = {
				limit = { check_variable = { which = land_units_killed_var value = 1000 } }
				subtract_variable = { which = land_units_killed_var value = 1000 }
				add_manpower = 0.001
			}
		}
	}
}

on_battle_lost_country_effect = {
	if = {	#bertus mod - Military Reform
		limit = {
			FROM = { OR = {ai = no overlord = { ai = no } } }
			ai = no
			has_government_mechanic = military_reforms_mechanic
		}
		set_variable = { which = military_reform_unit_kill_losses value = 0 }
		change_variable = { which = military_reform_unit_kill_losses which = land_units_lost }
		set_variable = { which = land_forcelimit_unit_kill_losses value = 0 }
		export_to_variable = { which = land_forcelimit_unit_kill_losses value = trigger_value:land_forcelimit }
		set_variable = { which = army_size_unit_kill_losses value = 0 }
		export_to_variable = { which = army_size_unit_kill_losses value = trigger_value:army_size }
		divide_variable = { which = military_reform_unit_kill_losses value = 1000 }
		divide_variable = { which = military_reform_unit_kill_losses which = land_forcelimit_unit_kill_losses }
		multiply_variable = { which = military_reform_unit_kill_losses which = army_size_unit_kill_losses }
		while = {
			limit = { check_variable = { which = military_reform_unit_kill_losses value = 0.1 } }
			change_variable = { which = military_reform_unit_kill_losses value = -0.1 }
			add_government_power = { mechanic_type = military_reforms_mechanic power_type = military_reform_power value = 0.01 }
		}
	}
}
#1.35
on_battle_ended_effect = {
	ROOT = {
		change_variable = { which = total_land_units_killed which = land_units_killed }
		change_variable = { which = total_land_units_lost which = land_units_lost }
		change_variable = { which = total_naval_units_killed which = naval_units_killed }
		change_variable = { which = total_naval_units_lost which = naval_units_lost }
	}
}


#Country effect
on_culture_demoted_effect = {
	if = {	#bertus mod
		limit = {
			NOT = {num_accepted_cultures = 5}
			has_country_modifier = humanist_bonus
		}
		remove_country_modifier = humanist_bonus
	}
}


#Province effect
imperial_modifiers_on_province_change_culture_or_change_owner_effect = {
}

#Country effect
imperial_modifiers_on_culture_country_effect = {
}

#Country effect
imperial_modifiers_on_primary_culture_change_effect = {
}

#EVERYTHING BELOW IS 1.35
on_war_declaration_effect = {
	random_list = {
		1 = {
			country_event = {
				id = new_court_flavour_events.21
			}
		}
		9 = {}
	}
	country_event = {id = bertus_changes.1042}
	FROM = { country_event = {id = bertus_changes.1042} }
}

remove_all_age_of_discovery_modifiers = {
}
remove_all_age_of_reformation_modifiers = {
}
remove_all_age_of_absolutism_modifiers = {
}
remove_all_age_of_revolution_modifiers = {
}

remove_all_age_timed_modifiers = {
	remove_all_age_of_discovery_modifiers = yes
	remove_all_age_of_reformation_modifiers = yes
	remove_all_age_of_absolutism_modifiers = yes
	remove_all_age_of_revolution_modifiers = yes
}

on_parliament_abolished_effect = {
	custom_tooltip = on_parliament_abolished_effect_tt
}

set_parliament_action_flag = {
	hidden_effect = {
		set_country_flag = $parliament_action$_flag
	}
}

on_harmonized_effect = {
}

on_province_culture_change_effect = {
	if = {
		limit = {
			owner = { has_country_flag = phoenix_empire_the_sun_outshines_the_moon_flag }
			has_province_modifier = phoenix_empire_the_sun_outshines_the_moon
			culture = sun_elf
		}
		hidden_effect = {
			remove_province_modifier = phoenix_empire_the_sun_outshines_the_moon
			owner = { add_adm_power = 25 }
		}
	}
}

on_colony_finished_effect = {
	if = {
		limit = { NOT = {has_province_flag = bertus_pops_1038_flag} }	#overall pop removal
		set_province_flag = bertus_pops_1038_flag
		owner = {country_event = {id = bertus_pops.1000 days = 30}}
	}
	if = {
		limit = { NOT = {has_province_flag = bertus_pops_1037_flag} }	#overall pop updater
		set_province_flag = bertus_pops_1037_flag
		owner = {country_event = {id = bertus_pops.1000 days = 30}}
	}
}

on_colonist_boosting_colony_effect = {
	hidden_effect = {
		if = {
			limit = {
				OR = {
					religion = noreligion
					#test if colonists outnumber natives
					variable_arithmetic_trigger = {
						custom_tooltip = colonysize_is_larger_than_nativesize_tt
						export_to_variable = { which = vab_colonysize value = trigger_value:colonysize }
						export_to_variable = { which = vab_nativesize value = trigger_value:native_size }
						multiply_variable = { which = vab_nativesize value = 100 }
						check_variable = { which = vab_colonysize which = vab_nativesize }
					}
					is_in_capital_area = yes
					continent = north_america
					continent = south_america
					continent = new_world
					NOT = {
						OR = {
							has_dlc = "Dharma"
							has_dlc = "Wealth of Nations"
						}
					}
				}
			}
			change_religion = FROM
		}
		if = {
			limit = {
				OR = {
					culture = noculture
					#test if colonists outnumber natives
					variable_arithmetic_trigger = {
						custom_tooltip = colonysize_is_larger_than_nativesize_tt
						export_to_variable = { which = vab_colonysize value = trigger_value:colonysize }
						export_to_variable = { which = vab_nativesize value = trigger_value:native_size }
						multiply_variable = { which = vab_nativesize value = 100 }
						check_variable = { which = vab_colonysize which = vab_nativesize }
					}
					is_in_capital_area = yes
					continent = north_america
					continent = south_america
					continent = new_world
					NOT = {
						OR = {
							has_dlc = "Dharma"
							has_dlc = "Wealth of Nations"
						}
					}
				}
			}
			change_culture = FROM
			change_original_culture = FROM
		}
	}
}

on_alliance_broken_effect = {
}

on_adm_development_effect = {
	if = {
		limit = {owner = {has_government_attribute = boost_30_dev_provinces}}
		if = {
			limit = {
				development = 30
				NOT = {has_province_modifier = centralized_provinces_modifier}
			}
			add_province_modifier = {name = centralized_provinces_modifier duration = -1}
		}
	}
}
on_dip_development_effect = {
	if = {
		limit = {owner = {has_government_attribute = boost_30_dev_provinces}}
		if = {
			limit = {
				development = 30
				NOT = {has_province_modifier = centralized_provinces_modifier}
			}
			add_province_modifier = {name = centralized_provinces_modifier duration = -1}
		}
	}
}
on_mil_development_effect = {
	if = {
		limit = {owner = {has_government_attribute = boost_30_dev_provinces}}
		if = {
			limit = {
				development = 30
				NOT = {has_province_modifier = centralized_provinces_modifier}
			}
			add_province_modifier = {name = centralized_provinces_modifier duration = -1}
		}
	}
}

# THIS = Province, FROM = Country, ROOT = Merc Unit
on_mercenary_recruited_effect = {
	if = {
		limit = { NOT = { FROM = {has_country_flag = mithradhum_company_local }} mercenary_company = merc_mithril_company }
		every_country = {
			limit = { has_country_flag = mithradhum_company_local }
			if = {
				limit = {
					any_province = {
						owned_by = FROM
						has_discovered = PREV
					}
				}
				every_province = {
					limit = {
						owned_by = FROM
						has_discovered = PREV
					}
					discover_country = PREV
				}
			}
			country_event = {id = bertus_changes.6008}
		}
	}
}

on_parliament_debate_reset_effect = {
	add_country_modifier = {
		name = reset_parliament_debate_modifier
		duration = 3650
	}
	add_corruption = 2
}

on_parliament_seat_given_effect = {
	if = { 
		limit = { owner = {has_government_attribute = parliamnet_seats_boost} } 
		add_pop_modifier = {race = all class = parliament amount = 10percent resource = tax onbase = base_tax }
		add_pop_modifier = {race = all class = parliament amount = 10percent resource = goods_produced onbase = base_production }
		add_pop_modifier = {race = all class = parliament amount = 10percent resource = manpower onbase = base_manpower }
	}
}
on_parliament_seat_lost_effect = {
	remove_pop_modifier = {race = all class = parliament amount = 10percent resource = goods_produced }
	remove_pop_modifier = {race = all class = parliament amount = 10percent resource = manpower }
	remove_pop_modifier = {race = all class = parliament amount = 10percent resource = tax }
	remove_province_modifier_effect = {MODIFIER = gov_buffed_parliament_seat}
}
on_parliament_debate_failed_effect = {
}
on_parliament_debate_succeeded_effect = {
	if = {
		limit = {has_government_attribute = parliament_debate_bonus}
		add_adm_power = 100
		add_dip_power = 100
		add_mil_power = 100
	}
}

on_main_war_won_effect = {
	if = {
		limit = {has_government_attribute = winning_wars_gives_rt}
		add_republican_tradition = 5
	}
	if = {
		limit = {has_government_attribute = winning_war_increases_legitimacy}
		add_legitimacy_equivalent = { amount = 5 republican_tradition = 2 }
	}
}

on_change_tag_effect = {
	#England specific
	if = { limit = { has_country_modifier = royal_impressment_act_modifier } remove_country_modifier = royal_impressment_act_modifier }
	if = { limit = { has_country_modifier = isolationism_act_modifier } remove_country_modifier = isolationism_act_modifier }
	if = { limit = { has_country_modifier = colonial_act_modifier } remove_country_modifier = colonial_act_modifier }
	if = { limit = { has_country_modifier = military_reassignment_act_modifier } remove_country_modifier = military_reassignment_act_modifier }
	if = { limit = { has_country_modifier = acts_of_development_modifier } remove_country_modifier = acts_of_development_modifier }
	if = { limit = { has_country_modifier = global_empire_act_modifier } remove_country_modifier = global_empire_act_modifier }
	if = { limit = { has_country_modifier = naval_reassignment_act_modifier } remove_country_modifier = naval_reassignment_act_modifier }
	if = { limit = { has_country_modifier = diplomatic_act_modifier } remove_country_modifier = diplomatic_act_modifier }
	if = { limit = { has_country_modifier = internal_focus_act_modifier } remove_country_modifier = internal_focus_act_modifier }
}

on_force_conversion_effect = {
	FROM = {
		add_country_modifier = { name = recently_force_converted_protagonist_timer duration = 5475 hidden = yes }
		change_variable = { which = num_of_forced_conversions value = 1 }
		if = {
			limit = { has_government_attribute = gain_monarch_power_from_force_converting }
			export_to_variable = { variable_name = root_development value = total_development who = ROOT }
			while = {
				limit = { check_variable = { which = root_development value = 1 } }
				subtract_variable = { which = root_development value = 1 }
				if = {
					limit = { NOT = { adm = 999 } }
					add_adm_power = 1
				}
				else = { add_splendor = 5}
				if = {
					limit = { NOT = { dip = 999 } }
					add_dip_power = 1
				}
				else = { add_splendor = 5}
				if = {
					limit = { NOT = { mil = 999 } }
					add_mil_power = 1
				}
				else = { add_splendor = 5}
			}
		}
	}
}

on_general_recruited_effect = {
	#Anbennar
	if = {	#bertus mod
		limit = {
			has_government_attribute = recruiting_generals_give_yearly_manpower
			NOT = {has_country_modifier = cheat_engine_modifier}
		}
		add_yearly_manpower = 0.10
	}
	if = {	#bertus mod
		limit = { has_government_attribute = recruiting_generals_increases_professionalism }
		add_army_professionalism = 0.002
	}
	if = {
		limit = { has_estate_privilege = estate_lion_command_war_room_rights }
		add_legitimacy = 1
	}
}
on_sale_of_titles_effect = {
	hidden_effect = {
		change_variable = { which = sale_of_titles_counter value = 1 }
	}
}
on_summon_the_diet_effect = {
	hidden_effect = {
		change_variable = { which = summon_the_diet_counter value = 1 }
	}
}
on_seize_land_effect = {
}
on_heir_disinherited_or_death_effect = {
	if = {
		limit = { has_country_flag = heir_dip_education }
		clr_country_flag = heir_dip_education
	}
	if = {
		limit = { has_country_flag = heir_mil_education }
		clr_country_flag = heir_mil_education
	}
	if = {
		limit = { has_country_flag = heir_adm_education }
		clr_country_flag = heir_adm_education
	}
	if = {
		limit = { has_ruler_flag = well_advised_tutored_heir }
		clr_ruler_flag = well_advised_tutored_heir
	}
	if = {
		limit = { has_ruler_flag = heir_went_on_grand_tour }
		clr_ruler_flag = heir_went_on_grand_tour
	}
	if = {
		limit = { has_country_flag = albrecht_achilles_flag }
		clr_country_flag = albrecht_achilles_flag #Death of original Albrecht Achilles
	}
	if = {
		limit = { has_ruler_flag = sancaga_cikma }
		clr_ruler_flag = sancaga_cikma
		every_owned_province = {
			limit = { has_province_modifier = heir_in_training }
			remove_province_modifier = heir_in_training
		}
	}
	if = {
		limit = { has_ruler_flag = returned_from_sancaga_sikma_province }
		clr_ruler_flag = returned_from_sancaga_sikma_province
	}
	if = {
		limit = { has_any_heir_cult_active = yes }
		remove_heir_cult = yes
	}
}