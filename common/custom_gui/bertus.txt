custom_button = {
    name = magic_menu_ruler
    potential = {
		ruler_has_mage_personality = yes
	}
	trigger = {
		hidden_trigger = {
			ai = no	#bertus mod
			NOT = { has_ruler_flag = magic_menu_opened }
		}
		NOT = { has_country_flag = in_magocracy_heir_selection }
		NOT = { has_ruler_modifier = magic_realm_menu_cooldown }
		NOT = { has_ruler_modifier = ruler_recently_casted_spell }
		if = { limit = { NOT = {months_of_ruling = 2 }}
			months_of_ruling = 2
		}
		if = { limit = { is_lesser_in_union = yes }
			is_lesser_in_union = no
		}
		if = { limit = { ai = yes }
			NOT = { has_ruler_modifier = ruler_recently_casted_spell }
		}
		if = { limit = { has_ruler_flag = abjuration_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_abjuration_3 }
		}
		else_if = { limit = { has_ruler_flag = abjuration_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_abjuration_2 }
		}
		else_if = { limit = { has_ruler_flag = abjuration_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_abjuration_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_abjuration_0 }
		}
		if = { limit = { has_ruler_flag = conjuration_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_conjuration_3 }
		}
		else_if = { limit = { has_ruler_flag = conjuration_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_conjuration_2 }
		}
		else_if = { limit = { has_ruler_flag = conjuration_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_conjuration_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_conjuration_0 }
		}
		if = { limit = { has_ruler_flag = divination_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_divination_3 }
		}
		else_if = { limit = { has_ruler_flag = divination_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_divination_2 }
		}
		else_if = { limit = { has_ruler_flag = divination_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_divination_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_divination_0 }
		}
		if = { limit = { has_ruler_flag = enchantment_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_enchantment_3 }
		}
		else_if = { limit = { has_ruler_flag = enchantment_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_enchantment_2 }
		}
		else_if = { limit = { has_ruler_flag = enchantment_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_enchantment_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_enchantment_0 }
		}
		if = { limit = { has_ruler_flag = evocation_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_evocation_3 }
		}
		else_if = { limit = { has_ruler_flag = evocation_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_evocation_2 }
		}
		else_if = { limit = { has_ruler_flag = evocation_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_evocation_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_evocation_0 }
		}
		if = { limit = { has_ruler_flag = illusion_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_illusion_3 }
		}
		else_if = { limit = { has_ruler_flag = illusion_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_illusion_2 }
		}
		else_if = { limit = { has_ruler_flag = illusion_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_illusion_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_illusion_0 }
		}
		if = { limit = { has_ruler_flag = necromancy_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_necromancy_3 }
		}
		else_if = { limit = { has_ruler_flag = necromancy_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_necromancy_2 }
		}
		else_if = { limit = { has_ruler_flag = necromancy_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_necromancy_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_necromancy_0 }
		}
		if = { limit = { has_ruler_flag = transmutation_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_transmutation_3 }
		}
		else_if = { limit = { has_ruler_flag = transmutation_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_transmutation_2 }
		}
		else_if = { limit = { has_ruler_flag = transmutation_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_transmutation_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_transmutation_0 }
		}
	}
	effect = {
		hidden_effect = { country_event = { id = magic_ruler.0 } }
		open_single_menu = yes	#prevents people from opening the menu multiple times
		#Allows for vampires that become mages naturally
		hidden_effect = {
			if = { 
				limit = { has_ruler_flag = is_a_vampire }
				set_country_flag = mage_vampire
			}
		}
	}
	tooltip = open_ruler_magic_menu_tt
}
custom_button = {
    name = trade_goods_update #Must match a scripted iconType in a .gui file
    potential = {
		always = yes
	} #Determines when the icon is visible
	trigger = {
		if = {
			limit = {
				has_country_flag = trade_goods_update_cd
				NOT = { had_country_flag = { flag = trade_goods_update_cd days = 30 } }
			}
			had_country_flag = { flag = trade_goods_update_cd days = 30 }
		}
	}
	effect = {
		custom_tooltip = bertus_open_goods_menu_tt #Can use customizable localisation
		hidden_effect = {
			country_event = {id = ANEX_event.34}
			country_event = {id = bertus_changes.7000}
			clr_country_flag = trade_goods_update_cd
			set_country_flag = trade_goods_update_cd
		}
	}
    tooltip = bertus_open_goods_menu #Can use customizable localisation
}
custom_button = {
    name = siege_magic #Must match a scripted iconType in a .gui file
    potential = {
		ai = no	#bertus mod
		ruler_has_mage_personality = yes
		months_of_ruling = 2
		NOT = { has_ruler_flag = magic_menu_opened }
	} #Determines when the icon is visible
	trigger = {
		custom_trigger_tooltip = {
			tooltip = ruler_knows_siege_spell_tt
			OR = {
				has_ruler_flag = conjuration_1
				has_ruler_flag = evocation_1
				has_ruler_flag = transmutation_2
				has_ruler_flag = enchantment_3
			}
		}
		is_at_war = yes
		NOT = { has_ruler_modifier = magic_siege_cooldown }
		is_lesser_in_union = no
		any_army = {
			location = {
				fort_level = 1
				sieged_by = ROOT
				unit_has_leader = yes
				has_ruler_leader_from = ROOT
				num_of_units_in_province = {
					who = ROOT
					amount = 1
				}
			}
		}
		hidden_trigger = {
			NOT = { has_ruler_flag = magic_menu_opened }
		}
	}
	effect = {
		set_ruler_flag = magic_siege_menu
		custom_tooltip = open_siege_magic_menu_tt
		hidden_effect = { country_event = { id = magic_siege.1 } }
		open_single_menu = yes	#prevents people from opening the menu multiple times
	}
    tooltip = siege_magic_tt #Can use customizable localisation
}
custom_button = {
    name = first_chairman_interaction #Must match a scripted iconType in a .gui file
    potential = {
		ai = no
	} #Determines when the icon is visible
	trigger = {
		if = {
			limit = {
				has_country_flag = first_chairman_interaction_cd
				NOT = { had_country_flag = { flag = first_chairman_interaction_cd days = 3650 } }
			}
			had_country_flag = { flag = first_chairman_interaction_cd days = 3650 }
		}
	}
	effect = {
		country_chairman_effect = { type = first_hand }
		country_event = { id = bertus_racial_military.5200 }
		hidden_effect = {
			clr_country_flag = first_chairman_interaction_cd
			set_country_flag = first_chairman_interaction_cd
		}
	}
    tooltip = first_chairman_interaction_tt #Can use customizable localisation
}
custom_button = {
    name = diplomacy_chairman_interaction #Must match a scripted iconType in a .gui file
    potential = {
		ai = no
	} #Determines when the icon is visible
	trigger = {
		if = {
			limit = {
				has_country_flag = diplomacy_chairman_interaction_cd
				NOT = { had_country_flag = { flag = diplomacy_chairman_interaction_cd days = 3650 } }
			}
			had_country_flag = { flag = diplomacy_chairman_interaction_cd days = 3650 }
		}
	}
	effect = {
		country_chairman_effect = { type = diplomacy }
		country_event = { id = bertus_racial_military.5201 }
		hidden_effect = {
			clr_country_flag = diplomacy_chairman_interaction_cd
			set_country_flag = diplomacy_chairman_interaction_cd
		}
	}
    tooltip = diplomacy_chairman_interaction_tt #Can use customizable localisation
}
custom_button = {
    name = military_chairman_interaction #Must match a scripted iconType in a .gui file
    potential = {
		ai = no
	} #Determines when the icon is visible
	trigger = {
		if = {
			limit = {
				has_country_flag = military_chairman_interaction_cd
				NOT = { had_country_flag = { flag = military_chairman_interaction_cd days = 3650 } }
			}
			had_country_flag = { flag = military_chairman_interaction_cd days = 3650 }
		}
	}
	effect = {
		country_chairman_effect = { type = military }
		country_event = { id = bertus_racial_military.5202 }
		hidden_effect = {
			clr_country_flag = military_chairman_interaction_cd
			set_country_flag = military_chairman_interaction_cd
		}
	}
    tooltip = military_chairman_interaction_tt #Can use customizable localisation
}
custom_button = {
    name = economic_chairman_interaction #Must match a scripted iconType in a .gui file
    potential = {
		ai = no
	} #Determines when the icon is visible
	trigger = {
		if = {
			limit = {
				has_country_flag = economic_chairman_interaction_cd
				NOT = { had_country_flag = { flag = economic_chairman_interaction_cd days = 3650 } }
			}
			had_country_flag = { flag = economic_chairman_interaction_cd days = 3650 }
		}
	}
	effect = {
		country_chairman_effect = { type = economic }
		country_event = { id = bertus_racial_military.5203 }
		if = {
			limit = {
				has_country_modifier = estate_halfling_economic_chairman_modifier
			}
			custom_tooltip = estate_halfling_economic_chairman_tooltip
		}
		hidden_effect = {
			clr_country_flag = economic_chairman_interaction_cd
			set_country_flag = economic_chairman_interaction_cd
		}
	}
    tooltip = economic_chairman_interaction_tt #Can use customizable localisation
}
custom_button = {
    name = navy_chairman_interaction #Must match a scripted iconType in a .gui file
    potential = {
		ai = no
	} #Determines when the icon is visible
	trigger = {
		if = {
			limit = { all_owned_province = { has_port = no } }
			any_owned_province = { has_port = yes }
		}
		if = {
			limit = {
				has_country_flag = navy_chairman_interaction_cd
				NOT = { had_country_flag = { flag = navy_chairman_interaction_cd days = 3650 } }
			}
			had_country_flag = { flag = navy_chairman_interaction_cd days = 3650 }
		}
	}
	effect = {
		country_chairman_effect = { type = navy }
		country_event = { id = bertus_racial_military.5204 }
		hidden_effect = {
			clr_country_flag = navy_chairman_interaction_cd
			set_country_flag = navy_chairman_interaction_cd
		}
	}
    tooltip = navy_chairman_interaction_tt #Can use customizable localisation
}
custom_button = {
    name = racial_mil_update
    potential = {
		ai = no
	}
	trigger = {
		if = {
			limit = {
				has_country_flag = racial_mil_menu_cd
				NOT = { had_country_flag = { flag = racial_mil_menu_cd days = 30 } }
			}
			had_country_flag = { flag = racial_mil_menu_cd days = 30 }
		}
	}
	effect = {
		hidden_effect = {
			clr_country_flag = racial_mil_menu_cd
			set_country_flag = racial_mil_menu_cd
			country_event = {id = bertus_racial_military.1001}
			country_administration_effect = {
				type = military
				military = yes
			}
		}
	}
	tooltip = ""
}
custom_icon = {
	name = special_abilities_background
	potential = {
		is_city = yes
		controller = {
			has_estate_privilege = estate_ogre_stone_soup
		}
		NOT = { controlled_by = owner }
		FROM = {
			ai = no
		}
	}
	tooltip = ""
}
custom_button = {
    name = stone_soup
    potential = {
		is_city = yes
		controller = {
			has_estate_privilege = estate_ogre_stone_soup
		}
		NOT = { controlled_by = owner }
		FROM = {
			ai = no
			has_estate_privilege = estate_ogre_stone_soup
		}
	}
	trigger = {
		unit_in_battle = no
		NOT = { has_province_modifier = making_soup_modifier }
		if = {
			limit = { development = 100 }
			num_of_units_in_province = { who = controller amount = 50 }
		}
		else_if = {
			limit = { development = 90 }
			num_of_units_in_province = { who = controller amount = 45 }
		}
		else_if = {
			limit = { development = 80 }
			num_of_units_in_province = { who = controller amount = 40 }
		}
		else_if = {
			limit = { development = 70 }
			num_of_units_in_province = { who = controller amount = 35 }
		}
		else_if = {
			limit = { development = 60 }
			num_of_units_in_province = { who = controller amount = 30 }
		}
		else_if = {
			limit = { development = 50 }
			num_of_units_in_province = { who = controller amount = 25 }
		}
		else_if = {
			limit = { development = 40 }
			num_of_units_in_province = { who = controller amount = 20 }
		}
		else_if = {
			limit = { development = 30 }
			num_of_units_in_province = { who = controller amount = 15 }
		}
		else_if = {
			limit = { development = 20 }
			num_of_units_in_province = { who = controller amount = 10 }
		}
		else_if = {
			limit = { development = 18 }
			num_of_units_in_province = { who = controller amount = 9 }
		}
		else_if = {
			limit = { development = 16 }
			num_of_units_in_province = { who = controller amount = 8 }
		}
		else_if = {
			limit = { development = 14 }
			num_of_units_in_province = { who = controller amount = 7 }
		}
		else_if = {
			limit = { development = 12 }
			num_of_units_in_province = { who = controller amount = 6 }
		}
		else_if = {
			limit = { development = 10 }
			num_of_units_in_province = { who = controller amount = 5 }
		}
		else = { num_of_units_in_province = { who = controller amount = 4 } }
	}
	effect = {
		province_event = { id = bertus_changes.2030 }	#making soup
		custom_tooltip = "Our troops will be working 1 year for the Soup making"
	}
	tooltip = "Make Stone Soup"
}
custom_icon = {
	name = human_image_background
	potential = {
		has_country_modifier = human_administration
	}
	tooltip = ""
}
custom_icon = {
	name = elven_image_background
	potential = {
		has_country_modifier = elven_administration
	}
	tooltip = ""
}
custom_icon = {
	name = dwarven_image_background
	potential = {
		has_country_modifier = dwarven_administration
	}
	tooltip = ""
}
custom_icon = {
	name = halfling_image_background
	potential = {
		has_country_modifier = halfling_administration
	}
	tooltip = ""
}
custom_icon = {
	name = gnomish_image_background
	potential = {
		has_country_modifier = gnomish_administration
	}
	tooltip = ""
}
custom_icon = {
	name = harimari_image_background
	potential = {
		has_country_modifier = harimari_administration
	}
	tooltip = ""
}
custom_icon = {
	name = gnollish_image_background
	potential = {
		has_country_modifier = gnollish_administration
	}
	tooltip = ""
}
custom_icon = {
	name = ruinborn_image_background
	potential = {
		has_country_modifier = ruinborn_administration
	}
	tooltip = ""
}
custom_icon = {
	name = orcish_image_background
	potential = {
		has_country_modifier = orcish_administration
	}
	tooltip = ""
}
custom_icon = {
	name = goblin_image_background
	potential = {
		has_country_modifier = goblin_administration
	}
	tooltip = ""
}
custom_icon = {
	name = ogre_image_background
	potential = {
		has_country_modifier = ogre_administration
	}
	tooltip = ""
}
custom_icon = {
	name = centaur_image_background
	potential = {
		has_country_modifier = centaur_administration
	}
	tooltip = ""
}
custom_icon = {
	name = troll_image_background
	potential = {
		has_country_modifier = troll_administration
	}
	tooltip = ""
}
custom_icon = {
	name = harpy_image_background
	potential = {
		has_country_modifier = harpy_administration
	}
	tooltip = ""
}
custom_icon = {
	name = half_orcish_image_background
	potential = {
		has_country_modifier = half_orcish_administration
	}
	tooltip = ""
}
custom_icon = {
	name = half_elven_image_background
	potential = {
		has_country_modifier = half_elven_administration
	}
	tooltip = ""
}
custom_icon = {
	name = kobold_image_background
	potential = {
		has_country_modifier = kobold_administration
	}
	tooltip = ""
}
custom_icon = {
	name = hobgoblin_image_background
	potential = {
		has_country_modifier = hobgoblin_administration
	}
	tooltip = ""
}
custom_icon = {
	name = lizardfolk_image_background
	potential = {
		has_country_modifier = lizardfolk_administration
	}
	tooltip = ""
}
custom_icon = {
	name = dookan_guidance_activated
	potential = {
		religion = old_dookan
	}
	tooltip = "[Root.getGreatDookanGuidanceName]"
	frame = {
	    number = 1
	    trigger = { 
			has_country_modifier = dookans_guidance_peace
		}
	}
	frame = {
	    number = 2
	    trigger = { 
			has_country_modifier = dookans_guidance_war
		}
	}
	frame = { #First matched frame clause will be used.
	    number = 3
	    trigger = { 
		}
	}
}
custom_button = {
	name = one_v_one_high_piety_action
	potential = { uses_piety = yes ai = no }
	trigger = {
		hidden_trigger = {
			OR = {
				NOT = { has_country_flag = one_v_one_high_piety_action_flag }
				had_country_flag = { flag = one_v_one_high_piety_action_flag days = 1825 }
			}
			piety = 0.75
		}
	}
	effect = {
		tooltip = { add_years_of_income = 0.5 }
		if = {
			limit = { NOT = { has_country_flag = one_v_one_piety_action_confirm_flag } }
			set_country_flag = one_v_one_high_piety_action_confirm_flag
			set_country_flag = one_v_one_piety_action_confirm_flag
			if = {
				limit = { has_country_flag = one_v_one_high_piety_action_flag NOT = { had_country_flag = { flag = one_v_one_high_piety_action_flag days = 1825 } } }
				custom_tooltip = one_v_one_high_piety_action_cooldown_tt
			}
		}
		hidden_effect = { save_yearly_income = yes }
	}
	tooltip = one_v_one_high_piety_action_tt
}
custom_icon = {
	name = one_v_one_high_piety_action_confirm_background
	potential = { has_country_flag = one_v_one_high_piety_action_confirm_flag }
}
custom_text_box = {
    name = one_v_one_high_piety_action_effect
    potential = { has_country_flag = one_v_one_high_piety_action_confirm_flag }
    tooltip = one_v_one_high_piety_action_effect
}
custom_button = {
	name = one_v_one_piety_action_not_confirm
	potential = { has_country_flag = one_v_one_piety_action_confirm_flag }
	trigger = {}
	effect = {
		clr_country_flag = one_v_one_piety_action_confirm_flag
		clr_country_flag = one_v_one_low_piety_action_confirm_flag
		clr_country_flag = one_v_one_high_piety_action_confirm_flag
	}
}
custom_button = {
	name = one_v_one_piety_action_confirm
	potential = { has_country_flag = one_v_one_piety_action_confirm_flag }
	trigger = {}
	effect = {
		clr_country_flag = one_v_one_piety_action_confirm_flag
		clr_country_flag = one_v_one_low_piety_action_confirm_flag
		clr_country_flag = one_v_one_high_piety_action_confirm_flag
		add_years_of_income = 1
		hidden_effect = { add_piety = -0.5 }
		set_country_flag = one_v_one_high_piety_action_flag
		hidden_effect = {
			export_to_variable = { which = one_v_one_high_piety_action_was_set_year value = trigger_value:is_year }
			export_to_variable = { which = one_v_one_high_piety_action_was_set_month value = trigger_value:is_month }
			set_variable = { which = one_v_one_high_piety_action_length value = 5 }
			change_variable = { which = one_v_one_high_piety_action_length which = one_v_one_high_piety_action_was_set_year }
		}
	}
}