custom_button = {
    name = magic_menu
    potential = {
		ruler_has_mage_personality = yes
	}
	trigger = {
		hidden_trigger = {
			ai = no	#bertus mod
			NOT = { has_ruler_flag = magic_menu_opened }
		}
		NOT = { has_country_flag = in_magocracy_heir_selection }
		NOT = { has_ruler_modifier = magic_realm_menu_cooldown }
		NOT = { has_ruler_modifier = ruler_recently_casted_spell }
		if = { limit = { NOT = {months_of_ruling = 2 }}
			months_of_ruling = 2
		}
		if = { limit = { is_lesser_in_union = yes }
			is_lesser_in_union = no
		}
		if = { limit = { ai = yes }
			NOT = { has_ruler_modifier = ruler_recently_casted_spell }
		}
		if = { limit = { has_ruler_flag = abjuration_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_abjuration_3 }
		}
		else_if = { limit = { has_ruler_flag = abjuration_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_abjuration_2 }
		}
		else_if = { limit = { has_ruler_flag = abjuration_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_abjuration_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_abjuration_0 }
		}
		if = { limit = { has_ruler_flag = conjuration_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_conjuration_3 }
		}
		else_if = { limit = { has_ruler_flag = conjuration_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_conjuration_2 }
		}
		else_if = { limit = { has_ruler_flag = conjuration_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_conjuration_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_conjuration_0 }
		}
		if = { limit = { has_ruler_flag = divination_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_divination_3 }
		}
		else_if = { limit = { has_ruler_flag = divination_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_divination_2 }
		}
		else_if = { limit = { has_ruler_flag = divination_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_divination_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_divination_0 }
		}
		if = { limit = { has_ruler_flag = enchantment_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_enchantment_3 }
		}
		else_if = { limit = { has_ruler_flag = enchantment_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_enchantment_2 }
		}
		else_if = { limit = { has_ruler_flag = enchantment_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_enchantment_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_enchantment_0 }
		}
		if = { limit = { has_ruler_flag = evocation_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_evocation_3 }
		}
		else_if = { limit = { has_ruler_flag = evocation_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_evocation_2 }
		}
		else_if = { limit = { has_ruler_flag = evocation_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_evocation_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_evocation_0 }
		}
		if = { limit = { has_ruler_flag = illusion_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_illusion_3 }
		}
		else_if = { limit = { has_ruler_flag = illusion_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_illusion_2 }
		}
		else_if = { limit = { has_ruler_flag = illusion_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_illusion_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_illusion_0 }
		}
		if = { limit = { has_ruler_flag = necromancy_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_necromancy_3 }
		}
		else_if = { limit = { has_ruler_flag = necromancy_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_necromancy_2 }
		}
		else_if = { limit = { has_ruler_flag = necromancy_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_necromancy_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_necromancy_0 }
		}
		if = { limit = { has_ruler_flag = transmutation_3 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_transmutation_3 }
		}
		else_if = { limit = { has_ruler_flag = transmutation_2 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_transmutation_2 }
		}
		else_if = { limit = { has_ruler_flag = transmutation_1 }
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_transmutation_1 }
		}
		else = {
			custom_trigger_tooltip = { always = yes tooltip = tooltip_has_transmutation_0 }
		}
	}
	effect = {
		hidden_effect = { country_event = { id = magic_ruler.0 } }
		open_single_menu = yes	#prevents people from opening the menu multiple times
		#Allows for vampires that become mages naturally
		hidden_effect = {
			if = { 
				limit = { has_ruler_flag = is_a_vampire }
				set_country_flag = mage_vampire
			}
		}
	}
	tooltip = open_ruler_magic_menu_tt
}
custom_button = {
    name = trade_goods_update #Must match a scripted iconType in a .gui file
    potential = {
		always = yes
	} #Determines when the icon is visible
	trigger = {
		if = {
			limit = {
				has_country_flag = trade_goods_update_cd
				NOT = { had_country_flag = { flag = trade_goods_update_cd days = 30 } }
			}
			had_country_flag = { flag = trade_goods_update_cd days = 30 }
		}
	}
	effect = {
		custom_tooltip = bertus_open_goods_menu_tt #Can use customizable localisation
		hidden_effect = {
			country_event = {id = ANEX_event.34}
			country_event = {id = bertus_changes.7000}
			clr_country_flag = trade_goods_update_cd
			set_country_flag = trade_goods_update_cd
		}
	}
    tooltip = bertus_open_goods_menu #Can use customizable localisation
}
custom_button = {
    name = siege_magic #Must match a scripted iconType in a .gui file
    potential = {
		ai = no	#bertus mod
		ruler_has_mage_personality = yes
		months_of_ruling = 2
		NOT = { has_ruler_flag = magic_menu_opened }
	} #Determines when the icon is visible
	trigger = {
		custom_trigger_tooltip = {
			tooltip = ruler_knows_siege_spell_tt
			OR = {
				has_ruler_flag = conjuration_1
				has_ruler_flag = evocation_1
				has_ruler_flag = transmutation_2
				has_ruler_flag = enchantment_3
			}
		}
		is_at_war = yes
		NOT = { has_ruler_modifier = magic_siege_cooldown }
		is_lesser_in_union = no
		any_army = {
			location = {
				fort_level = 1
				sieged_by = ROOT
				unit_has_leader = yes
				has_ruler_leader_from = ROOT
				num_of_units_in_province = {
					who = ROOT
					amount = 1
				}
			}
		}
		hidden_trigger = {
			NOT = { has_ruler_flag = magic_menu_opened }
		}
	}
	effect = {
		set_ruler_flag = magic_siege_menu
		custom_tooltip = open_siege_magic_menu_tt
		hidden_effect = { country_event = { id = magic_siege.1 } }
		open_single_menu = yes	#prevents people from opening the menu multiple times
	}
    tooltip = siege_magic_tt #Can use customizable localisation
}
custom_button = {
    name = first_chairman_interaction #Must match a scripted iconType in a .gui file
    potential = {
		ai = no
	} #Determines when the icon is visible
	trigger = {
		if = {
			limit = {
				has_country_flag = first_chairman_interaction_cd
				NOT = { had_country_flag = { flag = first_chairman_interaction_cd days = 3650 } }
			}
			had_country_flag = { flag = first_chairman_interaction_cd days = 3650 }
		}
	}
	effect = {
		country_chairman_effect = { type = first_hand }
		country_event = { id = bertus_racial_military.5200 }
		hidden_effect = {
			clr_country_flag = first_chairman_interaction_cd
			set_country_flag = first_chairman_interaction_cd
		}
	}
    tooltip = first_chairman_interaction_tt #Can use customizable localisation
}
custom_button = {
    name = diplomacy_chairman_interaction #Must match a scripted iconType in a .gui file
    potential = {
		ai = no
	} #Determines when the icon is visible
	trigger = {
		if = {
			limit = {
				has_country_flag = diplomacy_chairman_interaction_cd
				NOT = { had_country_flag = { flag = diplomacy_chairman_interaction_cd days = 3650 } }
			}
			had_country_flag = { flag = diplomacy_chairman_interaction_cd days = 3650 }
		}
	}
	effect = {
		country_chairman_effect = { type = diplomacy }
		country_event = { id = bertus_racial_military.5201 }
		hidden_effect = {
			clr_country_flag = diplomacy_chairman_interaction_cd
			set_country_flag = diplomacy_chairman_interaction_cd
		}
	}
    tooltip = diplomacy_chairman_interaction_tt #Can use customizable localisation
}
custom_button = {
    name = military_chairman_interaction #Must match a scripted iconType in a .gui file
    potential = {
		ai = no
	} #Determines when the icon is visible
	trigger = {
		if = {
			limit = {
				has_country_flag = military_chairman_interaction_cd
				NOT = { had_country_flag = { flag = military_chairman_interaction_cd days = 3650 } }
			}
			had_country_flag = { flag = military_chairman_interaction_cd days = 3650 }
		}
	}
	effect = {
		country_chairman_effect = { type = military }
		country_event = { id = bertus_racial_military.5202 }
		hidden_effect = {
			clr_country_flag = military_chairman_interaction_cd
			set_country_flag = military_chairman_interaction_cd
		}
	}
    tooltip = military_chairman_interaction_tt #Can use customizable localisation
}
custom_button = {
    name = economic_chairman_interaction #Must match a scripted iconType in a .gui file
    potential = {
		ai = no
	} #Determines when the icon is visible
	trigger = {
		if = {
			limit = {
				has_country_flag = economic_chairman_interaction_cd
				NOT = { had_country_flag = { flag = economic_chairman_interaction_cd days = 3650 } }
			}
			had_country_flag = { flag = economic_chairman_interaction_cd days = 3650 }
		}
	}
	effect = {
		country_chairman_effect = { type = economic }
		country_event = { id = bertus_racial_military.5203 }
		if = {
			limit = {
				has_country_modifier = estate_halfling_economic_chairman_modifier
			}
			custom_tooltip = estate_halfling_economic_chairman_tooltip
		}
		hidden_effect = {
			clr_country_flag = economic_chairman_interaction_cd
			set_country_flag = economic_chairman_interaction_cd
		}
	}
    tooltip = economic_chairman_interaction_tt #Can use customizable localisation
}
custom_button = {
    name = navy_chairman_interaction #Must match a scripted iconType in a .gui file
    potential = {
		ai = no
	} #Determines when the icon is visible
	trigger = {
		if = {
			limit = { all_owned_province = { has_port = no } }
			any_owned_province = { has_port = yes }
		}
		if = {
			limit = {
				has_country_flag = navy_chairman_interaction_cd
				NOT = { had_country_flag = { flag = navy_chairman_interaction_cd days = 3650 } }
			}
			had_country_flag = { flag = navy_chairman_interaction_cd days = 3650 }
		}
	}
	effect = {
		country_chairman_effect = { type = navy }
		country_event = { id = bertus_racial_military.5204 }
		hidden_effect = {
			clr_country_flag = navy_chairman_interaction_cd
			set_country_flag = navy_chairman_interaction_cd
		}
	}
    tooltip = navy_chairman_interaction_tt #Can use customizable localisation
}
custom_button = {
    name = racial_mil_update
    potential = {
		ai = no
	}
	trigger = {
		if = {
			limit = {
				has_country_flag = racial_mil_menu_cd
				NOT = { had_country_flag = { flag = racial_mil_menu_cd days = 30 } }
			}
			had_country_flag = { flag = racial_mil_menu_cd days = 30 }
		}
	}
	effect = {
		hidden_effect = {
			clr_country_flag = racial_mil_menu_cd
			set_country_flag = racial_mil_menu_cd
			country_event = {id = bertus_racial_military.1001}
			country_administration_effect = {
				type = military
				military = yes
			}
		}
	}
	tooltip = ""
}