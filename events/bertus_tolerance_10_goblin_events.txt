namespace = goblin_tolerance_events

province_event = {	# Racial Minister
	id = goblin_tolerance_events.1001
	title = goblin_tolerance_events.1001.t
	desc = goblin_tolerance_events.1001.desc
	picture = ADVISOR_eventPicture
	GOTO = ROOT

	trigger = {
		is_city = yes
		owner = {NOT = {has_country_modifier = goblin_administration}}
		has_goblin_majority_trigger = yes
		OR = {
			NOT = {
				region_for_scope_province = {
					has_province_flag = goblin_tolerance_events.1001_flag_cd
				}
			}
			region_for_scope_province = {
				had_province_flag = {
					flag = goblin_tolerance_events.1001_flag_cd
					days = 7300
				}
			}
		}
	}
	mean_time_to_happen = {
		months = 2400
		modifier = {factor = 2.0 owner = {any_owned_province = {has_goblin_majority_trigger = yes owner = {employed_advisor = {culture = PREV}}}}}
		modifier = {factor = 0.75 owner = {has_country_modifier = racial_focus_goblin}}
		modifier = {factor = 0.75 owner = {has_idea = tolerance_idea_2}}
		modifier = {factor = 0.90 owner = {medium_tolerance_goblin_race_trigger = yes}}
		modifier = {factor = 5.0 has_small_goblin_minority_trigger = yes}
		modifier = {factor = 3.0 has_large_goblin_minority_trigger = yes}
		modifier = {factor = 0.90 development = 30}
		modifier = {factor = 0.90 development = 40}
	}
	immediate = {
		hidden_effect = {
			owner = {
				save_event_target_as = country_elder_advisor_target
			}
			clr_province_flag = goblin_tolerance_events.1001_flag_cd 
			set_province_flag = goblin_tolerance_events.1001_flag_cd 
			save_event_target_as = province_event_target
			save_event_target_as = advisor_province_event_target
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
			set_variable = {which = cash_per_dev_tooltip value = 0}
			change_variable = {which = cash_per_dev_tooltip value = 2}
			set_variable = {which = prestige_per_dev_tooltip value = 0}
			change_variable = {which = prestige_per_dev_tooltip value = 0.2}
		}
	}
	option = {	# So what?
		name = goblin_tolerance_events.1001.a
		
		add_unrest = 10
	}
	option = {	# Recruit
		name = goblin_tolerance_events.1001.b
		owner = {
			get_racial_advisor = { race = goblin class = adm }
			add_estate_loyalty = { estate = estate_goblin loyalty = 5 }
		}
		get_tolerance_from_provinces = { race = goblin }
		lose_treasury_from_provinces = { cash_per_dev = 2 }
	}
	option = {	# Remove Him
		name = goblin_tolerance_events.1001.c
		get_intolerance_from_provinces = { race = goblin }
		gain_prestige_from_provinces = { prestige_per_dev = 0.2 }
		owner = {
			increase_legitimacy_small_effect = yes			
			add_estate_loyalty = { estate = estate_goblin loyalty = -10 }
		}
	}
}
province_event = {	# Minor landholders demand autonomy
	id = goblin_tolerance_events.1002
	title = goblin_tolerance_events.1002.t
	desc = goblin_tolerance_events.1002.desc
	picture = GREAT_BUILDING_eventPicture
	GOTO = ROOT

	trigger = {
		is_city = yes
		owner = {NOT = {has_country_modifier = goblin_administration}}
		has_any_goblin_pop_trigger = yes
		OR = {
			NOT = {
				region_for_scope_province = {
					has_province_flag = goblin_tolerance_events.1002_flag_cd
				}
			}
			region_for_scope_province = {
				had_province_flag = {
					flag = goblin_tolerance_events.1002_flag_cd
					days = 7300
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 2400
		modifier = {factor = 2.00 owner = {has_estate_influence_modifier = {estate = estate_goblin modifier = EST_VAL_GOBLIN_LANDHOLDERS_DEMANDS}}}
		modifier = {factor = 2.00 owner = {stability = 2}}
		modifier = {factor = 2.00 owner = {legitimacy_equivalent = 80}}
		modifier = {factor = 0.75 owner = {has_country_modifier = racial_focus_goblin}}
		modifier = {factor = 0.75 owner = {has_idea = tolerance_idea_2}}
		modifier = {factor = 2.00 owner = {low_tolerance_goblin_race_trigger = yes}}
		modifier = {factor = 0.90 owner = {medium_tolerance_goblin_race_trigger = yes}}
		modifier = {factor = 0.80 owner = {high_tolerance_goblin_race_trigger = yes}}
		modifier = {factor = 0.90 has_large_goblin_minority_trigger = yes}
		modifier = {factor = 0.90 has_goblin_majority_trigger = yes}
		modifier = {factor = 0.90 development = 30}
		modifier = {factor = 0.90 development = 40}
	}
	immediate = {
		hidden_effect = {
			clr_province_flag = goblin_tolerance_events.1002_flag_cd 
			set_province_flag = goblin_tolerance_events.1002_flag_cd 
			save_event_target_as = province_event_target
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
			set_variable = {which = cash_per_dev_tooltip value = 0}
			change_variable = {which = cash_per_dev_tooltip value = 10}
		}
	}
	option = {	# We cannot do this
		name = goblin_tolerance_events.1002.a
		
		add_unrest = 10
	}
	option = {	# Aight then
		name = goblin_tolerance_events.1002.b
		owner = {add_estate_loyalty = { estate = estate_goblin loyalty = 20 }}
		add_goblin_minority_size_effect = yes
		add_local_autonomy = 25
		get_tolerance_from_provinces = { race = goblin }
		owner = {
			add_estate_influence_modifier = {
				estate = estate_goblin
				desc = EST_VAL_GOBLIN_LANDHOLDERS_DEMANDS
				influence = 5
				duration = 7300
			}
		}
	}
	option = {	# How about we confiscate your land instead?
		name = goblin_tolerance_events.1002.c
		owner = {
			add_estate_loyalty = { estate = estate_goblin loyalty = -20 }
		}
		add_unrest = 20
		remove_goblin_minority_size_effect = yes
		remove_1_dev_to_provinces = yes
		get_intolerance_from_provinces = { race = goblin }
		gain_treasury_from_provinces = { cash_per_dev = 10 }
		hidden_effect = {
			random_province = {
				limit = {
					province_distance = { who = THIS distance = 100 }
					owner = {
						NOT = {has_estate_privilege = estate_goblin_purge}
						NOT = {has_estate_privilege = estate_goblin_expulsion}
					}					
				}
				add_1_dev_to_provinces = yes
				add_goblin_minority_size_effect = yes
			}
		}
	}
}
province_event = {	# Ambitious goblins in government
	id = goblin_tolerance_events.1003
	title = goblin_tolerance_events.1003.t
	desc = goblin_tolerance_events.1003.desc
	picture = PAINTER_ARTIST_eventPicture
	GOTO = ROOT

	trigger = {
		is_city = yes
		has_any_goblin_pop_trigger = yes
		owner = {
			NOT = {has_country_modifier = goblin_administration}
			OR = {
				medium_tolerance_goblin_race_trigger = yes
				high_tolerance_goblin_race_trigger = yes
			}
		}
		OR = {
			NOT = {
				region_for_scope_province = {
					has_province_flag = goblin_tolerance_events.1003_flag_cd
				}
			}
			region_for_scope_province = {
				had_province_flag = {
					flag = goblin_tolerance_events.1003_flag_cd
					days = 7300
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 2400
		modifier = {factor = 0.75 owner = {has_country_modifier = racial_focus_goblin}}
		modifier = {factor = 0.75 owner = {has_idea = tolerance_idea_2}}
		modifier = {factor = 0.90 has_large_goblin_minority_trigger = yes}
		modifier = {factor = 0.90 has_goblin_majority_trigger = yes}
		modifier = {factor = 0.90 development = 30}
		modifier = {factor = 0.90 development = 40}
	}

	immediate = {
		hidden_effect = {
			clr_province_flag = goblin_tolerance_events.1003_flag_cd 
			set_province_flag = goblin_tolerance_events.1003_flag_cd 
			save_event_target_as = province_event_target
			save_event_target_as = goblin_in_government_province
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
			set_variable = {which = prestige_per_dev_tooltip value = 0}
			change_variable = {which = prestige_per_dev_tooltip value = 0.2}
			set_variable = {which = cash_per_dev_tooltip value = 0}
			change_variable = {which = cash_per_dev_tooltip value = 5}
		}
	}
	option = {	# I guess its to be expected
		name = goblin_tolerance_events.1003.a
		ai_chance = {factor = 50}
		owner = {
			add_adm_power = -20			
			add_estate_loyalty = { estate = estate_goblin loyalty = 10 }
		}
	}
	option = {	# Their ambition will drive us further
		name = goblin_tolerance_events.1003.b
		owner = {			
			add_estate_loyalty = { estate = all loyalty = -10 }
			add_estate_loyalty = { estate = estate_goblin loyalty = 30 }
		}
		add_scaled_local_adm_power = 2
		add_scaled_local_dip_power = 2
		add_scaled_local_mil_power = 2
		get_tolerance_from_provinces = { race = goblin }
		lose_prestige_from_provinces = { prestige_per_dev = 0.2 }
	}
	option = {	# Curtail ambitious officials
		name = goblin_tolerance_events.1003.c
		owner = {			
			add_estate_loyalty = { estate = all loyalty = 10 }
			add_estate_loyalty = { estate = estate_goblin loyalty = -20 }
			increase_legitimacy_small_effect = yes
		}
		get_intolerance_from_provinces = { race = goblin }
	}
	option = {	# Reward them for their contributions
		name = goblin_tolerance_events.1003.d
		trigger = { owner = { high_tolerance_goblin_race_trigger = yes } }
		owner = {change_government_reform_progress = 10}
		add_scaled_local_adm_power = 3
		add_scaled_local_dip_power = 3
		add_scaled_local_mil_power = 3
		lose_treasury_from_provinces = { cash_per_dev = 5 }
	}
}
country_event = {	# Goblin dominance undermining us
	id = goblin_tolerance_events.1004
	title = goblin_tolerance_events.1004.t
	desc = goblin_tolerance_events.1004.desc
	picture = OVEREXTENSION_eventPicture

	trigger = {
		NOT = {has_country_modifier = goblin_administration}
		OR = {
			estate_influence = { estate = estate_goblin influence = 40 }
			estate_territory = { estate = estate_goblin territory = 40 }
			calc_true_if = {
				has_estate_privilege = estate_goblin_first_hand_chairman
				has_country_modifier = estate_goblin_diplomacy_chairman_modifier
				has_country_modifier = estate_goblin_military_chairman_modifier
				has_country_modifier = estate_goblin_economic_chairman_modifier
				has_country_modifier = estate_goblin_navy_chairman_modifier
				amount = 2
			}
			any_owned_province = {
				has_goblin_majority_trigger = yes
				ROOT = { employed_advisor = { culture = PREV } }
			}
		}
	}

	mean_time_to_happen = {
		months = 2400
		modifier = {factor = 3.00 NOT = {had_country_flag = { flag = goblin_tolerance_events_1004_flag days = 1825}}}
		modifier = {
			factor = 0.9
			calc_true_if = {
				has_estate_privilege = estate_goblin_first_hand_chairman
				has_country_modifier = estate_goblin_diplomacy_chairman_modifier
				has_country_modifier = estate_goblin_military_chairman_modifier
				has_country_modifier = estate_goblin_economic_chairman_modifier
				has_country_modifier = estate_goblin_navy_chairman_modifier
				amount = 3
			}
		}
		modifier = {
			factor = 0.9
			calc_true_if = {
				has_estate_privilege = estate_goblin_first_hand_chairman
				has_country_modifier = estate_goblin_diplomacy_chairman_modifier
				has_country_modifier = estate_goblin_military_chairman_modifier
				has_country_modifier = estate_goblin_economic_chairman_modifier
				has_country_modifier = estate_goblin_navy_chairman_modifier
				amount = 4
			}
		}
		modifier = {factor = 0.9 estate_territory = {estate = estate_goblin territory = 60}}
		modifier = {factor = 0.9 estate_territory = {estate = estate_goblin territory = 80}}
		modifier = {factor = 0.9 estate_influence = {estate = estate_goblin influence = 60}}
		modifier = {factor = 0.9 estate_influence = {estate = estate_goblin influence = 80}}
		modifier = {factor = 0.9 NOT = {legitimacy_equivalent = 90}}
		modifier = {factor = 0.9 NOT = {legitimacy_equivalent = 80}}
		modifier = {factor = 0.9 NOT = {legitimacy_equivalent = 70}}
		modifier = {factor = 0.9 NOT = {legitimacy_equivalent = 60}}
		modifier = {factor = 0.9 NOT = {legitimacy_equivalent = 50}}
		modifier = {factor = 0.75 has_idea = tolerance_idea_2}
	}
	immediate = {
		hidden_effect = {
			clr_country_flag = goblin_tolerance_events_1004_flag
			set_country_flag = goblin_tolerance_events_1004_flag
		}
	}
	option = {	# What can we do?
		name = goblin_tolerance_events.1004.a
		
		reduce_legitimacy_small_effect = yes
		add_prestige = -10
	}
	option = {	# That just means less work for us
		name = goblin_tolerance_events.1004.b
		reduce_legitimacy_small_effect = yes
		add_estate_loyalty_modifier = {
			estate = estate_goblin
			desc = EST_VAL_GOBLIN_TAKE_POWER
			loyalty = 20
			duration = 7300
		}
		add_estate_influence_modifier = {
			estate = estate_goblin
			desc = EST_VAL_GOBLIN_TAKE_POWER
			influence = 20
			duration = 7300
		}
	}
	option = {	# They need to be put in their place
		name = goblin_tolerance_events.1004.c
		add_prestige_or_monarch_power = {amount =  10}
		increase_legitimacy_small_effect = yes
		small_decrease_of_goblin_tolerance_effect = yes		
		add_estate_loyalty = { estate = estate_goblin loyalty = -210 }
		add_estate_loyalty_modifier = {
			estate = estate_goblin
			desc = EST_VAL_GOBLIN_PUT_IN_THEIR_PLACE
			loyalty = -20
			duration = 7300
		}
		add_estate_influence_modifier = {
			estate = estate_goblin
			desc = EST_VAL_GOBLIN_PUT_IN_THEIR_PLACE
			influence = -20
			duration = 7300
		}
	}
}
province_event = {	# Rapid growth due to goblin minority
	id = goblin_tolerance_events.1005
	title = goblin_tolerance_events.1005.t
	desc = goblin_tolerance_events.1005.desc
	picture = CITY_VIEW_eventPicture
	GOTO = ROOT

	trigger = {
		is_city = yes
		owner = {NOT = {has_country_modifier = goblin_administration}}
		has_goblin_minority_trigger = yes
		OR = {
			NOT = {
				region_for_scope_province = {
					has_province_flag = goblin_tolerance_events.1005_flag_cd
				}
			}
			region_for_scope_province = {
				had_province_flag = {
					flag = goblin_tolerance_events.1005_flag_cd
					days = 7300
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 2400
		modifier = {factor = 0.75 owner = {has_country_modifier = racial_focus_goblin}}
		modifier = {factor = 0.75 owner = {has_idea = tolerance_idea_2}}
		modifier = {factor = 0.90 has_large_goblin_minority_trigger = yes}
		modifier = {factor = 0.90 has_goblin_majority_trigger = yes}
		modifier = {factor = 0.95 development = 20}
		modifier = {factor = 0.95 development = 30}
		modifier = {factor = 0.95 development = 40}
	}

	immediate = {
		hidden_effect = {
			clr_province_flag = goblin_tolerance_events.1005_flag_cd 
			set_province_flag = goblin_tolerance_events.1005_flag_cd 
			save_event_target_as = province_event_target
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
			set_variable = {which = cash_per_dev_tooltip value = 0}
			change_variable = {which = cash_per_dev_tooltip value = 2}
			area = {
				set_variable = {which = province_development value = 0}
				export_to_variable = {which = province_development value = development}
				set_variable = {which = cash_per_dev_tooltip value = 0}
				change_variable = {which = cash_per_dev_tooltip value = 2}
			}
		}
	}
	option = {	# Great!
		name = goblin_tolerance_events.1005.a

		add_unrest = 10
		add_goblin_minority_size_effect = yes
	} 
	option = {	# Support further development
		name = goblin_tolerance_events.1005.b
		owner = {add_estate_loyalty = { estate = estate_goblin loyalty = 10 }}
		get_tolerance_from_provinces = { race = goblin }
		lose_treasury_from_provinces = { cash_per_dev = 2}
		add_goblin_minority_size_effect = yes
	}
	option = {	# They have no further use
		name = goblin_tolerance_events.1005.c

		owner = {add_estate_loyalty = { estate = estate_goblin loyalty = -10 }}
		get_intolerance_from_provinces = { race = goblin }
		remove_goblin_minority_size_effect = yes
		remove_1_dev_to_provinces = yes
		hidden_effect = {
			random_province = {
				limit = {
					province_distance = { who = THIS distance = 100 }
					owner = {
						NOT = {has_estate_privilege = estate_goblin_purge}
						NOT = {has_estate_privilege = estate_goblin_expulsion}
					}					
				}
				add_1_dev_to_provinces = yes
				add_goblin_minority_size_effect = yes
			}
		}
	}
}
province_event = {	# Angry goblin mob forms
	id = goblin_tolerance_events.1006
	title = goblin_tolerance_events.1006.t
	desc = goblin_tolerance_events.1006.desc
	picture = ANGRY_MOB_eventPicture
	GOTO = ROOT

	trigger = {
		is_city = yes
		owner = {NOT = {has_country_modifier = goblin_administration}}
		has_any_goblin_pop_trigger = yes
		pure_unrest = 1
		OR = {
			NOT = {
				region_for_scope_province = {
					has_province_flag = goblin_tolerance_events.1006_flag_cd
				}
			}
			region_for_scope_province = {
				had_province_flag = {
					flag = goblin_tolerance_events.1006_flag_cd
					days = 7300
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 2400
		modifier = {factor = 0.75 owner = {has_country_modifier = racial_focus_goblin}}
		modifier = {factor = 0.75 owner = {has_idea = tolerance_idea_2}}
		modifier = {factor = 2.0 pure_unrest = -5}
		modifier = {factor = 2.0 pure_unrest = -10}
		modifier = {factor = 0.90 has_large_goblin_minority_trigger = yes}
		modifier = {factor = 0.90 has_goblin_majority_trigger = yes}
		modifier = {factor = 0.90 development = 30}
		modifier = {factor = 0.90 development = 40}
		modifier = {factor = 0.50 has_oppressed_goblin_pop_trigger = yes}
		modifier = {factor = 0.90 pure_unrest = 5}
		modifier = {factor = 0.90 pure_unrest = 10}
	}

	immediate = {
		hidden_effect = {
			clr_province_flag = goblin_tolerance_events.1006_flag_cd 
			set_province_flag = goblin_tolerance_events.1006_flag_cd 
			save_event_target_as = province_event_target
			save_event_target_as = goblin_mob_province
			set_variable = {which = province_manpower value = 0}
			export_to_variable = {which = province_manpower value = base_manpower}
			set_variable = {which = manpower_per_dev_tooltip value = 0}
			change_variable = {which = manpower_per_dev_tooltip value = 500}
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
			set_variable = {which = prestige_per_dev_tooltip value = 0}
			change_variable = {which = prestige_per_dev_tooltip value = 0.1}
		}
	}
	option = {	# Just goblins being goblins
		name = goblin_tolerance_events.1006.b
		
		add_unrest = 10
	}
	option = {	# De-escalate the situation
		name = goblin_tolerance_events.1006.a
		
		owner = {add_estate_loyalty = { estate = estate_goblin loyalty = 10 }}
		add_unrest = -10
		lose_prestige_from_provinces = { prestige_per_dev = 0.1 }
	}
	option = {	# Send out the troops!
		name = goblin_tolerance_events.1006.c
		trigger = {owner = {manpower = 5}}
		owner = {add_estate_loyalty = { estate = estate_goblin loyalty = -10 }}
		lose_manpower_from_provinces = { manpower_per_dev = 0.5 }
		remove_goblin_minority_size_effect = yes
		remove_1_dev_to_provinces = yes
		hidden_effect = {
			random_province = {
				limit = {
					province_distance = { who = THIS distance = 100 }
					owner = {
						NOT = {has_estate_privilege = estate_goblin_purge}
						NOT = {has_estate_privilege = estate_goblin_expulsion}
					}					
				}
				add_1_dev_to_provinces = yes
				add_goblin_minority_size_effect = yes
			}
		}
	}
}
province_event = {	# Goblin highwaymen
	id = goblin_tolerance_events.1007
	title = goblin_tolerance_events.1007.t
	desc = goblin_tolerance_events.1007.desc
	picture = BORDER_TENSION_eventPicture
	GOTO = ROOT

	trigger = {
		is_city = yes
		owner = {NOT = {has_country_modifier = goblin_administration}}
		has_any_goblin_pop_trigger = yes
		NOT = {owner = {high_tolerance_goblin_race_trigger = yes }}
		NOT = { has_province_modifier = highwaymen_modifier }
		NOT = { has_province_modifier = populace_punished_for_highwaymen_modifier }
		OR = {
			NOT = {
				area_for_scope_province = {
					has_province_flag = goblin_tolerance_events.1007_flag_cd
				}
			}
			area_for_scope_province = {
				had_province_flag = {
					flag = goblin_tolerance_events.1007_flag_cd
					days = 7300
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 2400
		modifier = {factor = 0.75 owner = {has_country_modifier = racial_focus_goblin}}
		modifier = {factor = 2.00 owner = {high_tolerance_goblin_race_trigger = yes}}
		modifier = {factor = 0.75 owner = {has_idea = tolerance_idea_2}}
		modifier = {factor = 0.90 has_large_goblin_minority_trigger = yes}
		modifier = {factor = 0.90 has_goblin_majority_trigger = yes}
		modifier = {factor = 0.90 development = 30}
		modifier = {factor = 0.90 development = 40}
		modifier = {factor = 0.50 has_oppressed_goblin_pop_trigger = yes}
		modifier = {factor = 0.90 pure_unrest = 5}
		modifier = {factor = 0.90 pure_unrest = 10}
		modifier = {factor = 0.50 any_neighbor_province = {has_province_modifier = highwaymen_modifier}}
	}

	immediate = {
		hidden_effect = {
			save_event_target_as = province_event_target
			set_variable = {which = province_manpower value = 0}
			export_to_variable = {which = province_manpower value = base_manpower}
			set_variable = {which = manpower_per_dev_tooltip value = 0}
			change_variable = {which = manpower_per_dev_tooltip value = 500}
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
		}
	}
	option = {	# Not worth finding them
		name = goblin_tolerance_events.1007.a
		
		add_province_modifier = { name = highwaymen_modifier duration = 3650 }
	}
	option = {	# Establish more frequent patrols
		name = goblin_tolerance_events.1007.b
		trigger = {owner = {manpower = 5}}
		
		hidden_effect = {
			clr_province_flag = goblin_tolerance_events.1007_flag_cd 
			set_province_flag = goblin_tolerance_events.1007_flag_cd 
		}
		owner = {
			add_estate_loyalty = { estate = estate_goblin loyalty = -10 }
			add_estate_loyalty = { estate = all loyalty = 10 }
		}
		add_unrest = -10
		lose_manpower_from_provinces = { manpower_per_dev = 0.5 }
	}
	option = {	# Punish them all for harbouring the criminals
		name = goblin_tolerance_events.1007.c
		
		owner= {add_estate_loyalty = { estate = estate_goblin loyalty = -10 }}
		add_province_modifier = { name = populace_punished_for_highwaymen_modifier duration = 3650 }
		get_intolerance_from_provinces = { race = goblin }
		remove_goblin_minority_size_effect = yes
		remove_1_dev_to_provinces = yes
		hidden_effect = {
			random_province = {
				limit = {
					province_distance = { who = THIS distance = 100 }
					owner = {
						NOT = {has_estate_privilege = estate_goblin_purge}
						NOT = {has_estate_privilege = estate_goblin_expulsion}
					}					
				}
				add_1_dev_to_provinces = yes
				add_goblin_minority_size_effect = yes
			}
		}
	}
}
province_event = {	# minority arrives
	id = goblin_tolerance_events.1008
	title = goblin_tolerance_events.1008.t
	desc = goblin_tolerance_events.1008.desc
	picture = CITY_DEVELOPMENT_eventPicture
	GOTO = ROOT

	trigger = {
		is_city = yes
		owner = {
			OR = {
				medium_tolerance_goblin_race_trigger = yes
				high_tolerance_goblin_race_trigger = yes
			}
		}
		OR = {
			NOT = {
				area_for_scope_province = {
					has_province_flag = goblin_tolerance_events.1008_flag_cd
				}
			}
			area_for_scope_province = {
				had_province_flag = {
					flag = goblin_tolerance_events.1008_flag_cd
					days = 7300
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 2400
		modifier = {factor = 5.00 owner = {is_at_war = yes}}
		modifier = {factor = 5.00 owner = {high_tolerance_goblin_race_trigger = no}}
		modifier = {factor = 2.00 owner = {any_owned_province = {has_any_goblin_pop_trigger = no}}}
		modifier = {factor = 1.50 owner = {NOT = {stability = 2}}}
		modifier = {factor = 1.50 owner = {NOT = {legitimacy_equivalent = 80}}}
		modifier = {factor = 1.50 pure_unrest = 5}
		modifier = {factor = 1.50 pure_unrest = 10}
		modifier = {factor = 0.75 owner = {has_country_modifier = racial_focus_goblin}}
		modifier = {factor = 0.75 owner = {has_idea = tolerance_idea_2}}
		modifier = {factor = 0.75 is_prosperous = yes}
		modifier = {factor = 0.95 has_large_goblin_minority_trigger = yes}
		modifier = {factor = 0.95 has_goblin_majority_trigger = yes}
		modifier = {factor = 0.95 development = 20}
		modifier = {factor = 0.95 development = 30}
		modifier = {factor = 0.95 development = 40}
		modifier = {factor = 0.90 num_of_buildings_in_province = 6}
		modifier = {factor = 0.90 num_of_buildings_in_province = 10}
	}

	immediate = {
		hidden_effect = {
			save_event_target_as = province_event_target
			set_variable = {which = province_development value = 0}
			export_to_variable = {which = province_development value = development}
			set_variable = {which = cash_per_dev_tooltip value = 0}
			change_variable = {which = cash_per_dev_tooltip value = 2}
		}
	}
	option = {	# Nah
		name = goblin_tolerance_events.1008.a

		hidden_effect = {
			clr_province_flag = goblin_tolerance_events.1008_flag_cd 
			set_province_flag = goblin_tolerance_events.1008_flag_cd 
			random_province = {
				limit = {
					province_distance = { who = THIS distance = 100 }
					owner = {
						NOT = {has_estate_privilege = estate_goblin_purge}
						NOT = {has_estate_privilege = estate_goblin_expulsion}
					}
				}
				province_event = { id = goblin_tolerance_events.1008 }
			}
		}
	}
	option = {	# Yes!
		name = goblin_tolerance_events.1008.b
		
		owner = {
			add_estate_loyalty = { estate = estate_goblin loyalty = 5 }
			small_increase_of_goblin_tolerance_effect = yes
		}
		add_goblin_minority_size_effect = yes
	}
	option = {	# Yeah, let them in for a price
		name = goblin_tolerance_events.1008.c
		
		owner= {add_estate_loyalty = { estate = estate_goblin loyalty = -10 }}
		add_goblin_minority_size_effect = yes
		gain_treasury_from_provinces = { cash_per_dev = 2 }		
	}
}
country_event = {	#goblin autonomy privilege
	id = goblin_tolerance_events.5001
	title = goblin_tolerance_events.5001.t
	desc = goblin_tolerance_events.5001.desc
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes

	option = {
		name = goblin_tolerance_events.5001.a

		reapply_estate_privilege = { privilege = estate_goblin_autonomy }
	}
	option = {
		name = goblin_tolerance_events.5001.b

		custom_tooltip = remove_estate_goblin_autonomy.tooltip
		remove_estate_privilege = estate_goblin_autonomy
		hidden_effect = {
			every_owned_province = {
				limit = {has_province_modifier = estate_guaranteed_autonomy_mod}
				remove_province_modifier = estate_guaranteed_autonomy_mod
			}
		}
	}
}
country_event = {	#goblin Intolerance privilege
	id = goblin_tolerance_events.5002
	title = goblin_tolerance_events.5002.t
	desc = goblin_tolerance_events.5002.desc
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes

	option = {
		name = goblin_tolerance_events.5002.a

		reapply_estate_privilege = { privilege = estate_goblin_intolerance_policy }
	}
	option = {
		name = goblin_tolerance_events.5002.b

		remove_estate_privilege = estate_goblin_intolerance_policy
	}
}
country_event = {	# goblin taxation
	id = goblin_tolerance_events.5003
	title = goblin_tolerance_events.5003.t
	desc = goblin_tolerance_events.5003.desc
	picture = TRADE_GOODS_PLANTATION_GOODS_IN_WAREHOUSE_eventPicture

	is_triggered_only = yes

	option = {
		name = goblin_tolerance_events.5003.a
		trigger = {
			any_owned_province = { has_goblin_majority_trigger = yes }
		}

		reapply_estate_privilege = { privilege = estate_goblin_taxation_policy }
	}
	option = {
		name = goblin_tolerance_events.5003.b

		custom_tooltip = remove_estate_goblin_taxation_policy.tooltip
		remove_estate_privilege = estate_goblin_taxation_policy
	}
}
country_event = {	# goblin tolerance update
	id = goblin_tolerance_events.5004
	title = goblin_tolerance_events.5004.t
	desc = goblin_tolerance_events.5004.desc
	picture = DIPLOMACY_eventPicture

	is_triggered_only = yes
	hidden = yes

	option = {
		name = goblin_tolerance_events.5004.a

		every_owned_province = {
			update_specific_racial_province_modifier_tolerance = { race=goblin }
		}
	}
}
country_event = {	# goblin tolerance update
	id = goblin_tolerance_events.5005
	title = goblin_tolerance_events.5005.t
	desc = goblin_tolerance_events.5005.desc
	picture = DIPLOMACY_eventPicture

	is_triggered_only = yes
	hidden = yes

	option = {
		name = goblin_tolerance_events.5005.a

		update_goblin_tolerance = yes
	}
}
country_event = {	#Expulsion/Purge - Minority 
	id = racial_pop_events_goblin.17
	title = racial_pop_events_goblin.17.t
	picture = REFUGEES_ESCAPING_eventPicture
	goto = racial_pop_province_origin
	
	desc = {
		trigger = { has_country_modifier = racial_pop_goblin_expulsion }
		desc = racial_pop_events_goblin.17.d
	}
	desc = {
		trigger = { has_country_modifier = racial_pop_goblin_purge }
		desc = racial_pop_events_goblin.17.dpurge
	}

	trigger = {
		OR = {
			has_country_modifier = racial_pop_goblin_expulsion
			has_country_modifier = racial_pop_goblin_purge
		}
		any_owned_province = {
			has_goblin_minority_trigger = yes
		}
	}
	
	mean_time_to_happen = {
		days = 1825
		modifier = {factor = 0.90 has_country_modifier = monstrous_nation }
		modifier = {factor = 0.50 has_country_modifier = racial_focus_goblin}
		modifier = {factor = 0.75 has_country_modifier = racial_pop_goblin_purge}
		modifier = {factor = 0.75 has_idea = supremacy_inquisition}
		modifier = {factor = 0.75 has_government_attribute = faster_purguing_reform}
		modifier = {factor = 0.75 has_government_attribute = expulsion_purge_give_cash_and_power}
		modifier = {
			factor = 0.1
			calc_true_if = {
				all_owned_province = {
					has_goblin_minority_trigger = yes
				}
				amount = 100
			}
		}
		modifier = {
			factor = 0.5
			calc_true_if = {
				all_owned_province = {
					has_goblin_minority_trigger = yes
				}
				amount = 50
			}
		}
		modifier = {
			factor = 0.75
			calc_true_if = {
				all_owned_province = {
					has_goblin_minority_trigger = yes
				}
				amount = 25
			}
		}
	}
	
	immediate = {
		hidden_effect = {	#Make this the monstrous purge thing
			random_owned_province = {
				limit = {
					has_goblin_minority_trigger = yes
				}
				save_event_target_as = racial_pop_province_origin
			}
			random_owned_province = {
				limit = {
					has_goblin_minority_trigger = yes
					development = 10
				}
				save_event_target_as = racial_pop_province_origin
			}
			random_owned_province = {
				limit = {
					has_goblin_minority_trigger = yes
					development = 20
				}
				save_event_target_as = racial_pop_province_origin
			}
			random_owned_province = {
				limit = {
					has_goblin_minority_trigger = yes
					development = 30
				}
				save_event_target_as = racial_pop_province_origin
			}
			random_owned_province = {
				limit = {
					has_goblin_minority_trigger = yes
					units_in_province = 1
				}
				save_event_target_as = racial_pop_province_origin
			}
		}
		hidden_effect = {	#Which country to migrate to
			random_neighbor_country = {
				limit = {
					NOT = { has_country_modifier = racial_pop_goblin_purge }
					NOT = { has_country_modifier = racial_pop_goblin_expulsion }
				}
				save_event_target_as = racial_pop_migration_country
			}
			random_neighbor_country = {
				limit = {
					NOT = { has_country_modifier = racial_pop_goblin_purge }
					NOT = { has_country_modifier = racial_pop_goblin_expulsion }
					any_owned_province = {
						development = 20
					}
				}
				save_event_target_as = racial_pop_migration_country
			}
			random_neighbor_country = {
				limit = {
					NOT = { has_country_modifier = racial_pop_goblin_purge }
					NOT = { has_country_modifier = racial_pop_goblin_expulsion }
					medium_tolerance_goblin_race_trigger = yes
				}
				save_event_target_as = racial_pop_migration_country
			}
			random_neighbor_country = {
				limit = {
					NOT = { has_country_modifier = racial_pop_goblin_purge }
					NOT = { has_country_modifier = racial_pop_goblin_expulsion }
					medium_tolerance_goblin_race_trigger = yes
					any_owned_province = {
						development = 20
					}
				}
				save_event_target_as = racial_pop_migration_country
			}
			random_neighbor_country = {
				limit = {
					NOT = { has_country_modifier = racial_pop_goblin_purge }
					NOT = { has_country_modifier = racial_pop_goblin_expulsion }
					high_tolerance_goblin_race_trigger = yes
				}
				save_event_target_as = racial_pop_migration_country
			}
			random_neighbor_country = {
				limit = {
					NOT = { has_country_modifier = racial_pop_goblin_purge }
					NOT = { has_country_modifier = racial_pop_goblin_expulsion }
					OR = {
						medium_tolerance_goblin_race_trigger = yes
						high_tolerance_goblin_race_trigger = yes
					}
					any_owned_province = {
						development = 20
						NOT = { has_goblin_minority_trigger = yes }
						NOT = { has_goblin_majority_trigger = yes }
					}
				}
				save_event_target_as = racial_pop_migration_country
			}
		}
	}
	option = {			#Expel!
		name = racial_pop_events_goblin.17.a
		trigger = {has_country_modifier = racial_pop_goblin_expulsion}
		ai_chance = {factor = 50}
		event_target:racial_pop_province_origin = {	#Remove Minority from Origin Province
			remove_goblin_minority_size_effect = yes
			add_devastation = 10
		}
		if = {	#only does this if they have an adjacent country
			limit = {
				any_neighbor_country = { 
					NOT = { low_tolerance_goblin_race_trigger = yes }
				}
			}
			event_target:racial_pop_migration_country  = {	#Calls Migrants Arrive to Migration Country
				country_event = {
					id = racial_pop_events_goblin.10
					days = 14
					random = 31
				}
			}
		}
		if = {
			limit = { ruler_has_personality = greedy_personality }
			if = {
				limit = {
					event_target:racial_pop_province_origin = {
						development = 20
					}
				}
				add_treasury = 50
			}
			else = {
				add_treasury = 10
			}
		}
		medium_decrease_of_goblin_tolerance_effect = yes
	}
	option = {			#Purge!
		name = racial_pop_events_goblin.19.a
		ai_chance = {factor = 50}
		trigger = {has_country_modifier = racial_pop_goblin_purge}
		if = {
			limit = { 
				ruler_has_personality = cruel_personality 
				event_target:racial_pop_province_origin = {
					has_large_goblin_minority_trigger = yes
				}
			}
			event_target:racial_pop_province_origin = {	#Remove Minority from Origin Province
				remove_goblin_minority_size_effect = yes
				remove_goblin_minority_size_effect = yes
				add_devastation = 20
			}
			large_decrease_of_goblin_tolerance_effect = yes
		}
		else = {
			event_target:racial_pop_province_origin = {	#Remove Minority from Origin Province
				remove_goblin_minority_size_effect = yes
				add_devastation = 20
			}
			large_decrease_of_goblin_tolerance_effect = yes
		}
	}
}

province_event = {	#Expulsion/Purge - Majority 
	id = racial_pop_events_goblin.18
	title = racial_pop_events_goblin.18.t
	picture = REFUGEES_ESCAPING_eventPicture
	goto = ROOT
	
	desc = {
		trigger = { owner = {has_country_modifier = racial_pop_goblin_expulsion }}
		desc = racial_pop_events_goblin.18.d
	}
	desc = {
		trigger = { owner = {has_country_modifier = racial_pop_goblin_purge }}
		desc = racial_pop_events_goblin.18.dpurge
	}
	trigger = {
		is_city = yes
		culture_is_goblin = yes
		NOT = {has_construction = culture}
		owner = {
			OR = {
				has_country_modifier = racial_pop_goblin_expulsion
				has_country_modifier = racial_pop_goblin_purge
			}
		}
	}
	
	mean_time_to_happen = {
		months = 240
		modifier = {factor = 1.1 unrest = 1}
		modifier = {factor = 1.1 unrest = 5}
		modifier = {factor = 1.1 unrest = 10}
		modifier = {factor = 1.1 unrest = 15}
		modifier = {factor = 1.1 unrest = 20}
		modifier = {factor = 0.90 owner = {has_country_modifier = monstrous_nation }}
		modifier = {factor = 0.50 owner = {has_country_modifier = racial_focus_goblin}}
		modifier = {factor = 0.75 owner = {has_country_modifier = racial_pop_goblin_purge}}
		modifier = {factor = 0.75 owner = {has_idea = supremacy_inquisition}}
		modifier = {factor = 0.75 owner = {has_government_attribute = faster_purguing_reform}}
		modifier = {factor = 0.75 owner = {has_government_attribute = expulsion_purge_give_cash_and_power}}
		modifier = {factor = 0.90 units_in_province = owner}
		modifier = {factor = 0.90 NOT = {development = 5}}
		modifier = {factor = 0.90 NOT = {development = 10}}
		modifier = {factor = 0.90 NOT = {development = 20}}
		modifier = {factor = 0.90 NOT = {development = 30}}
	}
	
	immediate = {
		hidden_effect = {	#Which country to migrate to
			owner = {
				save_event_target_as = owner_target
				random_neighbor_country = {
					limit = {
						NOT = { has_country_modifier = racial_pop_goblin_purge }
						NOT = { has_country_modifier = racial_pop_goblin_expulsion }
					}
					save_event_target_as = racial_pop_migration_country
				}
				random_neighbor_country = {
					limit = {
						NOT = { has_country_modifier = racial_pop_goblin_purge }
						NOT = { has_country_modifier = racial_pop_goblin_expulsion }
						any_owned_province = {
							development = 20
						}
					}
					save_event_target_as = racial_pop_migration_country
				}
				random_neighbor_country = {
					limit = {
						NOT = { has_country_modifier = racial_pop_goblin_purge }
						NOT = { has_country_modifier = racial_pop_goblin_expulsion }
						medium_tolerance_goblin_race_trigger = yes
					}
					save_event_target_as = racial_pop_migration_country
				}
				random_neighbor_country = {
					limit = {
						NOT = { has_country_modifier = racial_pop_goblin_purge }
						NOT = { has_country_modifier = racial_pop_goblin_expulsion }
						medium_tolerance_goblin_race_trigger = yes
						any_owned_province = {
							development = 20
						}
					}
					save_event_target_as = racial_pop_migration_country
				}
				random_neighbor_country = {
					limit = {
						NOT = { has_country_modifier = racial_pop_goblin_purge }
						NOT = { has_country_modifier = racial_pop_goblin_expulsion }
						high_tolerance_goblin_race_trigger = yes
					}
					save_event_target_as = racial_pop_migration_country
				}
				random_neighbor_country = {
					limit = {
						NOT = { has_country_modifier = racial_pop_goblin_purge }
						NOT = { has_country_modifier = racial_pop_goblin_expulsion }
						OR = {
							medium_tolerance_goblin_race_trigger = yes
							high_tolerance_goblin_race_trigger = yes
						}
						any_owned_province = {
							development = 20
							NOT = { has_goblin_minority_trigger = yes }
							NOT = { has_goblin_majority_trigger = yes }
						}
					}
					save_event_target_as = racial_pop_migration_country
				}
			}
		}
	}
	option = {			#Expel!
		name = racial_pop_events_goblin.18.a
		ai_chance = {factor = 50}
		trigger = {owner = {has_country_modifier = racial_pop_goblin_expulsion}}
		change_culture = owner
		change_religion = owner
		add_devastation = 30
		bertus_dev_reduction = {value = 0.5}
		add_permanent_province_modifier = { name = expulsion_unrest_modifier duration = 1825 }
		owner = {
			if = {	#only does this if they have an adjacent country
				limit = {
					any_neighbor_country = { 
						NOT = { low_tolerance_goblin_race_trigger = yes }
					}
				}
				event_target:racial_pop_migration_country  = {	#Calls Migrants Arrive to Migration Country
					country_event = {
						id = racial_pop_events_goblin.10
						days = 14
						random = 31
					}
				}
			}
			medium_decrease_of_goblin_tolerance_effect = yes
		}
	}
	option = {		#Purge!	
		name = racial_pop_events_goblin.20.a
		ai_chance = {factor = 50}
		trigger = {owner = {has_country_modifier = racial_pop_goblin_purge}}
		
		add_devastation = 50
		change_culture = owner
		change_religion = owner
		bertus_dev_reduction = {value = 0.5}
		add_permanent_province_modifier = { name = purge_unrest_modifier duration = 1825 }
		hidden_effect = {
			remove_province_modifier = goblin_majority_oppressed
			remove_province_modifier = goblin_majority_coexisting
			remove_province_modifier = goblin_majority_integrated
		}
		owner = {large_decrease_of_goblin_tolerance_effect = yes}
	}	
}

province_event = {	#enslavement
    id = goblin_tolerance_events.5007
    title = goblin_tolerance_events.5007.title
    desc = goblin_tolerance_events.5007.desc
	picture = DIPLOMACY_eventPicture

	hidden = yes
	is_triggered_only = yes

    trigger = {
		is_city = yes	
		controller = {
			has_government_mechanic = enslavement_mechanic
			low_tolerance_goblin_race_trigger = yes
		}
		NOT = { controlled_by = owner }
		has_goblin_majority_trigger = yes
		NOT = {has_province_modifier = already_enslaved_modifier}
	}

	immediate = {}
    option = {
        name = goblin_tolerance_events.5007.a #
		ai_chance = {
			factor = 10
		}
		get_slaves = yes
    }
	after = {
		add_province_modifier = {
			name = already_enslaved_modifier
			duration = 1825
			hidden = yes
		}
	}
}