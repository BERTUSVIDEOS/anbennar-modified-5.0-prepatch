namespace = bertus_pops

province_event = {	#pop updater
	id = bertus_pops.1038
	title = bertus_pops.1038.t
	desc = bertus_pops.1038.desc
	picture = DIPLOMACY_eventPicture
	
	hidden = yes
	is_triggered_only = yes
	
	option = {
		name = bertus_pops.1038.a
		update_bertus_pops = yes
	}
}
province_event = {	#orc+human into half-orc
	id = bertus_pops.2000
	title = bertus_pops.2000.t
	desc = bertus_pops.2000.desc
	picture = DIPLOMACY_eventPicture
	
	
    trigger = {
		is_city = yes
		owner = {			
			high_tolerance_human_race_trigger = yes 
			high_tolerance_orcish_race_trigger = yes 
			OR = {
				medium_tolerance_half_orcish_race_trigger = yes 
				high_tolerance_half_orcish_race_trigger = yes 
			}
		}
		OR = {
			AND = {
				has_orcish_majority_trigger = yes
				OR = {
					has_coexisting_human_minority_trigger = yes
					has_integrated_human_minority_trigger = yes
				}
			}
			AND = {
				has_human_majority_trigger = yes
				OR = {
					has_coexisting_orcish_minority_trigger = yes
					has_integrated_orcish_minority_trigger = yes
				}
			}
		}
    }
	
	mean_time_to_happen = {		
		months = 1200
		
		modifier = {factor = 0.9 owner = {stability = 1}}
		modifier = {factor = 0.75 owner = {is_part_of_hre = yes has_global_flag = xenophile_weddings_hre_flag}}
		modifier = { factor = 0.5 owner = {has_estate_privilege = estate_half_orcish_promoted_inter_racial_marriages}}
		modifier = { 
			factor = 5.0
			owner = {
				OR = {
					has_estate_privilege = estate_human_banned_inter_racial_marriages
					has_estate_privilege = estate_orcish_banned_inter_racial_marriages
				}
			}
		}
		modifier = {factor = 0.9 owner = {stability = 2}}
		modifier = {factor = 0.9 is_prosperous = yes}
		modifier = {factor = 0.5 owner = {has_country_flag = half_orc_grombar}}
	}

	option = {
		name = bertus_pops.2000.a
		if = {
			limit = {
				OR = {
					has_province_modifier = half_orcish_minority_coexisting_small 
					has_province_modifier = half_orcish_minority_integrated_small 
					NOT = {
						has_province_modifier = half_orcish_minority_coexisting_small 
						has_province_modifier = half_orcish_minority_integrated_small 
						has_province_modifier = half_orcish_minority_coexisting_large
						has_province_modifier = half_orcish_minority_integrated_large
					}
				}
			}
			add_half_orcish_minority_size_effect = yes
		}
		else_if	= {
			limit = {continent = asia}		
			change_culture = wuhyun_half_orc
		}
		else_if = {
			limit = {
				OR = {
					continent = north_america
					continent = south_america
				}
			}
			change_culture = chippengarder_half_orc
		}
		else_if = {
			limit = {owner = {has_country_flag = half_orc_grombar}}		
			change_culture = grombar_half_orc
		}
		else = {
			change_culture = cannor_half_orc
		}
		if = {
			limit = {
				owner = {
					is_part_of_hre = yes
					has_global_flag = xenophile_weddings_hre_flag
				}
			}
			add_1_dev_to_provinces = yes
			add_1_dev_to_provinces = yes
			add_1_dev_to_provinces = yes
		}
		hidden_effect = {province_event = {id = bertus_pops.1038}}	#update bertus pops
	}
}
province_event = {	#elfs+humans  into half-elf
	id = bertus_pops.2001
	title = bertus_pops.2001.t
	desc = bertus_pops.2001.desc
	picture = DIPLOMACY_eventPicture
	
    trigger = {
		is_city = yes
		owner = {
			high_tolerance_elven_race_trigger = yes 
			high_tolerance_human_race_trigger = yes 
			OR = {
				medium_tolerance_half_elven_race_trigger = yes 
				high_tolerance_half_elven_race_trigger = yes 
			}
		}
		OR = {
			AND = {
				has_human_majority_trigger = yes
				OR = {
					has_coexisting_elven_minority_trigger = yes
					has_integrated_elven_minority_trigger = yes
				}
			}
			AND = {
				has_elven_majority_trigger = yes
				OR = {
					has_coexisting_human_minority_trigger = yes
					has_integrated_human_minority_trigger = yes
				}
			}
		}
    }
	
	mean_time_to_happen = {		
		months = 1200
		modifier = {
			factor = 0.75
			owner = {
				is_part_of_hre = yes
				has_global_flag = xenophile_weddings_hre_flag
			}
		}
		modifier = {factor = 0.5 owner = {has_estate_privilege = estate_half_elven_promoted_inter_racial_marriages}}
		modifier = {
			factor = 5.0
			owner = {
				OR = {
					has_estate_privilege = estate_human_banned_inter_racial_marriages
					has_estate_privilege = estate_elven_banned_inter_racial_marriages
				}
			}
		}
		modifier = {factor = 0.9 owner = {stability = 1}}
		modifier = {factor = 0.9 owner = {stability = 2}}
		modifier = {factor = 0.9 is_prosperous = yes}
		modifier = {factor = 2.0 is_capital = yes}
	}

	option = {
		name = bertus_pops.2001.a
		if = {
			limit = {
				OR = {
					has_province_modifier = half_elven_minority_coexisting_small 
					has_province_modifier = half_elven_minority_integrated_small 
					NOT = {
						has_province_modifier = half_elven_minority_coexisting_small 
						has_province_modifier = half_elven_minority_integrated_small 
						has_province_modifier = half_elven_minority_coexisting_large
						has_province_modifier = half_elven_minority_integrated_large
					}
				}
			}
			add_half_elven_minority_size_effect = yes
		}
		else = {
			change_culture = cannor_half_elf
		}
		if = {
			limit = {			
				owner = {
					is_part_of_hre = yes
					has_global_flag = xenophile_weddings_hre_flag
				}
			}
			add_1_dev_to_provinces = yes
			add_1_dev_to_provinces = yes
			add_1_dev_to_provinces = yes
		}
		hidden_effect = {province_event = {id = bertus_pops.1038}}	#update bertus pops
	}
}
country_event = {	#non principal military pop
	id = bertus_pops.2002
	title = bertus_pops.2002.t
	desc = bertus_pops.2002.desc
	picture = DIPLOMACY_eventPicture
	
	hidden = yes
	
    trigger = {
		any_owned_province = {
			is_city = yes
			OR = {
				AND = {
					has_non_military_pop = yes
					NOT = {has_province_modifier = non_military_pop}
				}
				AND = {
					has_province_modifier = non_military_pop
					has_non_military_pop = no
				}
			}
		}
    }
	
	mean_time_to_happen = {
		days = 365
		modifier = {factor = 2.0 is_at_war = yes}
		modifier = {factor = 2.0 manpower_percentage = 0.90}
	}
	
	option = {
		name = bertus_pops.2002.a
		random_owned_province = {
			limit = {
				has_non_military_pop = yes
				NOT = {has_province_modifier = non_military_pop}
			}
			area = {
				limit = {
					has_non_military_pop = yes
					NOT = {has_province_modifier = non_military_pop}
				}
				add_non_military_pop = yes
			}
		}
		random_owned_province = {
			limit = {
				has_province_modifier = non_military_pop
				has_non_military_pop = no
			}
			area = {
				limit = {
					has_province_modifier = non_military_pop
					has_non_military_pop = no
				}
				remove_non_military_pop = yes
			}
		}
	}
	after = {
		country_event = {id = bertus_racial_military.1001 days = 2}
	}
}